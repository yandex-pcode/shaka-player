/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
(function(){var innerGlobal=typeof window!="undefined"?window:global;var exportTo={};(function(window,global,module){var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(){da=function(){};ca.Symbol||(ca.Symbol=ea)}var ea=function(){var b=0;return function(c){return"jscomp_symbol_"+(c||"")+b++}}();
function fa(){da();var b=ca.Symbol.iterator;b||(b=ca.Symbol.iterator=ca.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&aa(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}function ha(b){var c=0;return ia(function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}})}function ia(b){fa();b={next:b};b[ca.Symbol.iterator]=function(){return this};return b}function q(b){fa();var c=b[Symbol.iterator];return c?c.call(b):ha(b)}
function la(b,c){if(c){for(var d=ca,e=b.split("."),f=0;f<e.length-1;f++){var g=e[f];g in d||(d[g]={});d=d[g]}e=e[e.length-1];f=d[e];g=c(f);g!=f&&null!=g&&aa(d,e,{configurable:!0,writable:!0,value:g})}}
la("Promise",function(b){function c(b){this.b=0;this.g=void 0;this.a=[];var c=this.c();try{b(c.resolve,c.reject)}catch(m){c.reject(m)}}function d(){this.a=null}function e(b){return b instanceof c?b:new c(function(c){c(b)})}if(b)return b;d.prototype.b=function(b){null==this.a&&(this.a=[],this.f());this.a.push(b)};d.prototype.f=function(){var b=this;this.c(function(){b.h()})};var f=ca.setTimeout;d.prototype.c=function(b){f(b,0)};d.prototype.h=function(){for(;this.a&&this.a.length;){var b=this.a;this.a=
[];for(var c=0;c<b.length;++c){var d=b[c];b[c]=null;try{d()}catch(n){this.g(n)}}}this.a=null};d.prototype.g=function(b){this.c(function(){throw b;})};c.prototype.c=function(){function b(b){return function(e){d||(d=!0,b.call(c,e))}}var c=this,d=!1;return{resolve:b(this.u),reject:b(this.f)}};c.prototype.u=function(b){if(b===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof c)this.w(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;
break a;default:d=!1}d?this.o(b):this.h(b)}};c.prototype.o=function(b){var c=void 0;try{c=b.then}catch(m){this.f(m);return}"function"==typeof c?this.C(c,b):this.h(b)};c.prototype.f=function(b){this.i(2,b)};c.prototype.h=function(b){this.i(1,b)};c.prototype.i=function(b,c){if(0!=this.b)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.b);this.b=b;this.g=c;this.m()};c.prototype.m=function(){if(null!=this.a){for(var b=0;b<this.a.length;++b)g.b(this.a[b]);this.a=null}};
var g=new d;c.prototype.w=function(b){var c=this.c();b.Pb(c.resolve,c.reject)};c.prototype.C=function(b,c){var d=this.c();try{b.call(c,d.resolve,d.reject)}catch(n){d.reject(n)}};c.prototype.then=function(b,d){function e(b,c){return"function"==typeof b?function(c){try{f(b(c))}catch(C){g(C)}}:c}var f,g,h=new c(function(b,c){f=b;g=c});this.Pb(e(b,f),e(d,g));return h};c.prototype["catch"]=function(b){return this.then(void 0,b)};c.prototype.Pb=function(b,c){function d(){switch(e.b){case 1:b(e.g);break;
case 2:c(e.g);break;default:throw Error("Unexpected state: "+e.b);}}var e=this;null==this.a?g.b(d):this.a.push(d)};c.resolve=e;c.reject=function(b){return new c(function(c,d){d(b)})};c.race=function(b){return new c(function(c,d){for(var f=q(b),g=f.next();!g.done;g=f.next())e(g.value).Pb(c,d)})};c.all=function(b){var d=q(b),f=d.next();return f.done?e([]):new c(function(b,c){function g(c){return function(d){h[c]=d;k--;0==k&&b(h)}}var h=[],k=0;do h.push(void 0),k++,e(f.value).Pb(g(h.length-1),c),f=d.next();
while(!f.done)})};return c});la("Promise.prototype.finally",function(b){return b?b:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});function ma(b){function c(c){return b.next(c)}function d(c){return b["throw"](c)}return new Promise(function(e,f){function g(b){b.done?e(b.value):Promise.resolve(b.value).then(c,d).then(g,f)}g(b.next())})}function u(b){return ma(b())}
function na(b){for(var c,d=[];!(c=b.next()).done;)d.push(c.value);return d}var oa="function"==typeof Object.create?Object.create:function(b){function c(){}c.prototype=b;return new c},pa;if("function"==typeof Object.setPrototypeOf)pa=Object.setPrototypeOf;else{var qa;a:{var ta={Md:!0},ua={};try{ua.__proto__=ta;qa=ua.Md;break a}catch(b){}qa=!1}pa=qa?function(b,c){b.__proto__=c;if(b.__proto__!==c)throw new TypeError(b+" is not extensible");return b}:null}var va=pa;
function wa(){this.c=!1;this.a=null;this.N=void 0;this.l=1;this.g=this.U=0;this.b=null}function xa(b){if(b.c)throw new TypeError("Generator is already running");b.c=!0}wa.prototype.f=function(b){this.N=b};function za(b,c){b.b={fd:c,ve:!0};b.l=b.U||b.g}wa.prototype["return"]=function(b){this.b={"return":b};this.l=this.g};function v(b,c,d){b.l=d;return{value:c}}function w(b){b.l=0}function Aa(b,c){b.l=c;b.U=0}function Da(b){b.U=0;var c=b.b.fd;b.b=null;return c}
function Ea(b){this.a=new wa;this.b=b}function Fa(b,c){xa(b.a);var d=b.a.a;if(d)return Ga(b,"return"in d?d["return"]:function(b){return{value:b,done:!0}},c,b.a["return"]);b.a["return"](c);return Ha(b)}function Ga(b,c,d,e){try{var f=c.call(b.a.a,d);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return b.a.c=!1,f;var g=f.value}catch(h){return b.a.a=null,za(b.a,h),Ha(b)}b.a.a=null;e.call(b.a,g);return Ha(b)}
function Ha(b){for(;b.a.l;)try{var c=b.b(b.a);if(c)return b.a.c=!1,{value:c.value,done:!1}}catch(d){b.a.N=void 0,za(b.a,d)}b.a.c=!1;if(b.a.b){c=b.a.b;b.a.b=null;if(c.ve)throw c.fd;return{value:c["return"],done:!0}}return{value:void 0,done:!0}}
function Ia(b){this.next=function(c){xa(b.a);b.a.a?c=Ga(b,b.a.a.next,c,b.a.f):(b.a.f(c),c=Ha(b));return c};this["throw"]=function(c){xa(b.a);b.a.a?c=Ga(b,b.a.a["throw"],c,b.a.f):(za(b.a,c),c=Ha(b));return c};this["return"]=function(c){return Fa(b,c)};fa();this[Symbol.iterator]=function(){return this}}function y(b,c){Ia.prototype=b.prototype;return new Ia(new Ea(c))}
function Ja(b,c){fa();b instanceof String&&(b+="");var d=0,e={next:function(){if(d<b.length){var f=d++;return{value:c(f,b[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}la("Array.prototype.keys",function(b){return b?b:function(){return Ja(this,function(b){return b})}});function Ka(b,c){return Object.prototype.hasOwnProperty.call(b,c)}
la("WeakMap",function(b){function c(b){this.a=(g+=Math.random()+1).toString();if(b){da();fa();b=q(b);for(var c;!(c=b.next()).done;)c=c.value,this.set(c[0],c[1])}}function d(b){Ka(b,f)||aa(b,f,{value:{}})}function e(b){var c=Object[b];c&&(Object[b]=function(b){d(b);return c(b)})}if(function(){if(!b||!Object.seal)return!1;try{var c=Object.seal({}),d=Object.seal({}),e=new b([[c,2],[d,3]]);if(2!=e.get(c)||3!=e.get(d))return!1;e["delete"](c);e.set(d,4);return!e.has(c)&&4==e.get(d)}catch(n){return!1}}())return b;
var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var g=0;c.prototype.set=function(b,c){d(b);if(!Ka(b,f))throw Error("WeakMap key fail: "+b);b[f][this.a]=c;return this};c.prototype.get=function(b){return Ka(b,f)?b[f][this.a]:void 0};c.prototype.has=function(b){return Ka(b,f)&&Ka(b[f],this.a)};c.prototype["delete"]=function(b){return Ka(b,f)&&Ka(b[f],this.a)?delete b[f][this.a]:!1};return c});
la("Map",function(b){function c(){var b={};return b.Ba=b.next=b.head=b}function d(b,c){var d=b.a;return ia(function(){if(d){for(;d.head!=b.a;)d=d.Ba;for(;d.next!=d.head;)return d=d.next,{done:!1,value:c(d)};d=null}return{done:!0,value:void 0}})}function e(b,c){var d=c&&typeof c;"object"==d||"function"==d?g.has(c)?d=g.get(c):(d=""+ ++h,g.set(c,d)):d="p_"+c;var e=b.b[d];if(e&&Ka(b.b,d))for(var f=0;f<e.length;f++){var k=e[f];if(c!==c&&k.key!==k.key||c===k.key)return{id:d,list:e,index:f,X:k}}return{id:d,
list:e,index:-1,X:void 0}}function f(b){this.b={};this.a=c();this.size=0;if(b){b=q(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}}if(function(){if(!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new b(q([[c,"s"]]));if("s"!=d.get(c)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||
"t"!=f.value[1]||!e.next().done?!1:!0}catch(r){return!1}}())return b;da();fa();var g=new WeakMap;f.prototype.set=function(b,c){var d=e(this,b);d.list||(d.list=this.b[d.id]=[]);d.X?d.X.value=c:(d.X={next:this.a,Ba:this.a.Ba,head:this.a,key:b,value:c},d.list.push(d.X),this.a.Ba.next=d.X,this.a.Ba=d.X,this.size++);return this};f.prototype["delete"]=function(b){b=e(this,b);return b.X&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.b[b.id],b.X.Ba.next=b.X.next,b.X.next.Ba=b.X.Ba,b.X.head=
null,this.size--,!0):!1};f.prototype.clear=function(){this.b={};this.a=this.a.Ba=c();this.size=0};f.prototype.has=function(b){return!!e(this,b).X};f.prototype.get=function(b){return(b=e(this,b).X)&&b.value};f.prototype.entries=function(){return d(this,function(b){return[b.key,b.value]})};f.prototype.keys=function(){return d(this,function(b){return b.key})};f.prototype.values=function(){return d(this,function(b){return b.value})};f.prototype.forEach=function(b,c){for(var d=this.entries(),e;!(e=d.next()).done;)e=
e.value,b.call(c,e[1],e[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var h=0;return f});
la("Set",function(b){function c(b){this.a=new Map;if(b){b=q(b);for(var c;!(c=b.next()).done;)this.add(c.value)}this.size=this.a.size}if(function(){if(!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new b(q([c]));if(!e.has(c)||1!=e.size||e.add(c)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=c||g.value[1]!=c)return!1;g=f.next();return g.done||g.value[0]==c||4!=g.value[0].x||
g.value[1]!=g.value[0]?!1:f.next().done}catch(h){return!1}}())return b;da();fa();c.prototype.add=function(b){this.a.set(b,b);this.size=this.a.size;return this};c.prototype["delete"]=function(b){b=this.a["delete"](b);this.size=this.a.size;return b};c.prototype.clear=function(){this.a.clear();this.size=0};c.prototype.has=function(b){return this.a.has(b)};c.prototype.entries=function(){return this.a.entries()};c.prototype.values=function(){return this.a.values()};c.prototype.keys=c.prototype.values;
c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(b,c){var d=this;this.a.forEach(function(e){return b.call(c,e,e,d)})};return c});la("Object.is",function(b){return b?b:function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d}});la("Array.prototype.includes",function(b){return b?b:function(b,d){var c=this;c instanceof String&&(c=String(c));var f=c.length,g=d||0;for(0>g&&(g=Math.max(g+f,0));g<f;g++){var h=c[g];if(h===b||Object.is(h,b))return!0}return!1}});
function La(b,c,d){if(null==b)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return b+""}la("String.prototype.includes",function(b){return b?b:function(b,d){return-1!==La(this,b,"includes").indexOf(b,d||0)}});
la("Array.from",function(b){return b?b:function(b,d,e){fa();d=null!=d?d:function(b){return b};var c=[],g=b[Symbol.iterator];if("function"==typeof g)for(b=g.call(b);!(g=b.next()).done;)c.push(d.call(e,g.value));else{g=b.length;for(var h=0;h<g;h++)c.push(d.call(e,b[h]))}return c}});la("String.prototype.startsWith",function(b){return b?b:function(b,d){for(var c=La(this,b,"startsWith"),f=c.length,g=b.length,h=Math.max(0,Math.min(d|0,c.length)),k=0;k<g&&h<f;)if(c[h++]!=b[k++])return!1;return k>=g}});
la("Array.prototype.find",function(b){return b?b:function(b,d){a:{var c=this;c instanceof String&&(c=String(c));for(var f=c.length,g=0;g<f;g++){var h=c[g];if(b.call(d,h,g,c)){c=h;break a}}c=void 0}return c}});var Ma="function"==typeof Object.assign?Object.assign:function(b,c){for(var d=1;d<arguments.length;d++){var e=arguments[d];if(e)for(var f in e)Ka(e,f)&&(b[f]=e[f])}return b};la("Object.assign",function(b){return b||Ma});var Na=this;Na.a=!0;
function z(b,c){var d=b.split("."),e=Na;d[0]in e||!e.execScript||e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)d.length||void 0===c?e[f]?e=e[f]:e=e[f]={}:e[f]=c}function Oa(b,c){function d(){}d.prototype=c.prototype;b.hf=c.prototype;b.prototype=new d;b.prototype.constructor=b;b.wf=function(b,d,g){return c.prototype[d].apply(b,Array.prototype.slice.call(arguments,2))}};/*

 Copyright 2016 Google Inc.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Qa(b){this.c=Math.exp(Math.log(.5)/b);this.b=this.a=0}function Ra(b,c,d){var e=Math.pow(b.c,c);d=d*(1-e)+e*b.a;isNaN(d)||(b.a=d,b.b+=c)}function Sa(b){return b.a/(1-Math.pow(b.c,b.b))};function Ta(){this.b=new Qa(2);this.c=new Qa(5);this.a=0}Ta.prototype.getBandwidthEstimate=function(b){return 128E3>this.a?b:Math.min(Sa(this.b),Sa(this.c))};var A={hb:0,Ob:function(){},qa:function(){},error:function(){},j:function(){},info:function(){},debug:function(){},A:function(){},H:function(){}};window.console&&window.console.log.bind&&(A.qa=console.warn.bind(console),A.Ob=console.error.bind(console),1<=A.hb&&(A.error=console.error.bind(console)),2<=A.hb&&(A.j=console.warn.bind(console)),3<=A.hb&&(A.info=console.info.bind(console)),4<=A.hb&&(A.debug=console.log.bind(console)),5<=A.hb&&(A.A=console.debug.bind(console)),6<=A.hb&&(A.H=console.debug.bind(console)));/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var Va=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function Wa(b){var c;b instanceof Wa?(Xa(this,b.ta),this.bb=b.bb,this.ra=b.ra,Ya(this,b.xb),this.pa=b.pa,Za(this,b.a.clone()),this.Ra=b.Ra):b&&(c=String(b).match(Va))?(Xa(this,c[1]||"",!0),this.bb=$a(c[2]||""),this.ra=$a(c[3]||"",!0),Ya(this,c[4]),this.pa=$a(c[5]||"",!0),Za(this,c[6]||"",!0),this.Ra=$a(c[7]||"")):this.a=new ab(null)}l=Wa.prototype;l.ta="";l.bb="";l.ra="";l.xb=null;l.pa="";l.Ra="";
l.toString=function(){var b=[],c=this.ta;c&&b.push(bb(c,cb,!0),":");if(c=this.ra){b.push("//");var d=this.bb;d&&b.push(bb(d,cb,!0),"@");b.push(encodeURIComponent(c).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));c=this.xb;null!=c&&b.push(":",String(c))}if(c=this.pa)this.ra&&"/"!=c.charAt(0)&&b.push("/"),b.push(bb(c,"/"==c.charAt(0)?db:eb,!0));(c=this.a.toString())&&b.push("?",c);(c=this.Ra)&&b.push("#",bb(c,fb));return b.join("")};
l.resolve=function(b){var c=this.clone();"data"===c.ta&&(c=new Wa);var d=!!b.ta;d?Xa(c,b.ta):d=!!b.bb;d?c.bb=b.bb:d=!!b.ra;d?c.ra=b.ra:d=null!=b.xb;var e=b.pa;if(d)Ya(c,b.xb);else if(d=!!b.pa){if("/"!=e.charAt(0))if(this.ra&&!this.pa)e="/"+e;else{var f=c.pa.lastIndexOf("/");-1!=f&&(e=c.pa.substr(0,f+1)+e)}if(".."==e||"."==e)e="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){f=0==e.lastIndexOf("/",0);e=e.split("/");for(var g=[],h=0;h<e.length;){var k=e[h++];"."==k?f&&h==e.length&&g.push(""):".."==
k?((1<g.length||1==g.length&&""!=g[0])&&g.pop(),f&&h==e.length&&g.push("")):(g.push(k),f=!0)}e=g.join("/")}}d?c.pa=e:d=""!==b.a.toString();d?Za(c,b.a.clone()):d=!!b.Ra;d&&(c.Ra=b.Ra);return c};l.clone=function(){return new Wa(this)};function Xa(b,c,d){b.ta=d?$a(c,!0):c;b.ta&&(b.ta=b.ta.replace(/:$/,""))}function Ya(b,c){if(c){c=Number(c);if(isNaN(c)||0>c)throw Error("Bad port number "+c);b.xb=c}else b.xb=null}function Za(b,c,d){c instanceof ab?b.a=c:(d||(c=bb(c,gb)),b.a=new ab(c))}
function $a(b,c){return b?c?decodeURI(b):decodeURIComponent(b):""}function bb(b,c,d){return"string"==typeof b?(b=encodeURI(b).replace(c,hb),d&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function hb(b){b=b.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var cb=/[#\/\?@]/g,eb=/[#\?:]/g,db=/[#\?]/g,gb=/[#\?@]/g,fb=/#/g;function ab(b){this.a=b||null}l=ab.prototype;l.fa=null;l.Rb=null;
l.add=function(b,c){if(!this.fa&&(this.fa={},this.Rb=0,this.a))for(var d=this.a.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null;if(0<=f){var h=d[e].substring(0,f);g=d[e].substring(f+1)}else h=d[e];h=decodeURIComponent(h.replace(/\+/g," "));g=g||"";this.add(h,decodeURIComponent(g.replace(/\+/g," ")))}this.a=null;(d=this.fa.hasOwnProperty(b)&&this.fa[b])||(this.fa[b]=d=[]);d.push(c);this.Rb++;return this};
l.toString=function(){if(this.a)return this.a;if(!this.fa)return"";var b=[],c;for(c in this.fa)for(var d=encodeURIComponent(c),e=this.fa[c],f=0;f<e.length;f++){var g=d;""!==e[f]&&(g+="="+encodeURIComponent(e[f]));b.push(g)}return this.a=b.join("&")};l.clone=function(){var b=new ab;b.a=this.a;if(this.fa){var c={},d;for(d in this.fa)c[d]=this.fa[d].concat();b.fa=c;b.Rb=this.Rb}return b};function ib(b){this.b=b;this.a=null}ib.prototype.V=function(b){var c=this;this.stop();var d=!0,e=null;this.a=function(){window.clearTimeout(e);d=!1};e=window.setTimeout(function(){d&&c.b()},1E3*b);return this};ib.prototype.stop=function(){this.a&&(this.a(),this.a=null)};function B(b){this.b=b;this.a=null}z("shaka.util.Timer",B);B.prototype.jf=function(){this.stop();this.b();return this};B.prototype.tickNow=B.prototype.jf;B.prototype.V=function(b){var c=this;this.stop();this.a=(new ib(function(){c.b()})).V(b);return this};B.prototype.tickAfter=B.prototype.V;B.prototype.Ca=function(b){var c=this;this.stop();this.a=(new ib(function(){c.a.V(b);c.b()})).V(b);return this};B.prototype.tickEvery=B.prototype.Ca;B.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)};
B.prototype.stop=B.prototype.stop;function jb(b,c){var d=kb();this.i=null==b.maxAttempts?d.maxAttempts:b.maxAttempts;this.f=null==b.baseDelay?d.baseDelay:b.baseDelay;this.h=null==b.fuzzFactor?d.fuzzFactor:b.fuzzFactor;this.g=null==b.backoffFactor?d.backoffFactor:b.backoffFactor;this.a=0;this.b=this.f;if(this.c=void 0===c?!1:c)this.a=1}
function lb(b){return u(function d(){var e,f;return y(d,function(d){switch(d.l){case 1:if(b.a>=b.i)if(b.c)b.a=1,b.b=b.f;else return d["return"](Promise.reject());e=b.a;b.a++;if(0==e)return d["return"]();f=b.b*(1+(2*Math.random()-1)*b.h);return v(d,new Promise(function(b){(new B(b)).V(f/1E3)}),2);case 2:b.b*=b.g,w(d)}})})}function kb(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}};function D(b,c,d,e){for(var f=[],g=3;g<arguments.length;++g)f[g-3]=arguments[g];this.severity=b;this.category=c;this.code=d;this.data=f;this.handled=!1}z("shaka.util.Error",D);D.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};D.Severity={RECOVERABLE:1,CRITICAL:2};D.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9};
D.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,
MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,
DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,
HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6E3,
REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7E3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,
CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,
MISSING_STORAGE_CELL:9013};function E(){var b,c,d=new Promise(function(d,f){b=d;c=f});d.resolve=b;d.reject=c;return d}E.prototype.resolve=function(){};E.prototype.reject=function(){};function G(b,c){this.promise=b;this.qd=c;this.a=!1}z("shaka.util.AbortableOperation",G);function mb(b){return new G(Promise.reject(b),function(){return Promise.resolve()})}G.failed=mb;function pb(){var b=Promise.reject(new D(2,7,7001));b["catch"](function(){});return new G(b,function(){return Promise.resolve()})}G.aborted=pb;function qb(b){return new G(Promise.resolve(b),function(){return Promise.resolve()})}G.completed=qb;
function rb(b){return new G(b,function(){return b["catch"](function(){})})}G.notAbortable=rb;G.prototype.abort=function(){this.a=!0;return this.qd()};G.prototype.abort=G.prototype.abort;function sb(b){return new G(Promise.all(b.map(function(b){return b.promise})),function(){return Promise.all(b.map(function(b){return b.abort()}))})}G.all=sb;G.prototype["finally"]=function(b){this.promise.then(function(){return b(!0)},function(){return b(!1)});return this};G.prototype["finally"]=G.prototype["finally"];
G.prototype.aa=function(b,c){function d(d){return function(k){if(f.a&&d)g.reject(h);else{var m=d?b:c;m?e=tb(m,k,g):(d?g.resolve:g.reject)(k)}}}function e(){g.reject(h);return f.abort()}var f=this,g=new E,h=new D(2,7,7001);this.promise.then(d(!0),d(!1));return new G(g,function(){return e()})};G.prototype.chain=G.prototype.aa;
function tb(b,c,d){try{var e=b(c);if(e&&e.promise&&e.abort)return d.resolve(e.promise),function(){return e.abort()};d.resolve(e);return function(){return Promise.resolve(e).then(function(){},function(){})}}catch(f){return d.reject(f),function(){return Promise.resolve()}}};function H(b,c){c=void 0===c?{}:c;for(var d in c)this[d]=c[d];this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=b;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}H.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};H.prototype.stopImmediatePropagation=function(){this.a=!0};H.prototype.stopPropagation=function(){};function ub(){this.a={}}l=ub.prototype;l.push=function(b,c){this.a.hasOwnProperty(b)?this.a[b].push(c):this.a[b]=[c]};l.get=function(b){return(b=this.a[b])?b.slice():null};l.remove=function(b,c){var d=this.a[b];if(d)for(var e=0;e<d.length;++e)d[e]==c&&(d.splice(e,1),--e)};l.forEach=function(b){for(var c in this.a)b(c,this.a[c])};l.size=function(){return Object.keys(this.a).length};function vb(){this.nc=new ub;this.ld=this}vb.prototype.addEventListener=function(b,c){this.nc.push(b,c)};vb.prototype.removeEventListener=function(b,c){this.nc.remove(b,c)};vb.prototype.dispatchEvent=function(b){for(var c=this.nc.get(b.type)||[],d=0;d<c.length;++d){b.target=this.ld;b.currentTarget=this.ld;var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(this,b)}catch(f){A.error("Uncaught exception in event handler",f,f?f.message:null,f?f.stack:null)}if(b.a)break}return b.defaultPrevented};function wb(b){function c(b){switch(typeof b){case "undefined":case "boolean":case "number":case "string":case "symbol":case "function":return b;default:if(!b||b.buffer&&b.buffer.constructor==ArrayBuffer)return b;if(d.has(b))return null;var e=b.constructor==Array;if(b.constructor!=Object&&!e)return null;d.add(b);var g=e?[]:{},h;for(h in b)g[h]=c(b[h]);e&&(g.length=b.length);return g}}var d=new Set;return c(b)};function xb(b,c){var d=b.indexOf(c);-1<d&&b.splice(d,1)}function yb(b,c){var d=0;b.forEach(function(b){d+=c(b)?1:0});return d};function zb(){this.a=[]}function Ab(b,c){b.a.push(c["finally"](function(){xb(b.a,c)}))}zb.prototype.destroy=function(){var b=[];this.a.forEach(function(c){c.promise["catch"](function(){});b.push(c.abort())});this.a=[];return Promise.all(b)};function J(b){vb.call(this);this.f=!1;this.g=new zb;this.a=new Set;this.b=new Set;this.c=b||null}Oa(J,vb);z("shaka.net.NetworkingEngine",J);J.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};J.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Bb={};function Cb(b,c,d){d=d||3;var e=Bb[b];if(!e||d>=e.priority)Bb[b]={priority:d,Pe:c}}J.registerScheme=Cb;J.unregisterScheme=function(b){delete Bb[b]};J.prototype.Re=function(b){this.a.add(b)};J.prototype.registerRequestFilter=J.prototype.Re;
J.prototype.mf=function(b){this.a["delete"](b)};J.prototype.unregisterRequestFilter=J.prototype.mf;J.prototype.Rd=function(){this.a.clear()};J.prototype.clearAllRequestFilters=J.prototype.Rd;J.prototype.Se=function(b){this.b.add(b)};J.prototype.registerResponseFilter=J.prototype.Se;J.prototype.nf=function(b){this.b["delete"](b)};J.prototype.unregisterResponseFilter=J.prototype.nf;J.prototype.Sd=function(){this.b.clear()};J.prototype.clearAllResponseFilters=J.prototype.Sd;
J.defaultRetryParameters=function(){return kb()};function Db(b,c,d,e,f){return{uris:b,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:c,licenseRequestType:null,sessionId:null,stream:void 0===d?null:d,streamDataCallback:void 0===e?null:e,vd:void 0===f?null:f}}J.makeRequest=Db;J.prototype.destroy=function(){this.f=!0;this.a.clear();this.b.clear();return this.g.destroy()};J.prototype.destroy=J.prototype.destroy;
J.prototype.request=function(b,c){var d=this,e=new Eb;if(this.f){var f=Promise.reject(new D(2,7,7001));f["catch"](function(){});return new Fb(f,function(){return Promise.resolve()},e)}c.method=c.method||"GET";c.headers=c.headers||{};c.retryParameters=c.retryParameters?wb(c.retryParameters):kb();c.uris=wb(c.uris);f=Gb(this,b,c);var g=f.aa(function(){return Hb(d,b,c,new jb(c.retryParameters,!1),0,null,e)}),h=g.aa(function(c){return Ib(d,b,c)}),k=Date.now(),m=0;f.promise.then(function(){m=Date.now()-
k},function(){});var n=0;g.promise.then(function(){n=Date.now()},function(){});f=h.aa(function(c){var e=Date.now()-n,f=c.response;f.timeMs+=m;f.timeMs+=e;c.te||!d.c||f.fromCache||1!=b||d.c(f.timeMs,f.data.byteLength);return f},function(b){b&&(b.severity=2);throw b;});f=new Fb(f.promise,f.qd,e);Ab(this.g,f);return f};J.prototype.request=J.prototype.request;
function Gb(b,c,d){var e=qb(void 0),f={};b=q(b.a);for(var g=b.next();!g.done;f={Qc:f.Qc},g=b.next())f.Qc=g.value,e=e.aa(function(b){return function(){return b.Qc(c,d)}}(f));return e.aa(void 0,function(b){if(b&&7001==b.code)throw b;throw new D(2,1,1006,b);})}
function Hb(b,c,d,e,f,g,h){var k=new Wa(d.uris[f]),m=k.ta,n=!1;m||(m=location.protocol,m=m.slice(0,-1),Xa(k,m),d.uris[f]=k.toString());m=m.toLowerCase();var p=(m=Bb[m])?m.Pe:null;if(!p)return mb(new D(2,1,1E3,k));var r;return rb(lb(e)).aa(function(){if(b.f)return pb();r=Date.now();return p(d.uris[f],d,c,function(d,e,f){b.c&&1==c&&(b.c(d,e),n=!0,h.a=f)})}).aa(function(b){void 0==b.timeMs&&(b.timeMs=Date.now()-r);return{response:b,te:n}},function(k){if(k&&7001==k.code)throw k;if(b.f)return pb();if(k&&
1==k.severity)return b.dispatchEvent(new H("retry",{error:k instanceof D?k:null})),d.vd&&d.vd(),f=(f+1)%d.uris.length,Hb(b,c,d,e,f,k,h);throw k||g;})}function Ib(b,c,d){var e=qb(void 0);b=q(b.b);for(var f=b.next();!f.done;f=b.next())e=e.aa(f.value.bind(null,c,d.response));return e.aa(function(){return d},function(b){if(b&&7001==b.code)throw b;var c=2;b instanceof D&&(c=b.severity);throw new D(c,1,1007,b);})}function Eb(){this.a=0}J.NumBytesRemainingClass=Eb;
function Fb(b,c,d){G.call(this,b,c);this.b=d}var Jb=Fb;Jb.prototype=oa(G.prototype);Jb.prototype.constructor=Jb;if(va)va(Jb,G);else for(var Kb in G)if("prototype"!=Kb)if(Object.defineProperties){var Lb=Object.getOwnPropertyDescriptor(G,Kb);Lb&&Object.defineProperty(Jb,Kb,Lb)}else Jb[Kb]=G[Kb];Jb.hf=G.prototype;J.PendingRequest=Fb;Fb.all=sb;Fb.notAbortable=rb;Fb.completed=qb;Fb.aborted=pb;Fb.failed=mb;function Mb(){}z("shaka.util.IReleasable",Mb);Mb.prototype.release=function(){};function K(){this.a=new ub}z("shaka.util.EventManager",K);K.prototype.release=function(){this.Hb();this.a=null};K.prototype.release=K.prototype.release;K.prototype.B=function(b,c,d,e){this.a&&(b=new Nb(b,c,d,e),this.a.push(c,b))};K.prototype.listen=K.prototype.B;K.prototype.oa=function(b,c,d,e){function f(e){g.ja(b,c,f);d(e)}var g=this;this.B(b,c,f,e)};K.prototype.listenOnce=K.prototype.oa;
K.prototype.ja=function(b,c,d){if(this.a){var e=this.a.get(c)||[];e=q(e);for(var f=e.next();!f.done;f=e.next())f=f.value,f.target!=b||d!=f.listener&&d||(f.ja(),this.a.remove(c,f))}};K.prototype.unlisten=K.prototype.ja;K.prototype.Hb=function(){if(this.a){var b=this.a,c=[],d;for(d in b.a)c.push.apply(c,b.a[d]);b=q(c);for(c=b.next();!c.done;c=b.next())c.value.ja();this.a.a={}}};K.prototype.removeAll=K.prototype.Hb;
function Nb(b,c,d,e){this.target=b;this.type=c;this.listener=d;this.a=Ob(b,e);this.target.addEventListener(c,d,this.a)}Nb.prototype.ja=function(){this.target.removeEventListener(this.type,this.listener,this.a);this.listener=this.target=null;this.a=!1};Nb.prototype.unlisten=Nb.prototype.ja;function Ob(b,c){if(void 0==c)return!1;if("boolean"==typeof c)return c;var d=new Set(["passive","capture"]);Object.keys(c).filter(function(b){return!d.has(b)});return Pb(b)?c:c.capture||!1}
function Pb(b){var c=Ub;if(void 0==c){c=!1;try{var d={},e={get:function(){c=!0;return!1}};Object.defineProperty(d,"passive",e);Object.defineProperty(d,"capture",e);e=function(){};b.addEventListener("test",e,d);b.removeEventListener("test",e,d)}catch(f){c=!1}Ub=c}return c||!1}var Ub=void 0;function Vb(b){b=Wb(b);return(new Wa(b)).ra}z("shaka.util.FairPlayUtils.defaultGetContentId",Vb);function Xb(b,c,d){function e(b){(new DataView(f.buffer)).setUint32(g,b.byteLength,!0);g+=4;f.set(b,g);g+=b.byteLength}if(!d||!d.byteLength)throw new D(2,6,6015);c="string"==typeof c?new Uint8Array(Yb(c,!0)):new Uint8Array(c);b=Wb(b);b=Yb(b,!0);var f=new Uint8Array(12+b.byteLength+c.byteLength+d.byteLength),g=0;e(new Uint8Array(b));e(c);e(new Uint8Array(d));return f}
z("shaka.util.FairPlayUtils.initDataTransform",Xb);function Zb(b,c){for(var d=q(b),e=d.next();!e.done;e=d.next())if(!c(e.value))return!1;return!0};function $b(b){var c=new Map;Object.keys(b).forEach(function(d){c.set(d,b[d])});return c}function ac(b){var c={};b.forEach(function(b,e){c[e]=b});return c};function bc(b,c){var d=b;c&&(d+='; codecs="'+c+'"');return d}function cc(b){var c=[b.mimeType];dc.forEach(function(d,e){var f=b[e];f&&c.push(d+'="'+f+'"')});return c.join(";")}function ec(b){b=b.split(".");var c=b[0];b.pop();return[c,b.join(".")]}var dc=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function fc(){return window.MediaSource&&MediaSource.isTypeSupported?!0:!1}function gc(b){return""!=hc().canPlayType(b)}function ic(){return navigator.userAgent.match(/Edge?\//)?!0:!1}function jc(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!kc("Tizen")}function lc(){if(!jc())return null;var b=navigator.userAgent.match(/Version\/(\d+)/);return b?parseInt(b[1],10):(b=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(b[1],10):null}
function kc(b){return(navigator.userAgent||"").includes(b)}function hc(){if(mc)return mc;nc||(nc=new B(function(){mc=null}));(mc=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(mc=document.createElement("video"));nc.V(1);return mc}var nc=null,mc=null;function oc(b){if(!b)return"";b=new Uint8Array(b);239==b[0]&&187==b[1]&&191==b[2]&&(b=b.subarray(3));b=pc(b);b=escape(b);try{return decodeURIComponent(b)}catch(c){throw new D(2,2,2004);}}z("shaka.util.StringUtils.fromUTF8",oc);
function qc(b,c,d){if(!b)return"";if(!d&&0!=b.byteLength%2)throw A.error("Data has an incorrect length, must be even."),new D(2,2,2004);if(b instanceof ArrayBuffer)var e=b;else d=new Uint8Array(b.byteLength),d.set(new Uint8Array(b)),e=d.buffer;b=Math.floor(b.byteLength/2);d=new Uint16Array(b);e=new DataView(e);for(var f=0;f<b;f++)d[f]=e.getUint16(2*f,c);return pc(d)}z("shaka.util.StringUtils.fromUTF16",qc);
function Wb(b){var c=new Uint8Array(b);if(239==c[0]&&187==c[1]&&191==c[2])return oc(c);if(254==c[0]&&255==c[1])return qc(c.subarray(2),!1);if(255==c[0]&&254==c[1])return qc(c.subarray(2),!0);var d=function(b,c){return b.byteLength<=c||32<=b[c]&&126>=b[c]}.bind(null,c);A.debug("Unable to find byte-order-mark, making an educated guess.");if(0==c[0]&&0==c[2])return qc(b,!1);if(0==c[1]&&0==c[3])return qc(b,!0);if(d(0)&&d(1)&&d(2)&&d(3))return oc(b);throw new D(2,2,2003);}
z("shaka.util.StringUtils.fromBytesAutoDetect",Wb);function rc(b){b=encodeURIComponent(b);b=unescape(b);for(var c=new Uint8Array(b.length),d=0;d<b.length;++d)c[d]=b.charCodeAt(d);return c.buffer}z("shaka.util.StringUtils.toUTF8",rc);function Yb(b,c){for(var d=new Uint8Array(2*b.length),e=new DataView(d.buffer),f=0;f<b.length;++f)e.setUint16(2*f,b.charCodeAt(f),c);return d.buffer}z("shaka.util.StringUtils.toUTF16",Yb);
function pc(b){if(!sc)for(var c=function(b){try{var c=new Uint8Array(b);return 0<String.fromCharCode.apply(null,c).length}catch(g){return!1}},d={size:65536};0<d.size;d={size:d.size},d.size/=2)if(c(d.size)){sc=function(b){return function(c){for(var d="",e=0;e<c.length;e+=b.size)d+=String.fromCharCode.apply(null,c.subarray(e,e+b.size));return d}}(d);break}return sc(b)}var sc=null;z("shaka.util.StringUtils.resetFromCharCode",function(){sc=null});var L={gc:function(b,c){var d=pc(b);c=void 0==c?!0:c;d=window.btoa(d).replace(/\+/g,"-").replace(/\//g,"_");return c?d:d.replace(/=*$/,"")}};z("shaka.util.Uint8ArrayUtils.toBase64",L.gc);L.Ha=function(b){b=window.atob(b.replace(/-/g,"+").replace(/_/g,"/"));for(var c=new Uint8Array(b.length),d=0;d<b.length;++d)c[d]=b.charCodeAt(d);return c};z("shaka.util.Uint8ArrayUtils.fromBase64",L.Ha);
L.wc=function(b){for(var c=new Uint8Array(b.length/2),d=0;d<b.length;d+=2)c[d/2]=window.parseInt(b.substr(d,2),16);return c};z("shaka.util.Uint8ArrayUtils.fromHex",L.wc);L.hc=function(b){for(var c="",d=0;d<b.length;++d){var e=b[d].toString(16);1==e.length&&(e="0"+e);c+=e}return c};z("shaka.util.Uint8ArrayUtils.toHex",L.hc);L.Ga=function(b,c){if(!b&&!c)return!0;if(!b||!c||b.length!=c.length)return!1;for(var d=0;d<b.length;++d)if(b[d]!=c[d])return!1;return!0};z("shaka.util.Uint8ArrayUtils.equal",L.Ga);
L.concat=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d]=arguments[d];for(var e=d=0;e<c.length;++e)d+=c[e].length;d=new Uint8Array(d);for(var f=e=0;f<c.length;++f)d.set(c[f],e),e+=c[f].length;return d};z("shaka.util.Uint8ArrayUtils.concat",L.concat);function tc(b,c){var d=this;c=void 0===c?1:c;this.C=b;this.u=new Set;this.h=this.m=null;this.$=!1;this.M=0;this.a=null;this.i=new K;this.b=new Map;this.w=[];this.o=new E;this.f=null;this.g=function(c){d.o.reject(c);b.onError(c)};this.na=new Map;this.ea=new Map;this.Z=new B(function(){return uc(d)});this.c=!1;this.la=new E;this.S=!1;this.L=[];this.ma=!1;this.ka=(new B(function(){vc(d)})).Ca(c);this.o["catch"](function(){})}l=tc.prototype;
l.destroy=function(){var b=this;return u(function d(){return y(d,function(d){switch(d.l){case 1:if(b.c)return v(d,b.la,0);b.c=!0;return v(d,wc(b),4);case 4:b.la.resolve(),d.l=0}})})};
function wc(b){return u(function d(){return y(d,function(d){switch(d.l){case 1:return b.i.release(),b.i=null,b.o.reject(),b.ka.stop(),b.ka=null,b.Z.stop(),b.Z=null,v(d,xc(b),2);case 2:if(!b.h){d.l=3;break}d.U=4;return v(d,b.h.setMediaKeys(null),6);case 6:Aa(d,5);break;case 4:Da(d);case 5:b.h=null;case 3:b.a=null,b.u.clear(),b.m=null,b.w=[],b.f=null,b.g=null,b.C=null,w(d)}})})}l.configure=function(b){this.f=b};function yc(b,c,d){b.w=d;b.S=0<d.length;return zc(b,c)}
function zc(b,c){var d=Ac(b);if(d)for(var e=q(c),f=e.next();!f.done;f=e.next())f.value.drmInfos=[d];d=c.some(function(b){return 0<b.drmInfos.length});d||(f=$b(b.f.servers),Bc(c,f));e=q(c);for(f=e.next();!f.done;f=e.next()){f=q(f.value.drmInfos);for(var g=f.next();!g.done;g=f.next())Cc(g.value,$b(b.f.servers),$b(b.f.advanced||{}))}f=Dc(b,c);if(!f.size)return b.$=!0,Promise.resolve();f=Ec(b,f);return d?f:f["catch"](function(){})}
l.Ab=function(b){var c=this;if(!this.m)return this.i.oa(b,"encrypted",function(){c.g(new D(2,6,6010))}),Promise.resolve();this.h=b;this.i.oa(this.h,"play",function(){for(var b=0;b<c.L.length;b++)Fc(c,c.L[b]);c.ma=!0;c.L=[]});"webkitCurrentPlaybackTargetIsWireless"in this.h&&this.i.B(this.h,"webkitcurrentplaybacktargetiswirelesschanged",function(){return xc(c)});b=this.h.setMediaKeys(this.m);b=b["catch"](function(b){return Promise.reject(new D(2,6,6003,b.message))});var d=Gc(this);return Promise.all([b,
d]).then(function(){if(c.c)return Promise.reject();Hc(c);c.a.initData.length||c.w.length||c.i.B(c.h,"encrypted",function(b){return Ic(c,b.initDataType,new Uint8Array(b.initData))})})["catch"](function(b){if(!c.c)return Promise.reject(b)})};
function Gc(b){return u(function d(){var e,f;return y(d,function(d){switch(d.l){case 1:if(!(b.m&&b.a&&b.a.serverCertificate&&b.a.serverCertificate.length)){d.l=0;break}d.U=3;return v(d,b.m.setServerCertificate(b.a.serverCertificate),5);case 5:(e=d.N)||A.j("Server certificates are not supported by the key system.  The server certificate has been ignored.");Aa(d,0);break;case 3:return f=Da(d),d["return"](Promise.reject(new D(2,6,6004,f.message)))}})})}
function Hc(b){var c=b.a?b.a.initData:[];c.forEach(function(c){return Ic(b,c.initDataType,c.initData)});b.w.forEach(function(c){return Jc(b,c)});c.length||b.w.length||b.o.resolve()}function Ic(b,c,d){var e=b.b.values();e=q(e);for(var f=e.next();!f.done;f=e.next())if(L.Ga(d,f.value.initData)&&!kc("Tizen 2")){A.debug("Ignoring duplicate init data.");return}Nc(b,c,d)}function Oc(b){return b?b.keySystem:""}
l.zc=function(){var b=Infinity,c=this.b.keys();c=q(c);for(var d=c.next();!d.done;d=c.next())d=d.value,isNaN(d.expiration)||(b=Math.min(b,d.expiration));return b};
function Dc(b,c){for(var d=new Set,e=q(c),f=e.next();!f.done;f=e.next()){var g=q(f.value.drmInfos);for(f=g.next();!f.done;f=g.next())d.add(f.value)}e=q(d);for(f=e.next();!f.done;f=e.next())Cc(f.value,$b(b.f.servers),$b(b.f.advanced||{}));g=b.S?"required":"optional";var h=b.S?["persistent-license"]:["temporary"];e=new Map;d=q(d);for(f=d.next();!f.done;f=d.next())f=f.value,e.set(f.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:g,sessionTypes:h,
label:f.keySystem,drmInfos:[]});d=q(c);for(f=d.next();!f.done;f=d.next()){f=f.value;g=f.audio;h=f.video;var k=g?bc(g.mimeType,g.codecs):"",m=h?bc(h.mimeType,h.codecs):"",n=q(f.drmInfos);for(f=n.next();!f.done;f=n.next()){f=f.value;var p=e.get(f.keySystem);p.drmInfos.push(f);f.distinctiveIdentifierRequired&&(p.distinctiveIdentifier="required");f.persistentStateRequired&&(p.persistentState="required");g&&p.audioCapabilities.push({robustness:f.audioRobustness||"",contentType:k});h&&p.videoCapabilities.push({robustness:f.videoRobustness||
"",contentType:m})}}return e}
function Ec(b,c){if(1==c.size&&c.has(""))return Promise.reject(new D(2,6,6E3));for(var d=q(c.values()),e=d.next();!e.done;e=d.next())e=e.value,0==e.audioCapabilities.length&&delete e.audioCapabilities,0==e.videoCapabilities.length&&delete e.videoCapabilities;var f=d=new E;[!0,!1].forEach(function(b){var d=this;c.forEach(function(c,e){c.drmInfos.some(function(b){return!!b.licenseServerUri})==b&&(f=f["catch"](function(){if(!this.c)return navigator.requestMediaKeySystemAccess(e,[c])}.bind(d)))})}.bind(b));
f=f["catch"](function(){return Promise.reject(new D(2,6,6001))});f=f.then(function(b){if(this.c)return Promise.reject();this.u.clear();var d=b.getConfiguration(),e=d.videoCapabilities||[],f=q(d.audioCapabilities||[]);for(d=f.next();!d.done;d=f.next())this.u.add(d.value.contentType.toLowerCase());e=q(e);for(d=e.next();!d.done;d=e.next())this.u.add(d.value.contentType.toLowerCase());e=b.keySystem;d=c.get(b.keySystem);f=[];var g=[],p=[],r=[];Pc(d.drmInfos,f,g,p,r);1<g.length&&A.j("Multiple unique server certificates found! Only the first will be used.");
1<f.length&&A.j("Multiple unique license server URIs found! Only the first will be used.");this.a={keySystem:e,licenseServerUri:f[0],distinctiveIdentifierRequired:"required"==d.distinctiveIdentifier,persistentStateRequired:"required"==d.persistentState,audioRobustness:(d.audioCapabilities?d.audioCapabilities[0].robustness:"")||"",videoRobustness:(d.videoCapabilities?d.videoCapabilities[0].robustness:"")||"",serverCertificate:g[0],initData:p,keyIds:r};return this.a.licenseServerUri?b.createMediaKeys():
Promise.reject(new D(2,6,6012,this.a.keySystem))}.bind(b)).then(function(b){if(this.c)return Promise.reject();A.info("Created MediaKeys object for key system",this.a.keySystem);this.m=b;this.$=!0}.bind(b))["catch"](function(b){if(!this.c)return this.a=null,this.u.clear(),b instanceof D?Promise.reject(b):Promise.reject(new D(2,6,6002,b.message))}.bind(b));d.reject();return f}
function Ac(b){b=$b(b.f.clearKeys);if(0==b.size)return null;var c=[],d=[];b.forEach(function(b,e){var f=L.wc(e),g=L.wc(b);f={kty:"oct",kid:L.gc(f,!1),k:L.gc(g,!1)};c.push(f);d.push(f.kid)});b=JSON.stringify({keys:c});var e=JSON.stringify({kids:d});e=[{initData:new Uint8Array(rc(e)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(b),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",
serverCertificate:null,initData:e,keyIds:[]}}
function Jc(b,c){try{A.A("Attempting to load an offline session",c);var d=b.m.createSession("persistent-license")}catch(g){var e=new D(2,6,6005,g.message);b.g(e);return Promise.reject(e)}b.i.B(d,"message",b.wd.bind(b));b.i.B(d,"keystatuseschange",b.ud.bind(b));var f={initData:null,loaded:!1,Kc:Infinity,Na:null};b.b.set(d,f);return d.load(c).then(function(b){if(this.c)return Promise.reject();A.H("Loaded offline session",c,b);if(b)return f.loaded=!0,Qc(this)&&this.o.resolve(),d;this.b["delete"](d);
this.g(new D(2,6,6013))}.bind(b),function(b){this.c||(this.b["delete"](d),this.g(new D(2,6,6005,b.message)))}.bind(b))}
function Nc(b,c,d){try{if(b.S){A.A("Creating new persistent session");var e=b.m.createSession("persistent-license")}else A.A("Creating new temporary session"),e=b.m.createSession()}catch(f){b.g(new D(2,6,6005,f.message));return}b.i.B(e,"message",b.wd.bind(b));b.i.B(e,"keystatuseschange",b.ud.bind(b));b.b.set(e,{initData:d,loaded:!1,Kc:Infinity,Na:null});try{d=b.f.initDataTransform(d,b.a)}catch(f){c=f;f instanceof D||(c=new D(2,6,6016,f));b.g(c);return}e.generateRequest(c,d)["catch"](function(c){if(!b.c){b.b["delete"](e);
if(c.errorCode&&c.errorCode.systemCode){var d=c.errorCode.systemCode;0>d&&(d+=Math.pow(2,32));d="0x"+d.toString(16)}b.g(new D(2,6,6006,c.message,c,d))}})}function Rc(b,c){if(Oc(c).startsWith("com.apple.fps")){var d=c.serverCertificate,e=Vb(b);b=Xb(b,e,d)}return b}l.wd=function(b){this.h&&this.f.delayLicenseRequestUntilPlayed&&this.h.paused&&!this.ma?this.L.push(b):Fc(this,b)};
function Fc(b,c){var d=c.target;A.A("Sending license request for session",d.sessionId,"of type",c.messageType);var e=b.b.get(d),f=b.a.licenseServerUri,g=b.f.advanced[b.a.keySystem];"individualization-request"==c.messageType&&g&&g.individualizationServer&&(f=g.individualizationServer);f=Db([f],b.f.retryParameters);f.body=c.message;f.method="POST";f.licenseRequestType=c.messageType;f.sessionId=d.sessionId;"com.microsoft.playready"!=b.a.keySystem&&"com.chromecast.playready"!=b.a.keySystem||Sc(f);b.a.keySystem.startsWith("com.apple.fps")&&
b.f.fairPlayTransform&&Tc(f);var h=Date.now();b.C.Zb.request(2,f).promise.then(function(b){if(this.c)return Promise.reject();this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&Uc(b);this.M+=(Date.now()-h)/1E3;A.A("Updating session",d.sessionId);return d.update(b.data).then(function(){var b=this;this.C.onEvent(new H("drmsessionupdate"));e&&(e.Na&&e.Na.resolve(),(new B(function(){e.loaded=!0;Qc(b)&&b.o.resolve()})).V(Vc))}.bind(this))}.bind(b),function(b){this.c||(b=new D(2,6,6007,
b),this.g(b),e&&e.Na&&e.Na.reject(b))}.bind(b))["catch"](function(b){this.c||(b=new D(2,6,6008,b.message),this.g(b),e&&e.Na&&e.Na.reject(b))}.bind(b))}
function Sc(b){var c=qc(b.body,!0,!0);if(c.includes("PlayReadyKeyMessage")){A.debug("Unwrapping PlayReady request.");c=(new DOMParser).parseFromString(c,"application/xml");for(var d=c.getElementsByTagName("HttpHeader"),e=0;e<d.length;++e)b.headers[d[e].getElementsByTagName("name")[0].textContent]=d[e].getElementsByTagName("value")[0].textContent;b.body=L.Ha(c.getElementsByTagName("Challenge")[0].textContent).buffer}else A.debug("PlayReady request is already unwrapped."),b.headers["Content-Type"]=
"text/xml; charset=utf-8"}function Tc(b){var c=new Uint8Array(b.body);c="spc="+L.gc(c);b.headers["Content-Type"]="application/x-www-form-urlencoded";b.body=rc(c)}function Uc(b){try{var c=oc(b.data)}catch(d){return}c=c.trim();"<ckc>"===c.substr(0,5)&&"</ckc>"===c.substr(-6)&&(c=c.slice(5,-6));try{c=JSON.parse(c).ckc}catch(d){}b.data=L.Ha(c).buffer}
l.ud=function(b){b=b.target;A.H("Key status changed for session",b.sessionId);var c=this.b.get(b),d=!1;b.keyStatuses.forEach(function(b,e){if("string"==typeof e){var f=e;e=b;b=f}if("com.microsoft.playready"==this.a.keySystem&&16==e.byteLength&&(kc("Trident/")||ic())){f=new DataView(e);var g=f.getUint32(0,!0),m=f.getUint16(4,!0),n=f.getUint16(6,!0);f.setUint32(0,g,!1);f.setUint16(4,m,!1);f.setUint16(6,n,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==b&&(b="usable");"status-pending"!=
b&&(c.loaded=!0);"expired"==b&&(d=!0);f=L.hc(new Uint8Array(e));this.na.set(f,b)}.bind(this));var e=b.expiration-Date.now();(0>e||d&&1E3>e)&&c&&!c.Na&&(A.debug("Session has expired",b.sessionId),this.b["delete"](b),b.close()["catch"](function(){}));Qc(this)&&(this.o.resolve(),this.Z.V(Wc))};function uc(b){var c=b.na,d=b.ea;d.clear();c.forEach(function(b,c){return d.set(c,b)});c=Array.from(d.values());c.length&&c.every(function(b){return"expired"==b})&&b.g(new D(2,6,6014));b.C.td(ac(d))}
function Xc(){function b(b){return u(function h(){var c,f,n;return y(h,function(h){switch(h.l){case 1:return h.U=2,v(h,navigator.requestMediaKeySystemAccess(b,d),4);case 4:return c=h.N,n=(f=c.getConfiguration().sessionTypes)?f.includes("persistent-license"):!1,kc("Tizen 3")&&(n=!1),e.set(b,{persistentState:n}),v(h,c.createMediaKeys(),5);case 5:Aa(h,0);break;case 2:Da(h),e.set(b,null),w(h)}})})}var c=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],d=[{videoCapabilities:c,
persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:c}],e=new Map;c="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(c){return b(c)});return Promise.all(c).then(function(){return ac(e)})}
function Yc(b,c){var d=c.audio,e=c.video;if(d&&d.encrypted&&!ic()&&!b.u.has(bc(d.mimeType,d.codecs).toLowerCase())||e&&e.encrypted&&!ic()&&!b.u.has(bc(e.mimeType,e.codecs).toLowerCase()))return!1;var f=Oc(b.a);return 0==c.drmInfos.length||c.drmInfos.some(function(b){return b.keySystem==f})}
function Zc(b,c){if(!b.length)return c;if(!c.length)return b;for(var d=[],e=0;e<b.length;e++)for(var f=0;f<c.length;f++)if(b[e].keySystem==c[f].keySystem){var g=b[e];f=c[f];var h=[];h=h.concat(g.initData||[]);h=h.concat(f.initData||[]);var k=[];k=k.concat(g.keyIds);k=k.concat(f.keyIds);d.push({keySystem:g.keySystem,licenseServerUri:g.licenseServerUri||f.licenseServerUri,distinctiveIdentifierRequired:g.distinctiveIdentifierRequired||f.distinctiveIdentifierRequired,persistentStateRequired:g.persistentStateRequired||
f.persistentStateRequired,videoRobustness:g.videoRobustness||f.videoRobustness,audioRobustness:g.audioRobustness||f.audioRobustness,serverCertificate:g.serverCertificate||f.serverCertificate,initData:h,keyIds:k});break}return d}
function $c(b){return u(function d(){var e;return y(d,function(d){switch(d.l){case 1:return e=new Promise(function(b,d){(new B(d)).V(ad)}),d.U=2,v(d,Promise.race([Promise.all([b.close(),b.closed]),e]),4);case 4:Aa(d,0);break;case 2:Da(d),A.j("Timeout waiting for session close"),w(d)}})})}
function xc(b){return u(function d(){var e;return y(d,function(d){switch(d.l){case 1:return e=Array.from(b.b.keys()),b.b.clear(),v(d,Promise.all(e.map(function(b){return u(function k(){return y(k,function(d){switch(d.l){case 1:return A.A("Closing session",b.sessionId),d.U=2,v(d,$c(b),4);case 4:Aa(d,0);break;case 2:Da(d),w(d)}})})})),0)}})})}function vc(b){b.b.forEach(function(c,d){var e=c.Kc,f=d.expiration;isNaN(f)&&(f=Infinity);f!=e&&(b.C.onExpirationUpdated(d.sessionId,f),c.Kc=f)})}
function Qc(b){b=b.b.values();return Zb(b,function(b){return b.loaded})}function Bc(b,c){var d=[];c.forEach(function(b,c){d.push({keySystem:c,licenseServerUri:b,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var e=q(b),f=e.next();!f.done;f=e.next())f.value.drmInfos=d}
function Pc(b,c,d,e,f){b.forEach(function(b){c.includes(b.licenseServerUri)||c.push(b.licenseServerUri);b.serverCertificate&&(d.some(function(c){return L.Ga(c,b.serverCertificate)})||d.push(b.serverCertificate));b.initData&&b.initData.forEach(function(b){e.some(function(c){return c.keyId&&c.keyId==b.keyId?!0:c.initDataType==b.initDataType&&L.Ga(c.initData,b.initData)})||e.push(b)});if(b.keyIds)for(var g=0;g<b.keyIds.length;++g)f.includes(b.keyIds[g])||f.push(b.keyIds[g])})}
function Cc(b,c,d){if(b.keySystem&&("org.w3.clearkey"!=b.keySystem||!b.licenseServerUri)){c.size&&(c=c.get(b.keySystem)||"",b.licenseServerUri=c);b.keyIds||(b.keyIds=[]);if(d=d.get(b.keySystem))b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=d.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=d.persistentStateRequired),b.videoRobustness||(b.videoRobustness=d.videoRobustness),b.audioRobustness||(b.audioRobustness=d.audioRobustness),b.serverCertificate||
(b.serverCertificate=d.serverCertificate);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==b.keySystem&&(b.keySystem="com.chromecast.playready")}}var ad=1,Vc=5,Wc=.5;function bd(){this.a=new muxjs.mp4.CaptionParser;this.g=[];this.f={}}bd.prototype.init=function(b){var c=muxjs.mp4.probe;b=new Uint8Array(b);this.g=c.videoTrackIds(b);this.f=c.timescale(b);this.a.init()};bd.prototype.b=function(b,c){var d=new Uint8Array(b);(d=this.a.parse(d,this.g,this.f))&&d.captions&&c(d.captions);this.a.clearParsedCaptions()};bd.prototype.c=function(){this.a.resetCaptionStream()};function cd(){}cd.prototype.init=function(){};cd.prototype.b=function(){};cd.prototype.c=function(){};function dd(b){return!b||1==b.length&&1E-6>b.end(0)-b.start(0)?null:b.length?b.end(b.length-1):null}function ed(b,c,d){d=void 0===d?0:d;return!b||!b.length||1==b.length&&1E-6>b.end(0)-b.start(0)||c>b.end(b.length-1)?!1:c+d>=b.start(0)}function fd(b,c){if(!b||!b.length||1==b.length&&1E-6>b.end(0)-b.start(0))return 0;for(var d=0,e=b.length-1;0<=e&&b.end(e)>c;--e)d+=b.end(e)-Math.max(b.start(e),c);return d}
function gd(b){if(!b)return[];for(var c=[],d=0;d<b.length;d++)c.push({start:b.start(d),end:b.end(d)});return c};var hd={Td:function(b,c){return b.reduce(function(b,c,f){return c["catch"](b.bind(null,f))}.bind(null,c),Promise.reject())},dd:function(b,c){return b.concat(c)},$b:function(){},Ia:function(b){return null!=b}};function M(b,c){if(0==c.length)return b;var d=c.map(function(b){return new Wa(b)});return b.map(function(b){return new Wa(b)}).map(function(b){return d.map(b.resolve.bind(b))}).reduce(hd.dd,[]).map(function(b){return b.toString()})}function id(b,c){return{keySystem:b,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:c||[],keyIds:[]}}
var jd={cd:"video",Ld:"audio",xa:"text",uf:"image",sf:"application"},kd=1/15;function ld(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0});this.b=null;this.g=[];this.c=[];this.f=!1;this.a.on("data",this.i.bind(this));this.a.on("done",this.h.bind(this))}ld.prototype.destroy=function(){this.a.dispose();this.a=null;return Promise.resolve()};function md(b,c){return window.muxjs&&"mp2t"==b.toLowerCase().split(";")[0].split("/")[1]?c?MediaSource.isTypeSupported(nd(c,b)):MediaSource.isTypeSupported(nd("audio",b))||MediaSource.isTypeSupported(nd("video",b)):!1}
function nd(b,c){var d=c.replace(/mp2t/i,"mp4");"audio"==b&&(d=d.replace("video","audio"));var e=/avc1\.(66|77|100)\.(\d+)/.exec(d);if(e){var f="avc1.",g=e[1],h=Number(e[2]);f=("66"==g?f+"4200":"77"==g?f+"4d00":f+"6400")+(h>>4).toString(16);f+=(h&15).toString(16);d=d.replace(e[0],f)}return d}function od(b,c){b.f=!0;b.b=new E;b.g=[];b.c=[];var d=new Uint8Array(c);b.a.push(d);b.a.flush();b.f&&b.b.reject(new D(2,3,3018));return b.b}
ld.prototype.i=function(b){this.c=b.captions;var c=new Uint8Array(b.data.byteLength+b.initSegment.byteLength);c.set(b.initSegment,0);c.set(b.data,b.initSegment.byteLength);this.g.push(c)};ld.prototype.h=function(){var b={data:L.concat.apply(null,this.g),captions:this.c};this.b.resolve(b);this.f=!1};function N(b,c,d){this.startTime=b;this.direction=pd;this.endTime=c;this.payload=d;this.region=new qd;this.position=null;this.positionAlign=rd;this.size=0;this.textAlign=sd;this.writingMode=td;this.lineInterpretation=ud;this.line=null;this.lineHeight="";this.lineAlign=vd;this.displayAlign=wd;this.fontSize=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=xd;this.fontStyle=yd;this.fontFamily="";this.textDecoration=[];this.wrapLine=!0;this.id="";this.nestedCues=[];this.spacer=
!1}z("shaka.text.Cue",N);N.prototype.clone=function(){var b=new N(0,0,""),c;for(c in this)b[c]=this[c],b[c]&&b[c].constructor==Array&&(b[c]=b[c].slice());return b};var rd="auto";N.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:rd};var sd="center",zd={LEFT:"left",RIGHT:"right",CENTER:sd,START:"start",END:"end"};N.textAlign=zd;var wd="after",Ad={BEFORE:"before",CENTER:"center",AFTER:wd};N.displayAlign=Ad;var pd="ltr";N.direction={HORIZONTAL_LEFT_TO_RIGHT:pd,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};
var td="horizontal-tb";N.writingMode={HORIZONTAL_TOP_TO_BOTTOM:td,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ud=0;N.lineInterpretation={LINE_NUMBER:ud,PERCENTAGE:1};var vd="start",Bd={CENTER:"center",START:vd,END:"end"};N.lineAlign=Bd;var xd=400;N.fontWeight={NORMAL:xd,BOLD:700};var yd="normal",Cd={NORMAL:yd,ITALIC:"italic",OBLIQUE:"oblique"};N.fontStyle=Cd;N.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};
function qd(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Dd;this.scroll=Ed}z("shaka.text.CueRegion",qd);var Dd=1;qd.units={PX:0,PERCENTAGE:Dd,LINES:2};var Ed="";qd.scrollMode={NONE:Ed,UP:"up"};function Fd(b){this.g=null;this.c=b;this.f=this.o=0;this.h=Infinity;this.b=this.a=null;this.m="";this.i=new Map}var Gd={};z("shaka.text.TextEngine.registerParser",function(b,c){Gd[b]=c});z("shaka.text.TextEngine.unregisterParser",function(b){delete Gd[b]});function Hd(b){return Gd[b]||window.muxjs&&"application/cea-608"==b?!0:!1}Fd.prototype.destroy=function(){this.c=this.g=null;this.i.clear();return Promise.resolve()};
Fd.prototype.Bc=function(b){var c={periodStart:0,segmentStart:null,segmentEnd:0};try{return this.g.parseMedia(new Uint8Array(b),c)[0].startTime}catch(d){throw new D(2,2,2009,d);}};
function Id(b,c,d,e){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==d||null==e)this.g.parseInit(new Uint8Array(c));else{var b={periodStart:this.o,segmentStart:d,segmentEnd:e};b=this.g.parseMedia(new Uint8Array(c),b).filter(function(b){return b.startTime>=this.f&&b.startTime<this.h}.bind(this));this.c.append(b);null==this.a&&(this.a=Math.max(d,this.f));this.b=Math.min(e,this.h)}}.bind(b))}
Fd.prototype.remove=function(b,c){return Promise.resolve().then(function(){!this.c||!this.c.remove(b,c)||null==this.a||c<=this.a||b>=this.b||(b<=this.a&&c>=this.b?this.a=this.b=null:b<=this.a&&c<this.b?this.a=c:b>this.a&&c>=this.b&&(this.b=b))}.bind(this))};function Jd(b,c,d){b.m=c;if(c=b.i.get(c))for(var e=q(c.keys()),f=e.next();!f.done;f=e.next())(f=c.get(f.value).filter(function(b){return b.endTime<=d}))&&b.c.append(f)}
function Kd(b,c,d,e,f){var g=d+" "+e,h=new Map;c=q(c);for(var k=c.next();!k.done;k=c.next()){var m=k.value;k=m.stream;h.has(k)||h.set(k,new Map);h.get(k).has(g)||h.get(k).set(g,[]);m.startTime+=f;m.endTime+=f;m.startTime>=b.f&&m.startTime<b.h&&(m=new N(m.startTime,m.endTime,m.text),h.get(k).get(g).push(m),k==b.m&&b.c.append([m]))}f=q(h.keys());for(g=f.next();!g.done;g=f.next())for(g=g.value,b.i.has(g)||b.i.set(g,new Map),c=q(h.get(g).keys()),k=c.next();!k.done;k=c.next())k=k.value,m=h.get(g).get(k),
b.i.get(g).set(k,m);b.a=null==b.a?Math.max(d,b.f):Math.min(b.a,Math.max(d,b.f));b.b=Math.max(b.b,Math.min(e,b.h))};function Ld(b,c,d){this.f=b;this.g=d;this.b={};this.a=null;this.c={};this.i=new K;this.w=!1;this.m={};this.o=c;b=this.u=new E;c=new MediaSource;this.i.oa(c,"sourceopen",b.resolve);this.f.src=Md(c);this.h=c}var Md=window.URL.createObjectURL;function Nd(b){var c=bc(b.mimeType,b.codecs),d=cc(b);return Hd(c)||MediaSource.isTypeSupported(d)||md(c,b.type)}l=Ld.prototype;
l.destroy=function(){var b=this;this.w=!0;var c=[],d;for(d in this.c){var e=this.c[d],f=e[0];this.c[d]=e.slice(0,1);f&&c.push(f.p["catch"](hd.$b));for(f=1;f<e.length;++f)e[f].p.reject()}this.a&&c.push(this.a.destroy());this.g&&c.push(this.g.destroy());for(var g in this.m)c.push(this.m[g].destroy());return Promise.all(c).then(function(){b.i&&(b.i.release(),b.i=null);b.f&&(b.f.removeAttribute("src"),b.f.load(),b.f=null);b.h=null;b.a=null;b.g=null;b.b={};b.m={};b.o=null;b.c={}})};
l.init=function(b,c){var d=this;return u(function f(){var g;return y(f,function(f){switch(f.l){case 1:return g=jd,v(f,d.u,2);case 2:b.forEach(function(b,f){var h=bc(b.mimeType,b.codecs);f==g.xa?Od(d,h):(!c&&MediaSource.isTypeSupported(h)||!md(h,f)||(d.m[f]=new ld,h=nd(f,h)),h=d.h.addSourceBuffer(h),d.i.B(h,"error",d.gf.bind(d,f)),d.i.B(h,"updateend",d.ub.bind(d,f)),d.b[f]=h,d.c[f]=[])}),w(f)}})})};function Od(b,c){b.a||(b.a=new Fd(b.g));"application/cea-608"!=c&&(b.a.g=new Gd[c])}
function Pd(b){return b.h?"ended"==b.h.readyState:!0}function Qd(b,c){if("text"==c)var d=b.a.a;else d=Rd(b,c),d=!d||1==d.length&&1E-6>d.end(0)-d.start(0)?null:1==d.length&&0>d.start(0)?0:d.length?d.start(0):null;return d}function Sd(b,c){return"text"==c?b.a.b:dd(Rd(b,c))}function Td(b,c,d){if("text"==c)return b=b.a,null==b.b||b.b<d?0:b.b-Math.max(d,b.a);b=Rd(b,c);return fd(b,d)}
l.xc=function(b){b.total=gd(this.f.buffered);b.audio=gd(Rd(this,"audio"));b.video=gd(Rd(this,"video"));b.text=[];if(this.a){var c=this.a.a,d=this.a.b;null!=c&&null!=d&&b.text.push({start:c,end:d})}};function Rd(b,c){try{return b.b[c].buffered}catch(d){return c in b.b&&A.error("failed to get buffered range for "+c,d),null}}
function Ud(b,c,d,e,f,g){if("text"==c)return Id(b.a,d,e,f);if(b.m[c])return od(b.m[c],d).then(function(b){this.a||Od(this,"text/vtt");b.captions&&b.captions.length&&Kd(this.a,b.captions,e,f,this.b.video.timestampOffset);return Vd(this,c,this.Jd.bind(this,c,b.data.buffer))}.bind(b));g&&window.muxjs&&(b.a||Od(b,"text/vtt"),null==e&&null==f?b.o.init(d):b.o.b(d,function(c){c.length&&Kd(b.a,c,e,f,b.b.video.timestampOffset)}));return Vd(b,c,b.Jd.bind(b,c,d))}
function Wd(b,c){var d=Sd(b,"video")||0;Jd(b.a,c,d)}l.remove=function(b,c,d){return"text"==b?this.a.remove(c,d):Vd(this,b,this.Cd.bind(this,b,c,d))};function Xd(b,c){if("text"==c){if(!b.a)return Promise.resolve();b.o.c();return b.a.remove(0,Infinity)}return Vd(b,c,b.Cd.bind(b,c,0,b.h.duration))}l.flush=function(b){return"text"==b?Promise.resolve():Vd(this,b,this.Xd.bind(this,b))};
function Yd(b,c,d,e,f){return"text"==c?(b.a.o=d,b=b.a,b.f=e,b.h=f,Promise.resolve()):Promise.all([Vd(b,c,b.Nd.bind(b,c)),Vd(b,c,b.ff.bind(b,c,d)),Vd(b,c,b.bf.bind(b,c,e,f))])}l.endOfStream=function(b){return Zd(this,function(){Pd(this)||(b?this.h.endOfStream(b):this.h.endOfStream())}.bind(this))};l.$a=function(b){return Zd(this,function(){this.h.duration=b}.bind(this))};l.ba=function(){return this.h.duration};l.Jd=function(b,c){this.b[b].appendBuffer(c)};
l.Cd=function(b,c,d){d<=c?this.ub(b):this.b[b].remove(c,d)};l.Nd=function(b){var c=this.b[b].appendWindowStart,d=this.b[b].appendWindowEnd;this.b[b].abort();this.b[b].appendWindowStart=c;this.b[b].appendWindowEnd=d;this.ub(b)};l.Xd=function(b){this.f.currentTime-=.001;this.ub(b)};l.ff=function(b,c){0>c&&(c+=.001);this.b[b].timestampOffset=c;this.ub(b)};l.bf=function(b,c,d){this.b[b].appendWindowStart=0;this.b[b].appendWindowEnd=d;this.b[b].appendWindowStart=c;this.ub(b)};
l.gf=function(b){this.c[b][0].p.reject(new D(2,3,3014,this.f.error?this.f.error.code:0))};l.ub=function(b){var c=this.c[b][0];c&&(c.p.resolve(),$d(this,b))};function Vd(b,c,d){if(b.w)return Promise.reject();d={start:d,p:new E};b.c[c].push(d);if(1==b.c[c].length)try{d.start()}catch(e){"QuotaExceededError"==e.name?d.p.reject(new D(2,3,3017,c)):d.p.reject(new D(2,3,3015,e)),$d(b,c)}return d.p}
function Zd(b,c){if(b.w)return Promise.reject();var d=[],e;for(e in b.b){var f=new E,g={start:function(b){b.resolve()}.bind(null,f),p:f};b.c[e].push(g);d.push(f);1==b.c[e].length&&g.start()}return Promise.all(d).then(function(){try{c()}catch(m){var b=Promise.reject(new D(2,3,3015,m))}for(var d in this.b)$d(this,d);return b}.bind(b),function(b){throw b;}.bind(b))}function $d(b,c){b.c[c].shift();var d=b.c[c][0];if(d)try{d.start()}catch(e){d.p.reject(new D(2,3,3015,e)),$d(b,c)}};function ae(b,c){b=O(b);c=O(c);return b.split("-")[0]==c.split("-")[0]}function be(b,c){b=O(b);c=O(c);var d=b.split("-"),e=c.split("-");return d[0]==e[0]&&1==d.length&&2==e.length}function O(b){b=b.split("-");b=q(b);var c=b.next().value;c=void 0===c?"":c;var d=b.next().value;d=void 0===d?"":d;b=na(b);c=c.toLowerCase();c=ce.get(c)||c;d=d.toUpperCase();return[d?c+"-"+d:c].concat(b instanceof Array?b:na(q(b))).join("-")}
function de(b){return b.language?O(b.language):b.audio&&b.audio.language?O(b.audio.language):b.video&&b.video.language?O(b.video.language):"und"}
function ee(b,c){for(var d=O(b),e=new Set,f=q(c),g=f.next();!g.done;g=f.next())e.add(O(g.value));f=q(e);for(g=f.next();!g.done;g=f.next())if(g=g.value,g==d)return g;f=q(e);for(g=f.next();!g.done;g=f.next())if(g=g.value,be(g,d))return g;f=q(e);for(g=f.next();!g.done;g=f.next()){var h=g=g.value,k=d;h=O(h);k=O(k);h=h.split("-");k=k.split("-");if(2==h.length&&2==k.length&&h[0]==k[0])return g}e=q(e);for(g=e.next();!g.done;g=e.next())if(f=g.value,be(d,f))return f;return null}
var ce=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze",
"cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice",
"is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao",
"mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san",
"sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie",
"vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function fe(b,c){var d=b.periods.reduce(function(b,c){return b.concat(c.variants)},[]);d=ge(d,c);var e=new ub;d=q(d);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=he(f);e.push(g,f)}e=ie(e);var h=je(e);e=q(b.periods);for(d=e.next();!d.done;d=e.next())d=d.value,d.variants=d.variants.filter(function(b){if(he(b)==h)return!0;A.debug("Dropping Variant (better codec available)",b);return!1})}
function he(b){var c="";b.video&&(c=ec(b.video.codecs)[0]);var d="";b.audio&&(d=ec(b.audio.codecs)[0]);return c+"-"+d}function je(b){var c="",d=Infinity;b.forEach(function(b,f){for(var e=0,h=0,k=q(f),m=k.next();!m.done;m=k.next())e+=m.value.bandwidth||0,++h;e/=h;A.debug("codecs",b,"avg bandwidth",e);e<d&&(c=b,d=e)});return c}
function ie(b){var c=new Map;b.forEach(function(b,d){for(var e=q(d),f=e.next();!f.done;f=e.next())f=f.value,f.video&&(f=f.video.height,c.has(f)||c.set(f,new Set),c.get(f).add(b))});var d=b.size(),e=new ub;b.forEach(function(b,g){for(var f=q(g),k=f.next();!k.done;k=f.next())k=k.value,k.video&&c.has(k.video.height)&&c.get(k.video.height).size!==d||e.push(b,k)});return e}
function ke(b,c,d){function e(b,c,d){return b>=c&&b<=d}var f=b.video;return f&&f.width&&f.height&&(!e(f.width,c.minWidth,Math.min(c.maxWidth,d.width))||!e(f.height,c.minHeight,Math.min(c.maxHeight,d.height))||!e(f.width*f.height,c.minPixels,c.maxPixels))||b&&b.video&&b.video.frameRate&&!e(b.video.frameRate,c.minFrameRate,c.maxFrameRate)||!e(b.bandwidth,c.minBandwidth,c.maxBandwidth)?!1:!0}
function le(b,c,d){var e=!1;b.forEach(function(b){var f=b.allowedByApplication;b.allowedByApplication=ke(b,c,d);f!=b.allowedByApplication&&(e=!0)});return e}
function me(b,c,d,e){e.variants=e.variants.filter(function(e){if(b&&b.$&&!Yc(b,e))return A.debug("Dropping variant - not compatible with key system",e),!1;var f=e.audio;e=e.video;return f&&!Nd(f)?(A.debug("Dropping variant - audio not compatible with platform",ne(f)),!1):e&&!Nd(e)?(A.debug("Dropping variant - video not compatible with platform",ne(e)),!1):f&&c&&!oe(f,c)?(A.debug("Droping variant - not compatible with active audio","active audio",ne(c),"variant.audio",ne(f)),!1):e&&d&&!oe(e,d)?(A.debug("Droping variant - not compatible with active video",
"active video",ne(d),"variant.video",ne(e)),!1):!0});e.textStreams=e.textStreams.filter(function(b){var c=Hd(bc(b.mimeType,b.codecs));c||A.debug("Dropping text stream. Is not supported by the platform.",b);return c})}function oe(b,c){return b.mimeType!=c.mimeType||b.codecs.split(".")[0]!=c.codecs.split(".")[0]?!1:!0}
function pe(b){var c=b.audio,d=b.video,e=c?c.codecs:null,f=d?d.codecs:null,g=[];f&&g.push(f);e&&g.push(e);var h=[];d&&h.push(d.mimeType);c&&h.push(c.mimeType);h=h[0]||null;var k=[];c&&k.push(c.kind);d&&k.push(d.kind);k=k[0]||null;var m=new Set;c&&c.roles.forEach(function(b){return m.add(b)});d&&d.roles.forEach(function(b){return m.add(b)});b={id:b.id,active:!1,type:"variant",bandwidth:b.bandwidth,language:b.language,label:null,kind:k,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:h,
codecs:g.join(", "),audioCodec:e,videoCodec:f,primary:b.primary,roles:Array.from(m),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null};d&&(b.videoId=d.id,b.originalVideoId=d.originalId,b.width=d.width||null,b.height=d.height||null,b.frameRate=d.frameRate||null,b.pixelAspectRatio=d.pixelAspectRatio||null,b.videoBandwidth=d.bandwidth||null);c&&(b.audioId=c.id,b.originalAudioId=
c.originalId,b.channelsCount=c.channelsCount,b.audioSamplingRate=c.audioSamplingRate,b.audioBandwidth=c.bandwidth||null,b.label=c.label,b.audioRoles=c.roles);return b}
function qe(b){return{id:b.id,active:!1,type:"text",bandwidth:0,language:b.language,label:b.label,kind:b.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:b.mimeType,codecs:b.codecs||null,audioCodec:null,videoCodec:null,primary:b.primary,roles:b.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:b.originalId}}
function re(b){b.__shaka_id||(b.__shaka_id=se++);return b.__shaka_id}var se=0;function te(b){var c=ue(b);c.active=b.enabled;c.type="variant";c.originalAudioId=b.id;"main"==b.kind&&(c.primary=!0);b.kind&&(c.roles=[b.kind],c.audioRoles=[b.kind]);return c}
function ue(b){return{id:re(b),active:!1,type:"",bandwidth:0,language:O(b.language),label:b.label,kind:b.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}
function ve(b){return b.allowedByApplication&&b.allowedByKeySystem}function ge(b,c){var d=b.filter(function(b){return b.audio&&b.audio.channelsCount}),e=new Map;d=q(d);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=f.audio.channelsCount;e.has(g)||e.set(g,[]);e.get(g).push(f)}d=Array.from(e.keys());if(0==d.length)return b;f=d.filter(function(b){return b<=c});return f.length?e.get(Math.max.apply(null,f)):e.get(Math.min.apply(null,d))}
function we(b,c,d){var e=b,f=b.filter(function(b){return b.primary});f.length&&(e=f);var g=e.length?e[0].language:"";e=e.filter(function(b){return b.language==g});if(c){var h=ee(O(c),b.map(function(b){return b.language}));h&&(e=b.filter(function(b){return O(b.language)==h}))}if(d){b=xe(e,d);if(b.length)return b;A.j("No exact match for the text role could be found.")}else if(b=e.filter(function(b){return 0==b.roles.length}),b.length)return b;b=e.map(function(b){return b.roles}).reduce(hd.dd,[]);return b.length?
xe(e,b[0]):e}function xe(b,c){return b.filter(function(b){return b.roles.includes(c)})}function ye(b,c,d){for(var e=0;e<d.length;e++)if(d[e].audio==b&&d[e].video==c)return d[e];return null}function ze(b){var c=[];b.audio&&c.push(b.audio);b.video&&c.push(b.video);return c}
function ne(b){return"audio"==b.type?"type=audio codecs="+b.codecs+" bandwidth="+b.bandwidth+" channelsCount="+b.channelsCount+" audioSamplingRate="+b.audioSamplingRate:"video"==b.type?"type=video codecs="+b.codecs+" bandwidth="+b.bandwidth+" frameRate="+b.frameRate+" width="+b.width+" height="+b.height:"unexpected stream type"};function P(){this.h=null;this.c=!1;this.b=new Ta;this.g=[];this.i=!1;this.a=this.f=null}z("shaka.abr.SimpleAbrManager",P);P.prototype.stop=function(){this.h=null;this.c=!1;this.g=[];this.f=null};P.prototype.stop=P.prototype.stop;P.prototype.init=function(b){this.h=b};P.prototype.init=P.prototype.init;
P.prototype.chooseVariant=function(){var b=Ae(this.a.restrictions,this.g),c=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!b.length&&(A.j("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),b=Ae(null,this.g),b=[b[0]]);for(var d=b[0]||null,e=0;e<b.length;++e){var f=b[e],g=f.bandwidth/this.a.bandwidthDowngradeTarget,h=(b[e+1]||{bandwidth:Infinity}).bandwidth/this.a.bandwidthUpgradeTarget;A.H("Bandwidth ranges:",(f.bandwidth/1E6).toFixed(3),
(g/1E6).toFixed(3),(h/1E6).toFixed(3));c>=g&&c<=h&&(d=f)}this.f=Date.now();return d};P.prototype.chooseVariant=P.prototype.chooseVariant;P.prototype.enable=function(){this.c=!0};P.prototype.enable=P.prototype.enable;P.prototype.disable=function(){this.c=!1};P.prototype.disable=P.prototype.disable;
P.prototype.segmentDownloaded=function(b,c){A.H("Segment downloaded:","deltaTimeMs="+b,"numBytes="+c,"lastTimeChosenMs="+this.f,"enabled="+this.c);var d=this.b;if(!(16E3>c)){var e=8E3*c/b,f=b/1E3;d.a+=c;Ra(d.b,f,e);Ra(d.c,f,e)}if(null!=this.f&&this.c)a:{A.H("Suggesting Streams...");if(!this.i){if(!(128E3<=this.b.a)){A.H("Still waiting for a good estimate...");break a}this.i=!0}else if(Date.now()-this.f<1E3*this.a.switchInterval){A.H("Still within switch interval...");break a}d=this.chooseVariant();
e=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);A.debug("Calling switch_(), bandwidth="+Math.round(e/1E3)+" kbps");this.h(d)}};P.prototype.segmentDownloaded=P.prototype.segmentDownloaded;P.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)};P.prototype.getBandwidthEstimate=P.prototype.getBandwidthEstimate;P.prototype.setVariants=function(b){this.g=b};P.prototype.setVariants=P.prototype.setVariants;
P.prototype.configure=function(b){this.a=b};P.prototype.configure=P.prototype.configure;function Ae(b,c){b&&(c=c.filter(function(c){return ke(c,b,{width:Infinity,height:Infinity})}));return c.sort(function(b,c){return b.bandwidth-c.bandwidth})};function Q(b,c){this.D=b;this.b=c==Be;this.a=0}z("shaka.util.DataViewReader",Q);var Be=1;Q.Endianness={tf:0,vf:Be};Q.prototype.ua=function(){return this.a<this.D.byteLength};Q.prototype.hasMoreData=Q.prototype.ua;Q.prototype.ca=function(){return this.a};Q.prototype.getPosition=Q.prototype.ca;Q.prototype.de=function(){return this.D.byteLength};Q.prototype.getLength=Q.prototype.de;Q.prototype.Nc=function(){try{var b=this.D.getUint8(this.a);this.a+=1;return b}catch(c){Ce()}};Q.prototype.readUint8=Q.prototype.Nc;
Q.prototype.Ad=function(){try{var b=this.D.getUint16(this.a,this.b);this.a+=2;return b}catch(c){Ce()}};Q.prototype.readUint16=Q.prototype.Ad;Q.prototype.G=function(){try{var b=this.D.getUint32(this.a,this.b);this.a+=4;return b}catch(c){Ce()}};Q.prototype.readUint32=Q.prototype.G;Q.prototype.zd=function(){try{var b=this.D.getInt32(this.a,this.b);this.a+=4;return b}catch(c){Ce()}};Q.prototype.readInt32=Q.prototype.zd;
Q.prototype.Gb=function(){try{if(this.b){var b=this.D.getUint32(this.a,!0);var c=this.D.getUint32(this.a+4,!0)}else c=this.D.getUint32(this.a,!1),b=this.D.getUint32(this.a+4,!1)}catch(d){Ce()}if(2097151<c)throw new D(2,3,3001);this.a+=8;return c*Math.pow(2,32)+b};Q.prototype.readUint64=Q.prototype.Gb;Q.prototype.Za=function(b){this.a+b>this.D.byteLength&&Ce();var c=new Uint8Array(this.D.buffer,this.D.byteOffset+this.a,b);this.a+=b;return c};Q.prototype.readBytes=Q.prototype.Za;
Q.prototype.R=function(b){this.a+b>this.D.byteLength&&Ce();this.a+=b};Q.prototype.skip=Q.prototype.R;Q.prototype.Ye=function(b){this.a<b&&Ce();this.a-=b};Q.prototype.rewind=Q.prototype.Ye;Q.prototype.seek=function(b){(0>b||b>this.D.byteLength)&&Ce();this.a=b};Q.prototype.seek=Q.prototype.seek;Q.prototype.Mc=function(){for(var b=this.a;this.ua()&&0!=this.D.getUint8(this.a);)this.a+=1;b=new Uint8Array(this.D.buffer,this.D.byteOffset+b,this.a-b);this.a+=1;return oc(b)};
Q.prototype.readTerminatedString=Q.prototype.Mc;function Ce(){throw new D(2,3,3E3);};function S(){this.c=[];this.b=[];this.a=!1}z("shaka.util.Mp4Parser",S);S.prototype.J=function(b,c){var d=De(b);this.c[d]=0;this.b[d]=c;return this};S.prototype.box=S.prototype.J;S.prototype.sa=function(b,c){var d=De(b);this.c[d]=1;this.b[d]=c;return this};S.prototype.fullBox=S.prototype.sa;S.prototype.stop=function(){this.a=!0};S.prototype.stop=S.prototype.stop;
S.prototype.parse=function(b,c,d){b=new Uint8Array(b);b=new Q(new DataView(b.buffer,b.byteOffset,b.byteLength),0);for(this.a=!1;b.ua()&&!this.a;)this.dc(0,b,c,d)};S.prototype.parse=S.prototype.parse;
S.prototype.dc=function(b,c,d,e){var f=c.ca(),g=c.G(),h=c.G();A.H("Parsing MP4 box",Ee(h));switch(g){case 0:g=c.D.byteLength-f;break;case 1:g=c.Gb()}var k=this.b[h];if(k){var m=null,n=null;1==this.c[h]&&(n=c.G(),m=n>>>24,n&=16777215);h=f+g;d&&h>c.D.byteLength&&(h=c.D.byteLength);e&&h>c.D.byteLength?this.a=!0:(e=h-c.ca(),c=0<e?c.Za(e):new Uint8Array(0),c=new Q(new DataView(c.buffer,c.byteOffset,c.byteLength),0),k({parser:this,partialOkay:d||!1,version:m,flags:n,reader:c,size:g,start:f+b}))}else c.R(Math.min(f+
g-c.ca(),c.D.byteLength-c.ca()))};S.prototype.parseNext=S.prototype.dc;function Fe(b){for(var c=null!=b.flags?12:8;b.reader.ua()&&!b.parser.a;)b.parser.dc(b.start+c,b.reader,b.partialOkay)}S.children=Fe;function Ge(b){for(var c=null!=b.flags?12:8,d=b.reader.G();0<d&&!b.parser.a;--d)b.parser.dc(b.start+c,b.reader,b.partialOkay)}S.sampleDescription=Ge;function He(b){return function(c){b(c.reader.Za(c.reader.D.byteLength-c.reader.ca()))}}S.allData=He;
function De(b){for(var c=0,d=0;d<b.length;d++)c=c<<8|b.charCodeAt(d);return c}function Ee(b){return String.fromCharCode(b>>24&255,b>>16&255,b>>8&255,b&255)}S.typeToString=Ee;function Ie(b){var c=this;this.b=[];this.a=[];this.data=[];(new S).J("moov",Fe).sa("pssh",function(b){if(1<b.version)A.j("Unrecognized PSSH version found!");else{var d=b.reader.D;d=new Uint8Array(d.buffer,d.byteOffset-12,b.size);c.data.push(d);c.b.push(L.hc(b.reader.Za(16)));if(0<b.version){d=b.reader.G();for(var f=0;f<d;++f){var g=L.hc(b.reader.Za(16));c.a.push(g)}}}}).parse(b);0==this.data.length&&A.j("No pssh box found!")}
function Je(b){if(!b)return b;var c=new Ie(b);if(1>=c.data.length)return b;b=[];var d={};c=q(c.data);for(var e=c.next();!e.done;d={Wb:d.Wb},e=c.next())d.Wb=e.value,b.some(function(b){return function(c){return L.Ga(c,b.Wb)}}(d))||b.push(d.Wb);return L.concat.apply(L,b instanceof Array?b:na(q(b)))};var T={Sb:function(b,c){var d=T.P(b,c);return 1!=d.length?null:d[0]},vc:function(b,c,d){b=T.hd(b,c,d);return 1!=b.length?null:b[0]},P:function(b,c){return Array.prototype.filter.call(b.childNodes,function(b){return b instanceof Element&&b.tagName==c})},hd:function(b,c,d){return Array.prototype.filter.call(b.childNodes,function(b){return b instanceof Element&&b.localName==d&&b.namespaceURI==c})},getAttributeNS:function(b,c,d){return b.hasAttributeNS(c,d)?b.getAttributeNS(c,d):null},Tb:function(b){return Array.prototype.every.call(b.childNodes,
function(b){return b.nodeType==Node.TEXT_NODE||b.nodeType==Node.CDATA_SECTION_NODE})?b.textContent.trim():null},F:function(b,c,d,e){e=void 0===e?null:e;var f=null;b=b.getAttribute(c);null!=b&&(f=d(b));return null==f?e:f},Me:function(b){if(!b)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(b)&&(b+="Z");b=Date.parse(b);return isNaN(b)?null:Math.floor(b/1E3)},Aa:function(b){if(!b)return null;var c=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(b);
if(!c)return A.j("Invalid duration string:",b),null;b=31536E3*Number(c[1]||null)+2592E3*Number(c[2]||null)+86400*Number(c[3]||null)+3600*Number(c[4]||null)+60*Number(c[5]||null)+Number(c[6]||null);return isFinite(b)?b:null},fc:function(b){var c=/([0-9]+)-([0-9]+)/.exec(b);if(!c)return null;b=Number(c[1]);if(!isFinite(b))return null;c=Number(c[2]);return isFinite(c)?{start:b,end:c}:null},parseInt:function(b){b=Number(b);return 0===b%1?b:null},ec:function(b){b=Number(b);return 0===b%1&&0<b?b:null},
vb:function(b){b=Number(b);return 0===b%1&&0<=b?b:null},parseFloat:function(b){b=Number(b);return isNaN(b)?null:b},Vd:function(b){var c;b=(c=b.match(/^(\d+)\/(\d+)$/))?Number(c[1])/Number(c[2]):Number(b);return isNaN(b)?null:b},yd:function(b,c){var d=new DOMParser;try{var e=d.parseFromString(b,"text/xml")}catch(g){}if(e&&e.documentElement.tagName==c)var f=e.documentElement;return f&&0<f.getElementsByTagName("parsererror").length?null:f},xd:function(b,c){try{var d=oc(b);return T.yd(d,c)}catch(e){}}};var Ke=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");
function Le(b,c,d){var e=Me(b),f=null;b=[];var g=[],h=new Set(e.map(function(b){return b.keyId}));h["delete"](null);if(1<h.size)throw new D(2,4,4010);d||(g=e.filter(function(b){return"urn:mpeg:dash:mp4protection:2011"==b.Dd?(f=b.init||f,!1):!0}),g.length&&(b=Ne(f,c,g),0==b.length&&(b=[id("",f)])));if(e.length&&(d||!g.length))for(b=[],c=q(Ke.values()),d=c.next();!d.done;d=c.next())d=d.value,"org.w3.clearkey"!=d&&b.push(id(d,f));if(h=Array.from(h)[0]||null)for(c=q(b),d=c.next();!d.done;d=c.next())for(d=
q(d.value.initData),e=d.next();!e.done;e=d.next())e.value.keyId=h;return{ed:h,xf:f,drmInfos:b,jd:!0}}function Oe(b,c,d,e){var f=Le(b,c,e);if(d.jd){b=1==d.drmInfos.length&&!d.drmInfos[0].keySystem;c=0==f.drmInfos.length;if(0==d.drmInfos.length||b&&!c)d.drmInfos=f.drmInfos;d.jd=!1}else if(0<f.drmInfos.length&&(d.drmInfos=d.drmInfos.filter(function(b){return f.drmInfos.some(function(c){return c.keySystem==b.keySystem})}),0==d.drmInfos.length))throw new D(2,4,4008);return f.ed||d.ed}
function Pe(b){var c=0,d=(new DataView(b)).getUint32(c,!0);c+=4;if(d!==b.byteLength)return A.j("PlayReady Object with invalid length encountered."),[];c+=2;d=[];for(var e=new DataView(b);c<b.byteLength-1;){var f=e.getUint16(c,!0);c+=2;var g=e.getUint16(c,!0);c+=2;var h=new Uint8Array(b,c,g);d.push({type:f,value:h});c+=g}return d}
function Qe(b){b=q(b.getElementsByTagName("DATA"));for(var c=b.next();!c.done;c=b.next()){c=q(c.value.childNodes);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d instanceof Element&&"LA_URL"==d.tagName)return d.textContent}return""}
function Ne(b,c,d){var e=[];d=q(d);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=Ke.get(f.Dd);if(g){var h;if(h=T.vc(f.node,"urn:microsoft:playready","pro")){h=L.Ha(h.textContent);var k=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),m=h.length,n=k.length+16+m,p=new ArrayBuffer(n),r=new Uint8Array(p);p=new DataView(p);var t=0;p.setUint32(t,n);t+=4;p.setUint32(t,1886614376);t+=4;p.setUint32(t,0);t+=4;r.set(k,t);t+=k.length;p.setUint32(t,m);t+=4;r.set(h,t);h=[{initData:r,
initDataType:"cenc",keyId:f.keyId}]}else h=null;h=id(g,f.init||b||h);if(g=Re.get(g))h.licenseServerUri=g(f);e.push(h)}else for(f=c(f.node)||[],f=q(f),g=f.next();!g.done;g=f.next())e.push(g.value)}return e}
var Re=(new Map).set("com.widevine.alpha",function(b){return(b=T.vc(b.node,"urn:microsoft","laurl"))?b.getAttribute("licenseUrl")||"":""}).set("com.microsoft.playready",function(b){b=T.vc(b.node,"urn:microsoft:playready","pro");if(!b)return"";b=L.Ha(b.textContent);b=Pe(b.buffer).filter(function(b){return 1===b.type})[0];if(!b)return"";b=qc(b.value,!0);return(b=T.yd(b,"WRMHEADER"))?Qe(b):""});function Me(b){var c=[];b=q(b);for(var d=b.next();!d.done;d=b.next())(d=Se(d.value))&&c.push(d);return c}
function Se(b){var c=b.getAttribute("schemeIdUri"),d=T.getAttributeNS(b,"urn:mpeg:cenc:2013","default_KID"),e=T.hd(b,"urn:mpeg:cenc:2013","pssh").map(T.Tb);if(!c)return A.error("Missing required schemeIdUri attribute on","ContentProtection element",b),null;c=c.toLowerCase();if(d&&(d=d.replace(/-/g,"").toLowerCase(),d.includes(" ")))throw new D(2,4,4009);var f=[];try{f=e.map(function(b){return{initDataType:"cenc",initData:L.Ha(b),keyId:null}})}catch(g){throw new D(2,4,4007);}return{node:b,Dd:c,keyId:d,
init:0<f.length?f:null}};function Te(b,c,d,e,f){var g={RepresentationID:c,Number:d,Bandwidth:e,Time:f};return b.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(c,d,e,f){if("$$"==c)return"$";var h=g[d];if(null==h)return A.j("URL template does not have an available substitution for identifier",'"'+d+'":',b),c;"RepresentationID"==d&&e&&(A.j("URL template should not contain a width specifier for identifier",'"RepresentationID":',b),e=void 0);"Time"==d&&(h=Math.round(h));switch(f){case void 0:case "d":case "i":case "u":c=
h.toString();break;case "o":c=h.toString(8);break;case "x":c=h.toString(16);break;case "X":c=h.toString(16).toUpperCase();break;default:c=h.toString()}e=window.parseInt(e,10)||1;return Array(Math.max(0,e-c.length)+1).join("0")+c})}
function Ue(b,c){var d=Ve(b,c,"timescale"),e=1;d&&(e=T.ec(d)||1);d=Ve(b,c,"duration");(d=T.ec(d||""))&&(d/=e);var f=Ve(b,c,"startNumber"),g=Number(Ve(b,c,"presentationTimeOffset"))||0,h=T.vb(f||"");if(null==f||null==h)h=1;var k=We(b,c,"SegmentTimeline");f=null;if(k){f=e;var m=b.T.duration||Infinity;k=T.P(k,"S");for(var n=[],p=-g,r=0;r<k.length;++r){var t=k[r],x=T.F(t,"t",T.vb),F=T.F(t,"d",T.vb),C=T.F(t,"r",T.parseInt);null!=x&&(x-=g);if(!F){A.j('"S" element must have a duration:','ignoring the remaining "S" elements.',
t);break}x=null!=x?x:p;C=C||0;if(0>C)if(r+1<k.length){C=T.F(k[r+1],"t",T.vb);if(null==C){A.j('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',t);break}else if(x>=C){A.j('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',t);break}C=Math.ceil((C-x)/F)-1}else{if(Infinity==m){A.j('The last "S" element cannot have a negative repeat',
"if the Period has an infinite duration:",'ignoring the last "S" element.',t);break}else if(x/f>=m){A.j('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',t);break}C=Math.ceil((m*f-x)/F)-1}0<n.length&&x!=p&&(Math.abs((x-p)/f)>=kd&&A.j("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",t),n[n.length-1].end=x/f);for(t=0;t<=C;++t)p=x+F,n.push({start:x/f,end:p/f,pf:x}),x=p}f=n}return{timescale:e,
Y:d,ab:h,ia:g/e||0,bd:g,K:f}}function Ve(b,c,d){return[c(b.v),c(b.W),c(b.ha)].filter(hd.Ia).map(function(b){return b.getAttribute(d)}).reduce(function(b,c){return b||c})}function We(b,c,d){return[c(b.v),c(b.W),c(b.ha)].filter(hd.Ia).map(function(b){return T.Sb(b,d)}).reduce(function(b,c){return b||c})}
function Xe(b,c,d,e,f,g){for(var h=T.getAttributeNS(b,"http://www.w3.org/1999/xlink","href"),k=T.getAttributeNS(b,"http://www.w3.org/1999/xlink","actuate")||"onRequest",m=0;m<b.attributes.length;m++){var n=b.attributes[m];"http://www.w3.org/1999/xlink"==n.namespaceURI&&(b.removeAttributeNS(n.namespaceURI,n.localName),--m)}if(5<=g)return mb(new D(2,4,4028));if("onLoad"!=k)return mb(new D(2,4,4027));var p=M([e],[h]);return f.request(0,Db(p,c)).aa(function(e){e=T.xd(e.data,b.tagName);if(!e)return mb(new D(2,
4,4001,h));for(;b.childNodes.length;)b.removeChild(b.childNodes[0]);for(;e.childNodes.length;){var k=e.childNodes[0];e.removeChild(k);b.appendChild(k)}for(k=0;k<e.attributes.length;k++){var m=e.attributes[k].nodeName,n=e.getAttribute(m);b.setAttribute(m,n)}return Ye(b,c,d,p[0],f,g+1)})}
function Ye(b,c,d,e,f,g){g=void 0===g?0:g;if(T.getAttributeNS(b,"http://www.w3.org/1999/xlink","href")){var h=Xe(b,c,d,e,f,g);d&&(h=h.aa(void 0,function(){return Ye(b,c,d,e,f,g)}));return h}h=[];for(var k=0;k<b.childNodes.length;k++){var m=b.childNodes[k];m instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==T.getAttributeNS(m,"http://www.w3.org/1999/xlink","href")?(b.removeChild(m),--k):"SegmentTimeline"!=m.tagName&&h.push(Ye(m,c,d,e,f,g)))}return sb(h).aa(function(){return b})};function Ze(b,c,d){this.c=b;this.b=c;this.a=d}z("shaka.media.InitSegmentReference",Ze);Ze.prototype.qc=function(){return this.c()};Ze.prototype.createUris=Ze.prototype.qc;Ze.prototype.Ac=function(){return this.b};Ze.prototype.getStartByte=Ze.prototype.Ac;Ze.prototype.yc=function(){return this.a};Ze.prototype.getEndByte=Ze.prototype.yc;function U(b,c,d,e,f,g){this.position=b;this.startTime=c;this.endTime=d;this.c=e;this.b=f;this.a=g}z("shaka.media.SegmentReference",U);U.prototype.ca=function(){return this.position};
U.prototype.getPosition=U.prototype.ca;U.prototype.Bc=function(){return this.startTime};U.prototype.getStartTime=U.prototype.Bc;U.prototype.be=function(){return this.endTime};U.prototype.getEndTime=U.prototype.be;U.prototype.qc=function(){return this.c()};U.prototype.createUris=U.prototype.qc;U.prototype.Ac=function(){return this.b};U.prototype.getStartByte=U.prototype.Ac;U.prototype.yc=function(){return this.a};U.prototype.getEndByte=U.prototype.yc;function $e(b,c,d,e){var f,g=(new S).sa("sidx",function(b){f=af(c,e,d,b)});b&&g.parse(b);if(f)return f;A.error('Invalid box type, expected "sidx".');throw new D(2,3,3004);}
function af(b,c,d,e){var f=[];e.reader.R(4);var g=e.reader.G();if(0==g)throw A.error("Invalid timescale."),new D(2,3,3005);if(0==e.version){var h=e.reader.G();var k=e.reader.G()}else h=e.reader.Gb(),k=e.reader.Gb();e.reader.R(2);var m=e.reader.Ad();b=b+e.size+k;for(k=0;k<m;k++){var n=e.reader.G(),p=(n&2147483648)>>>31;n&=2147483647;var r=e.reader.G();e.reader.R(4);if(1==p)throw A.error("Heirarchical SIDXs are not supported."),new D(2,3,3006);f.push(new U(f.length,h/g-c,(h+r)/g-c,function(){return d},
b,b+n-1));h+=r;b+=n}e.parser.stop();return f};function V(b){this.a=b}z("shaka.media.SegmentIndex",V);V.prototype.destroy=function(){this.a=null;return Promise.resolve()};V.prototype.destroy=V.prototype.destroy;V.prototype.find=function(b){for(var c=this.a.length-1;0<=c;--c){var d=this.a[c];if(b>=d.startTime&&b<d.endTime)return d.position}return this.a.length&&b<this.a[0].startTime?this.a[0].position:null};V.prototype.find=V.prototype.find;
V.prototype.get=function(b){if(0==this.a.length)return null;b-=this.a[0].position;return 0>b||b>=this.a.length?null:this.a[b]};V.prototype.get=V.prototype.get;V.prototype.offset=function(b){for(var c=0;c<this.a.length;++c)this.a[c].startTime+=b,this.a[c].endTime+=b};V.prototype.offset=V.prototype.offset;
V.prototype.Gc=function(b){for(var c=[],d=0,e=0;d<this.a.length&&e<b.length;){var f=this.a[d],g=b[e];f.startTime<g.startTime?(c.push(f),d++):(f.startTime>g.startTime?0==d?c.push(g):A.j("Refusing to rewrite original references on update!"):(.1<Math.abs(f.endTime-g.endTime)?c.push(new U(f.position,g.startTime,g.endTime,g.c,g.b,g.a)):c.push(f),d++),e++)}for(;d<this.a.length;)c.push(this.a[d++]);if(c.length)for(d=c[c.length-1].position+1;e<b.length;)f=b[e++],f=new U(d++,f.startTime,f.endTime,f.c,f.b,
f.a),c.push(f);else c=b;this.a=c};V.prototype.merge=V.prototype.Gc;V.prototype.tc=function(b){for(var c=0;c<this.a.length;++c)if(this.a[c].endTime>b){this.a.splice(0,c);return}this.a=[]};V.prototype.evict=V.prototype.tc;function bf(b,c){for(;b.a.length;)if(b.a[b.a.length-1].startTime>=c)b.a.pop();else break;for(;b.a.length;)if(0>=b.a[0].endTime)b.a.shift();else break;if(0!=b.a.length){var d=b.a[b.a.length-1];b.a[b.a.length-1]=new U(d.position,d.startTime,c,d.c,d.b,d.a)}};function cf(b){this.b=b;this.a=new Q(b,0);df||(df=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}var df;cf.prototype.ua=function(){return this.a.ua()};
function ef(b){var c=ff(b);if(7<c.length)throw new D(2,3,3002);for(var d=0,e=0;e<c.length;e++)d=256*d+c[e];c=d;d=ff(b);a:{e=L.Ga;for(var f=0;f<df.length;f++)if(e(d,df[f])){e=!0;break a}e=!1}if(e)d=b.b.byteLength-b.a.ca();else{if(8==d.length&&d[1]&224)throw new D(2,3,3001);e=d[0]&(1<<8-d.length)-1;for(f=1;f<d.length;f++)e=256*e+d[f];d=e}d=b.a.ca()+d<=b.b.byteLength?d:b.b.byteLength-b.a.ca();e=new DataView(b.b.buffer,b.b.byteOffset+b.a.ca(),d);b.a.R(d);return new gf(c,e)}
function ff(b){var c=b.a.Nc(),d;for(d=1;8>=d&&!(c&1<<8-d);d++);if(8<d)throw new D(2,3,3002);var e=new Uint8Array(d);e[0]=c;for(c=1;c<d;c++)e[c]=b.a.Nc();return e}function gf(b,c){this.id=b;this.a=c}function hf(b){if(8<b.a.byteLength)throw new D(2,3,3002);if(8==b.a.byteLength&&b.a.getUint8(0)&224)throw new D(2,3,3001);for(var c=0,d=0;d<b.a.byteLength;d++){var e=b.a.getUint8(d);c=256*c+e}return c};function jf(){}
jf.prototype.parse=function(b,c,d,e){var f;c=new cf(new DataView(c));if(440786851!=ef(c).id)throw A.error("Not an EBML element."),new D(2,3,3008);var g=ef(c);if(408125543!=g.id)throw A.error("Not a Segment element."),new D(2,3,3009);c=g.a.byteOffset;g=new cf(g.a);for(f=null;g.ua();){var h=ef(g);if(357149030==h.id){f=h;break}}if(!f)throw A.error("Not an Info element."),new D(2,3,3010);g=new cf(f.a);f=1E6;for(h=null;g.ua();){var k=ef(g);if(2807729==k.id)f=hf(k);else if(17545==k.id)if(h=k,4==h.a.byteLength)h=
h.a.getFloat32(0);else if(8==h.a.byteLength)h=h.a.getFloat64(0);else throw new D(2,3,3003);}if(null==h)throw new D(2,3,3011);g=f/1E9;f=h*g;b=ef(new cf(new DataView(b)));if(475249515!=b.id)throw A.error("Not a Cues element."),new D(2,3,3007);return kf(b,c,g,f,d,e)};
function kf(b,c,d,e,f,g){function h(){return f}var k=[];b=new cf(b.a);for(var m=null,n=null;b.ua();){var p=ef(b);if(187==p.id){var r=lf(p);r&&(p=d*r.qf,r=c+r.Te,null!=m&&k.push(new U(k.length,m-g,p-g,h,n,r-1)),m=p,n=r)}}null!=m&&k.push(new U(k.length,m-g,e-g,h,n,null));return k}
function lf(b){var c=new cf(b.a);b=ef(c);if(179!=b.id)throw A.j("Not a CueTime element."),new D(2,3,3013);b=hf(b);c=ef(c);if(183!=c.id)throw A.j("Not a CueTrackPositions element."),new D(2,3,3012);c=new cf(c.a);for(var d=0;c.ua();){var e=ef(c);if(241==e.id){d=hf(e);break}}return{qf:b,Te:d}};function mf(b,c){var d=We(b,c,"Initialization");if(!d)return null;var e=M(b.O.Fa,b.v.O),f=d.getAttribute("sourceURL");f&&(e=M(e,[f]));f=0;var g=null;if(d=T.F(d,"range",T.fc))f=d.start,g=d.end;return new Ze(function(){return e},f,g)}
function nf(b,c){var d=Number(Ve(b,of,"presentationTimeOffset"))||0,e=Ve(b,of,"timescale"),f=1;e&&(f=T.ec(e)||1);d=d/f||0;e=mf(b,of);var g=b.v.contentType;f=b.v.mimeType.split("/")[1];if("text"!=g&&"mp4"!=f&&"webm"!=f)throw A.error("SegmentBase specifies an unsupported container type.",b.v),new D(2,4,4006);if("webm"==f&&!e)throw A.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",b.v),new D(2,
4,4005);g=We(b,of,"RepresentationIndex");var h=Ve(b,of,"indexRange"),k=M(b.O.Fa,b.v.O);h=T.fc(h||"");if(g){var m=g.getAttribute("sourceURL");m&&(k=M(k,[m]));h=T.F(g,"range",T.fc,h)}if(!h)throw A.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",b.v),new D(2,4,4002);f=pf(b,c,e,k,h.start,h.end,f,d);return{createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,
initSegmentReference:e,ia:d}}function pf(b,c,d,e,f,g,h,k){var m=b.presentationTimeline,n=!b.nb||!b.T.Dc,p=b.T.start,r=b.T.duration,t=c,x=null;return{createSegmentIndex:function(){var b=[t(e,f,g),"webm"==h?t(d.c(),d.b,d.a):null];t=null;return Promise.all(b).then(function(b){var c=b[0];b=b[1]||null;c="mp4"==h?$e(c,f,e,k):(new jf).parse(c,b,e,k);m.ac(c,p);x=new V(c);n&&bf(x,r)})},findSegmentPosition:function(b){return x.find(b)},getSegmentReference:function(b){return x.get(b)}}}
function of(b){return b.Ib};function qf(b,c){var d=mf(b,rf);var e=sf(b);var f=Ue(b,rf),g=f.ab;0==g&&(A.j("SegmentList@startNumber must be > 0"),g=1);var h=0;f.Y?h=f.Y*(g-1):f.K&&0<f.K.length&&(h=f.K[0].start);e={Y:f.Y,startTime:h,ab:g,ia:f.ia,K:f.K,Wa:e};if(!e.Y&&!e.K&&1<e.Wa.length)throw A.j("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",b.v),new D(2,4,4002);if(!e.Y&&!b.T.duration&&!e.K&&1==e.Wa.length)throw A.j("SegmentList does not contain sufficient segment information:",
"the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",b.v),new D(2,4,4002);if(e.K&&0==e.K.length)throw A.j("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",b.v),new D(2,4,4002);g=f=null;b.ha.id&&b.v.id&&(g=b.ha.id+","+b.v.id,f=c[g]);h=tf(b.T.duration,e.ab,b.v.O,e);f?(f.Gc(h),f.tc(b.presentationTimeline.Vb()-b.T.start)):(b.presentationTimeline.ac(h,b.T.start),f=new V(h),g&&b.nb&&(c[g]=
f));b.nb&&b.T.Dc||bf(f,b.T.duration);return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),initSegmentReference:d,ia:e.ia}}function rf(b){return b.La}
function tf(b,c,d,e){var f=e.Wa.length;e.K&&e.K.length!=e.Wa.length&&(f=Math.min(e.K.length,e.Wa.length),A.j("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",e.Wa.length,"to",f));for(var g=[],h=e.startTime,k=0;k<f;k++){var m=e.Wa[k],n=M(d,[m.we]),p=void 0;p=null!=e.Y?h+e.Y:e.K?e.K[k].end:h+b;g.push(new U(k+c,h,p,function(b){return b}.bind(null,n),m.start,m.end));h=p}return g}
function sf(b){return[b.v.La,b.W.La,b.ha.La].filter(hd.Ia).map(function(b){return T.P(b,"SegmentURL")}).reduce(function(b,d){return 0<b.length?b:d}).map(function(c){c.getAttribute("indexRange")&&!b.nd&&(b.nd=!0,A.j("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var d=c.getAttribute("media");c=T.F(c,"mediaRange",T.fc,{start:0,end:null});return{we:d,start:c.start,end:c.end}})};function uf(b,c,d,e){var f=vf(b);var g=Ue(b,wf);var h=Ve(b,wf,"media"),k=Ve(b,wf,"index");g={Y:g.Y,timescale:g.timescale,ab:g.ab,ia:g.ia,bd:g.bd,K:g.K,Fc:h,Eb:k};h=g.Eb?1:0;h+=g.K?1:0;h+=g.Y?1:0;if(0==h)throw A.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",b.v),new D(2,4,4002);1!=h&&(A.j("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,",
"a SegmentTimeline or a segment duration.",b.v),g.Eb?(A.info("Using the index URL template by default."),g.K=null):A.info("Using the SegmentTimeline by default."),g.Y=null);if(!g.Eb&&!g.Fc)throw A.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",b.v),new D(2,4,4002);if(g.Eb){d=b.v.mimeType.split("/")[1];if("mp4"!=d&&"webm"!=d)throw A.error("SegmentTemplate specifies an unsupported container type.",b.v),new D(2,4,4006);
if("webm"==d&&!f)throw A.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",b.v),new D(2,4,4005);e=Te(g.Eb,b.v.id,null,b.bandwidth||null,null);h=M(b.O.Fa,b.v.O);e=M(h,[e]);b=pf(b,c,f,e,0,null,d,g.ia)}else g.Y?(e||(b.presentationTimeline.Hc(g.Y),b.presentationTimeline.Ic(b.T.start)),b=xf(b,g)):(e=c=null,b.ha.id&&b.v.id&&(e=b.ha.id+","+b.v.id,c=d[e]),h=yf(b,g),k=!b.nb||!b.T.Dc,c?
(k&&bf(new V(h),b.T.duration),c.Gc(h),c.tc(b.presentationTimeline.Vb()-b.T.start)):(b.presentationTimeline.ac(h,b.T.start),c=new V(h),e&&b.nb&&(d[e]=c)),k&&bf(c,b.T.duration),b={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:c.find.bind(c),getSegmentReference:c.get.bind(c)});return{createSegmentIndex:b.createSegmentIndex,findSegmentPosition:b.findSegmentPosition,getSegmentReference:b.getSegmentReference,initSegmentReference:f,ia:g.ia}}function wf(b){return b.Jb}
function xf(b,c){var d=b.T.duration,e=c.Y,f=c.ab,g=c.timescale,h=c.Fc,k=b.bandwidth||null,m=b.v.id,n=b.v;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(b){return 0>b||d&&b>=d?null:Math.floor(b/e)},getSegmentReference:function(c){var p=c*e,t=p+e;d&&(t=Math.min(t,d));return 0>t||d&&p>=d?null:new U(c,p,t,function(){var d=M(b.O.Fa,n.O),e=Te(h,m,c+f,k,p*g);return M(d,[e])},0,null)}}}
function yf(b,c){for(var d=[],e=0;e<c.K.length;e++){var f=e+c.ab;d.push(new U(f,c.K[e].start,c.K[e].end,function(b,c,d,e,f,p,r){e=M(e.Fa,f);b=Te(b,c,p,d,r);return M(e,[b]).map(function(b){return b.toString()})}.bind(null,c.Fc,b.v.id,b.bandwidth||null,b.O,b.v.O,f,c.K[e].pf+c.bd),0,null))}return d}function vf(b){var c=Ve(b,wf,"initialization");if(!c)return null;var d=b.v.id,e=b.bandwidth||null,f=b.v;return new Ze(function(){var g=Te(c,d,null,e,null),h=M(b.O.Fa,f.O);return M(h,[g])},0,null)};var W={wb:{},Fb:{},Bd:function(b,c){W.Fb[b]=c}};z("shaka.media.ManifestParser.registerParserByExtension",W.Bd);W.Pc=function(b,c){W.wb[b]=c};z("shaka.media.ManifestParser.registerParserByMime",W.Pc);
W.Qe=function(){var b={};if(fc()){for(var c in W.wb)b[c]=!0;for(var d in W.Fb)b[d]=!0}c={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};d=q(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var e=d.next();!e.done;e=d.next())e=e.value,b[e]=fc()?!!W.wb[e]:gc(e);for(var f in c)b[f]=fc()?!!W.Fb[f]:gc(c[f]);return b};
W.create=function(b,c,d,e){return u(function g(){var h,k;return y(g,function(g){switch(g.l){case 1:return g.U=2,v(g,W.ce(b,c,d,e),4);case 4:return h=g.N,g["return"](new h);case 2:throw k=Da(g),k.severity=2,k;}})})};
W.ce=function(b,c,d,e){return u(function g(){var h,k,m,n,p;return y(g,function(g){switch(g.l){case 1:h=W;if(e){if(k=h.wb[e.toLowerCase()])return g["return"](k);A.j("Could not determine manifest type using MIME type ",e)}if(m=h.getExtension(b)){if(n=h.Fb[m])return g["return"](n);A.j("Could not determine manifest type for extension ",m)}else A.j("Could not find extension for ",b);if(e){g.l=2;break}return v(g,h.ke(b,c,d),3);case 3:if(e=g.N){if(p=W.wb[e])return g["return"](p);A.j("Could not determine manifest type using MIME type",
e)}case 2:throw new D(2,4,4E3,b);}})})};W.ke=function(b,c,d){return u(function f(){var g,h,k;return y(f,function(f){switch(f.l){case 1:return g=Db([b],d),g.method="HEAD",v(f,c.request(0,g).promise,2);case 2:return h=f.N,k=h.headers["content-type"],f["return"](k?k.toLowerCase().split(";").shift():"")}})})};W.getExtension=function(b){b=(new Wa(b)).pa.split("/").pop().split(".");return 1==b.length?"":b.pop().toLowerCase()};
W.isSupported=function(b,c){return fc()?c in W.wb||W.getExtension(b)in W.Fb?!0:!1:!1};function X(b,c,d){this.f=b;this.o=c;this.h=this.g=Infinity;this.a=1;this.b=this.c=null;this.m=0;this.u=!0;this.i=0;this.w=void 0===d?!0:d}z("shaka.media.PresentationTimeline",X);X.prototype.ba=function(){return this.g};X.prototype.getDuration=X.prototype.ba;X.prototype.ie=function(){return this.a};X.prototype.getMaxSegmentDuration=X.prototype.ie;X.prototype.$a=function(b){this.g=b};X.prototype.setDuration=X.prototype.$a;X.prototype.pe=function(){return this.f};
X.prototype.getPresentationStartTime=X.prototype.pe;X.prototype.Fd=function(b){this.m=b};X.prototype.setClockOffset=X.prototype.Fd;X.prototype.Hd=function(b){this.u=b};X.prototype.setStatic=X.prototype.Hd;X.prototype.Gd=function(b){this.h=b};X.prototype.setSegmentAvailabilityDuration=X.prototype.Gd;X.prototype.cf=function(b){this.o=b};X.prototype.setDelay=X.prototype.cf;X.prototype.ae=function(){return this.o};X.prototype.getDelay=X.prototype.ae;
X.prototype.ac=function(b,c){if(0!=b.length){var d=b[b.length-1].endTime+c;this.Ic(b[0].startTime+c);this.a=b.reduce(function(b,c){return Math.max(b,c.endTime-c.startTime)},this.a);this.b=Math.max(this.b,d);null!=this.f&&this.w&&(this.f=(Date.now()+this.m)/1E3-this.b-this.a);A.A("notifySegments:","maxSegmentDuration="+this.a)}};X.prototype.notifySegments=X.prototype.ac;X.prototype.Ic=function(b){this.c=null==this.c?b:Math.min(this.c,b)};X.prototype.notifyMinSegmentStartTime=X.prototype.Ic;
X.prototype.Hc=function(b){this.a=Math.max(this.a,b);A.A("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)};X.prototype.notifyMaxSegmentDuration=X.prototype.Hc;X.prototype.offset=function(b){null!=this.c&&(this.c+=b);null!=this.b&&(this.b+=b)};X.prototype.offset=X.prototype.offset;X.prototype.da=function(){return Infinity==this.g&&!this.u};X.prototype.isLive=X.prototype.da;X.prototype.sb=function(){return Infinity!=this.g&&!this.u};X.prototype.isInProgress=X.prototype.sb;
X.prototype.Vb=function(){return Infinity==this.h?this.i:Math.max(this.i,this.pb()-this.h)};X.prototype.getSegmentAvailabilityStart=X.prototype.Vb;X.prototype.Id=function(b){this.i=b};X.prototype.setUserSeekStart=X.prototype.Id;X.prototype.pb=function(){return this.da()||this.sb()?Math.min(Math.max(0,(Date.now()+this.m)/1E3-this.a-this.f),this.g):this.g};X.prototype.getSegmentAvailabilityEnd=X.prototype.pb;
X.prototype.Cb=function(b){var c=Math.max(this.c,this.i);return Infinity==this.h?c:Math.max(c,Math.min(this.pb()-this.h+b,this.za()))};X.prototype.getSafeSeekRangeStart=X.prototype.Cb;X.prototype.ob=function(){return this.Cb(0)};X.prototype.getSeekRangeStart=X.prototype.ob;X.prototype.za=function(){return Math.max(0,this.pb()-(this.da()||this.sb()?this.o:0))};X.prototype.getSeekRangeEnd=X.prototype.za;X.prototype.Kd=function(){return null==this.f||null!=this.b&&this.w?!1:!0};
X.prototype.usingPresentationStartTime=X.prototype.Kd;function zf(b,c,d,e,f,g,h){b=Db(b,e,f,g,h);if(0!=c||null!=d)b.headers.Range=d?"bytes="+c+"-"+d:"bytes="+c+"-";return b};function Af(){var b=this;this.b=this.a=null;this.f=[];this.c=null;this.m=[];this.h=1;this.o={};this.u=0;this.w=new Qa(5);this.i=new B(function(){Bf(b)});this.g=new zb}z("shaka.dash.DashParser",Af);l=Af.prototype;l.configure=function(b){this.a=b};l.start=function(b,c){var d=this;return u(function f(){var g;return y(f,function(f){switch(f.l){case 1:return d.f=[b],d.b=c,v(f,Cf(d),2);case 2:g=f.N;d.b&&Df(d,g);if(!d.b)throw new D(2,7,7001);return f["return"](d.c)}})})};
l.stop=function(){this.a=this.b=null;this.f=[];this.c=null;this.m=[];this.o={};null!=this.i&&(this.i.stop(),this.i=null);return this.g.destroy()};l.update=function(){Cf(this)["catch"](function(b){if(this.b)this.b.onError(b)}.bind(this))};l.onExpirationUpdated=function(){};
function Cf(b){var c=Date.now(),d=b.b.networkingEngine.request(0,Db(b.f,b.a.retryParameters));Ab(b.g,d);return d.promise.then(function(c){if(b.b)return c.uri&&!b.f.includes(c.uri)&&b.f.unshift(c.uri),Ef(b,c.data,c.uri)}).then(function(){var d=(Date.now()-c)/1E3;Ra(b.w,1,d);return d})}function Ff(b){this.Fa=b}
function Ef(b,c,d){c=T.xd(c,"MPD");if(!c)throw new D(2,4,4001,d);c=Ye(c,b.a.retryParameters,b.a.dash.xlinkFailGracefully,d,b.b.networkingEngine);Ab(b.g,c);return c.promise.then(function(c){return Gf(b,c,d)})}
function Gf(b,c,d){return u(function f(){var g,h,k,m,n,p,r,t,x,F,C,I,R,Z,ya,ra,ja,sa,ba,Qb,Rb,ka,lg,Kc,mg,Ej,Lc,ng;return y(f,function(f){switch(f.l){case 1:m=hd;n=T;p=[d];r=n.P(c,"Location").map(n.Tb).filter(m.Ia);0<r.length&&(t=M(p,r),p=b.f=t);x=n.P(c,"BaseURL").map(n.Tb);F=M(p,x);C=b.a.dash.ignoreMinBufferTime;I=0;C||(I=n.F(c,"minBufferTime",n.Aa));b.u=n.F(c,"minimumUpdatePeriod",n.Aa,-1);R=n.F(c,"availabilityStartTime",n.Me);Z=n.F(c,"timeShiftBufferDepth",n.Aa);ya=n.F(c,"maxSegmentDuration",n.Aa);
ra=c.getAttribute("type")||"static";ja=b.a.dash.ignoreSuggestedPresentationDelay;sa=null;ja||(sa=n.F(c,"suggestedPresentationDelay",n.Aa));b.c?ba=b.c.presentationTimeline:(Qb=Math.max(b.a.dash.defaultPresentationDelay,1.5*I),Rb=null!=sa?sa:Qb,ba=new X(R,Rb,b.a.dash.autoCorrectDrift));b.c&&b.c.O?(ka=b.c.O,ka.Fa=F):ka=new Ff(F);lg={nb:"static"!=ra,presentationTimeline:ba,ha:null,T:null,W:null,v:null,bandwidth:0,nd:!1,O:ka};for(var og=lg,Fj=[""],Sb=T.F(c,"mediaPresentationDuration",T.Aa),Tb=[],Pa=0,
nb=T.P(c,"Period"),Ba=0;Ba<nb.length;Ba++){var Ua=nb[Ba];Pa=T.F(Ua,"start",T.Aa,Pa);var ob=T.F(Ua,"duration",T.Aa),Ca=null;if(Ba!=nb.length-1){var Mc=T.F(nb[Ba+1],"start",T.Aa);null!=Mc&&(Ca=Mc-Pa)}else null!=Sb&&(Ca=Sb-Pa);Mc=kd;Ca&&ob&&Math.abs(Ca-ob)>Mc&&A.j("There is a gap/overlap between Periods",Ua);null==Ca&&(Ca=ob);Ua=Hf(b,og,Fj,{start:Pa,duration:Ca,node:Ua,Dc:null==Ca||Ba==nb.length-1});Tb.push(Ua);ob=og.ha.id;b.m.includes(ob)||(b.m.push(ob),b.c&&(b.b.filterNewPeriod(Ua),b.c.periods.push(Ua)));
if(null==Ca){Ba!=nb.length-1&&A.j("Skipping Period",Ba+1,"and any subsequent Periods:","Period",Ba+1,"does not have a valid start time.",Tb[Ba+1]);Pa=null;break}Pa+=Ca}null==b.c&&b.b.filterAllPeriods(Tb);null!=Sb?(Pa!=Sb&&A.j("@mediaPresentationDuration does not match the total duration of all","Periods."),g=Tb,h=Sb,k=!1):(g=Tb,h=Pa,k=!0);Kc=h;mg=g;ba.Hd("static"==ra);"static"!=ra&&k||ba.$a(Kc||Infinity);(Ej=ba.da())&&!isNaN(b.a.availabilityWindowOverride)&&(Z=b.a.availabilityWindowOverride);null==
Z&&(Z=Infinity);ba.Gd(Z);ba.Hc(ya||1);if(b.c){f.l=0;break}b.c={O:ka,presentationTimeline:ba,periods:mg,offlineSessionIds:[],minBufferTime:I||0};if(!ba.Kd()){f.l=0;break}Lc=n.P(c,"UTCTiming");return v(f,If(b,F,Lc),4);case 4:ng=f.N;if(!b.b)return f["return"]();ba.Fd(ng);w(f)}})})}
function Hf(b,c,d,e){c.ha=Jf(e.node,null,d);c.T=e;c.ha.id||(A.info("No Period ID given for Period with start time "+e.start+",  Assigning a default"),c.ha.id="__shaka_period_"+e.start);T.P(e.node,"EventStream").forEach(b.Ne.bind(b,e.start,e.duration));d=T.P(e.node,"AdaptationSet").map(b.Le.bind(b,c)).filter(hd.Ia);if(c.nb){c=[];for(var f=q(d),g=f.next();!g.done;g=f.next()){g=q(g.value.Ue);for(var h=g.next();!h.done;h=g.next())c.push(h.value)}if(c.length!=(new Set(c)).size)throw new D(2,4,4018);}var k=
d.filter(function(b){return!b.ad});d.filter(function(b){return b.ad}).forEach(function(b){var c=b.streams[0],d=b.ad;k.forEach(function(b){b.id==d&&b.streams.forEach(function(b){b.trickModeVideo=c})})});c=Kf(k,"video");f=Kf(k,"audio");if(!c.length&&!f.length)throw new D(2,4,4004);d=b.a.disableAudio;if(!f.length||d)f=[null];d=b.a.disableVideo;if(!c.length||d)c=[null];d=[];for(g=0;g<f.length;g++)for(h=0;h<c.length;h++)Lf(b,f[g],c[h],d);c=[];if(!b.a.disableText)for(b=Kf(k,"text"),f=0;f<b.length;f++)c.push.apply(c,
b[f].streams);return{startTime:e.start,textStreams:c,variants:d}}function Kf(b,c){return b.filter(function(b){return b.contentType==c})}
function Lf(b,c,d,e){if(c||d)if(c&&d){var f=c.drmInfos;var g=d.drmInfos;if(f.length&&g.length?0<Zc(f,g).length:1){g=Zc(c.drmInfos,d.drmInfos);for(var h=0;h<c.streams.length;h++)for(var k=0;k<d.streams.length;k++)f=(d.streams[k].bandwidth||0)+(c.streams[h].bandwidth||0),f={id:b.h++,language:c.language,primary:c.Ec||d.Ec,audio:c.streams[h],video:d.streams[k],bandwidth:f,drmInfos:g,allowedByApplication:!0,allowedByKeySystem:!0},e.push(f)}}else for(g=c||d,h=0;h<g.streams.length;h++)f=g.streams[h].bandwidth||
0,f={id:b.h++,language:g.language||"und",primary:g.Ec,audio:c?g.streams[h]:null,video:d?g.streams[h]:null,bandwidth:f,drmInfos:g.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},e.push(f)}
l.Le=function(b,c){b.W=Jf(c,b.ha,null);if("image"==b.W.contentType)return A.j("Skipping Image AdaptationSet",b.W),null;var d=!1,e=T.P(c,"Role"),f=e.map(function(b){return b.getAttribute("value")}).filter(hd.Ia),g=void 0,h="text"==b.W.contentType;h&&(g="subtitle");for(var k=0;k<e.length;k++){var m=e[k].getAttribute("schemeIdUri");if(null==m||"urn:mpeg:dash:role:2011"==m)switch(m=e[k].getAttribute("value"),m){case "main":d=!0;break;case "caption":case "subtitle":g=m}}var n=null,p=!1;T.P(c,"EssentialProperty").forEach(function(b){"http://dashif.org/guidelines/trickmode"==
b.getAttribute("schemeIdUri")?n=b.getAttribute("value"):p=!0});k=T.P(c,"Accessibility");var r=new Map;e={};k=q(k);for(m=k.next();!m.done;e={Bb:e.Bb},m=k.next()){var t=m.value;m=t.getAttribute("schemeIdUri");t=t.getAttribute("value");"urn:scte:dash:cc:cea-608:2015"==m||"urn:scte:dash:cc:cea-708:2015"==m?(e.Bb=1,null!=t?t.split(";").forEach(function(b){return function(c){if(c.includes("=")){c=c.split("=");var d=c[0].startsWith("CC")?c[0]:"CC"+c[0];c=c[1].split(",")[0].split(":").pop()}else d="CC"+b.Bb,
b.Bb+=2;r.set(d,O(c))}}(e)):r.set("CC1","und")):"urn:mpeg:dash:role:2011"==m&&null!=t&&(f.push(t),"captions"==t&&(g="caption"))}if(p)return null;e=T.P(c,"ContentProtection");var x=Le(e,this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);e=O(c.getAttribute("lang")||"und");k=c.getAttribute("label");(m=T.P(c,"Label"))&&m.length&&(m=m[0],m.textContent&&(k=m.textContent));m=T.P(c,"Representation");f=m.map(this.Oe.bind(this,b,x,g,e,k,d,f,r)).filter(function(b){return!!b});if(0==f.length){if(this.a.dash.ignoreEmptyAdaptationSet||
h)return null;throw new D(2,4,4003);}b.W.contentType&&"application"!=b.W.contentType||(b.W.contentType=Mf(f[0].mimeType,f[0].codecs),f.forEach(function(c){c.type=b.W.contentType}));f.forEach(function(b){x.drmInfos.forEach(function(c){b.keyId&&c.keyIds.push(b.keyId)})});h=m.map(function(b){return b.getAttribute("id")}).filter(hd.Ia);return{id:b.W.id||"__fake__"+this.h++,contentType:b.W.contentType,language:e,Ec:d,streams:f,drmInfos:x.drmInfos,ad:n,Ue:h}};
l.Oe=function(b,c,d,e,f,g,h,k,m){b.v=Jf(m,b.W,null);if(!Nf(b.v))return A.j("Skipping Representation",b.v),null;b.bandwidth=T.F(m,"bandwidth",T.ec)||0;var n=b.v.contentType;n="text"==n||"application"==n;try{var p=this.Ve.bind(this);if(b.v.Ib)var r=nf(b,p);else if(b.v.La)r=qf(b,this.o);else if(b.v.Jb)r=uf(b,p,this.o,!!this.c);else{var t=M(b.O.Fa,b.v.O),x=b.T.duration||0;r={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(b){return 0<=b&&b<x?1:null},getSegmentReference:function(b){return 1!=
b?null:new U(1,0,x,function(){return t},0,null)},initSegmentReference:null,ia:0}}}catch(F){if(n&&4002==F.code)return null;throw F;}m=T.P(m,"ContentProtection");m=Oe(m,this.a.dash.customScheme,c,this.a.dash.ignoreDrmInfo);return{id:this.h++,originalId:b.v.id,createSegmentIndex:r.createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:r.initSegmentReference,presentationTimeOffset:r.ia,mimeType:b.v.mimeType,codecs:b.v.codecs,frameRate:b.v.frameRate,
pixelAspectRatio:b.v.pixelAspectRatio,bandwidth:b.bandwidth,width:b.v.width,height:b.v.height,kind:d,encrypted:0<c.drmInfos.length,keyId:m,language:e,label:f,type:b.W.contentType,primary:g,trickModeVideo:null,emsgSchemeIdUris:b.v.emsgSchemeIdUris,roles:h,channelsCount:b.v.Jc,audioSamplingRate:b.v.audioSamplingRate,closedCaptions:k}};
function Bf(b){u(function d(){var e,f;return y(d,function(d){switch(d.l){case 1:return A.info("Updating manifest..."),e=0,d.U=2,v(d,Cf(b),4);case 4:e=d.N;Aa(d,3);break;case 2:f=Da(d),b.b&&(f.severity=1,b.b.onError(f));case 3:if(!b.b)return d["return"]();Df(b,e);w(d)}})})}function Df(b,c){0>b.u||b.i.V(Math.max(3,b.u-c,Sa(b.w)))}
function Jf(b,c,d){c=c||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Jc:null,audioSamplingRate:null};d=d||c.O;var e=T.vb,f=T.Vd,g=T.P(b,"BaseURL").map(T.Tb),h=b.getAttribute("contentType")||c.contentType,k=b.getAttribute("mimeType")||c.mimeType,m=b.getAttribute("codecs")||c.codecs;f=T.F(b,"frameRate",f)||c.frameRate;var n=b.getAttribute("sar")||c.pixelAspectRatio,p=T.P(b,"InbandEventStream"),r=c.emsgSchemeIdUris.slice();p=q(p);for(var t=p.next();!t.done;t=p.next())t=
t.value.getAttribute("schemeIdUri"),r.includes(t)||r.push(t);p=T.P(b,"AudioChannelConfiguration");p=Of(p)||c.Jc;t=T.F(b,"audioSamplingRate",e)||c.audioSamplingRate;h||(h=Mf(k,m));return{O:M(d,g),Ib:T.Sb(b,"SegmentBase")||c.Ib,La:T.Sb(b,"SegmentList")||c.La,Jb:T.Sb(b,"SegmentTemplate")||c.Jb,width:T.F(b,"width",e)||c.width,height:T.F(b,"height",e)||c.height,contentType:h,mimeType:k,codecs:m,frameRate:f,pixelAspectRatio:n,emsgSchemeIdUris:r,id:b.getAttribute("id"),Jc:p,audioSamplingRate:t}}
function Of(b){for(var c=0;c<b.length;++c){var d=b[c],e=d.getAttribute("schemeIdUri");if(e&&(d=d.getAttribute("value")))switch(e){case "urn:mpeg:dash:outputChannelPositionList:2012":return d.trim().split(/ +/).length;case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":var f=parseInt(d,10);if(!f){A.j("Channel parsing failure! Ignoring scheme and value",e,d);continue}return f;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":f=
parseInt(d,16);if(!f){A.j("Channel parsing failure! Ignoring scheme and value",e,d);continue}for(b=0;f;)f&1&&++b,f>>=1;return b;default:A.j("Unrecognized audio channel scheme:",e,d)}}return null}
function Nf(b){var c=b.Ib?1:0;c+=b.La?1:0;c+=b.Jb?1:0;if(0==c){if("text"==b.contentType||"application"==b.contentType)return!0;A.j("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',b);return!1}1!=c&&(A.j("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",
b),b.Ib?(A.info("Using SegmentBase by default."),b.La=null):A.info("Using SegmentList by default."),b.Jb=null);return!0}
function Pf(b,c,d,e){c=M(c,[d]);c=Db(c,b.a.retryParameters);c.method=e;c=b.b.networkingEngine.request(4,c);Ab(b.g,c);return c.promise.then(function(b){if("HEAD"==e){if(!b.headers||!b.headers.date)return A.j("UTC timing response is missing","expected date header"),0;b=b.headers.date}else b=oc(b.data);b=Date.parse(b);return isNaN(b)?(A.j("Unable to parse date from UTC timing response"),0):b-Date.now()})}
function If(b,c,d){d=d.map(function(b){return{scheme:b.getAttribute("schemeIdUri"),value:b.getAttribute("value")}});var e=b.a.dash.clockSyncUri;!d.length&&e&&d.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e});return hd.Td(d,function(b){var d=b.scheme;b=b.value;switch(d){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return Pf(this,c,b,"HEAD");case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return Pf(this,
c,b,"GET");case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return d=Date.parse(b),isNaN(d)?0:d-Date.now();case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":return A.qa("NTP UTCTiming scheme is not supported"),Promise.reject();default:return A.qa("Unrecognized scheme in UTCTiming element",d),Promise.reject()}}.bind(b))["catch"](function(){A.qa("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!");
return 0})}l.Ne=function(b,c,d){var e=T.vb,f=d.getAttribute("schemeIdUri")||"",g=d.getAttribute("value")||"",h=T.F(d,"timescale",e)||1;T.P(d,"Event").forEach(function(d){var k=T.F(d,"presentationTime",e)||0,n=T.F(d,"duration",e)||0;k=k/h+b;n=k+n/h;null!=c&&(k=Math.min(k,b+c),n=Math.min(n,b+c));d={schemeIdUri:f,value:g,startTime:k,endTime:n,id:d.getAttribute("id")||"",eventElement:d};this.b.onTimelineRegionAdded(d)}.bind(this))};
l.Ve=function(b,c,d){b=zf(b,c,d,this.a.retryParameters);b=this.b.networkingEngine.request(1,b);Ab(this.g,b);return b.promise.then(function(b){return b.data})};function Mf(b,c){return Hd(bc(b,c))?"text":b.split("/")[0]}W.Bd("mpd",Af);W.Pc("application/dash+xml",Af);W.Pc("video/vnd.mpeg.dash.mpd",Af);function Qf(b,c){this.a=b;this.b=c}Qf.prototype.toString=function(){return"v"+this.a+"."+this.b};function Rf(b,c){var d=new Qf(2,6),e=Sf,f=e.a,g=d.b-f.b;(0<(d.a-f.a||g)?e.c:e.b)(e.a,d,b,c)}function Tf(b,c,d,e){A.qa([d,"has been deprecated and will be removed in",c,". We are currently at version",b,". Additional information:",e].join(" "))}function Uf(b,c,d,e){A.Ob([d,"has been deprecated and has been removed in",c,". We are now at version",b,". Additional information:",e].join(""))}var Sf=null;function Vf(){this.a=new Map}function Wf(b,c,d){Xf(b,c).text=d}function Xf(b,c){b.a.has(c)||b.a.set(c,new Yf);return b.a.get(c)}function Yf(){this.text=this.variant=null};function Zf(b,c){this.a=b;this.b=new Set([b]);c=c||[];for(var d=q(c),e=d.next();!e.done;e=d.next())this.add(e.value)}Zf.prototype.add=function(b){if($f(this.a,b))return this.b.add(b),!0;A.j("Rejecting variant - not compatible with root.");return!1};
function $f(b,c){var d;if(!(d=!!b.audio!=!!c.audio||!!b.video!=!!c.video||b.language!=c.language)&&(d=b.audio&&c.audio)){d=b.audio;var e=c.audio;d=!(d.channelsCount==e.channelsCount&&ag(d,e)&&bg(d.roles,e.roles))}!d&&(d=b.video&&c.video)&&(d=b.video,e=c.video,d=!(ag(d,e)&&bg(d.roles,e.roles)));return d?!1:!0}Zf.prototype.values=function(){return this.b.values()};
function ag(b,c){if(b.mimeType!=c.mimeType)return!1;var d=b.codecs.split(",").map(function(b){return ec(b)[0]}),e=c.codecs.split(",").map(function(b){return ec(b)[0]});if(d.length!=e.length)return!1;d.sort();e.sort();for(var f=0;f<d.length;f++)if(d[f]!=e[f])return!1;return!0}function bg(b,c){var d=new Set(b),e=new Set(c);d["delete"]("main");e["delete"]("main");if(d.size!=e.size)return!1;d=q(d);for(var f=d.next();!f.done;f=d.next())if(!e.has(f.value))return!1;return!0};function cg(b){this.a=b;this.b=new dg(b.language,"",b.audio&&b.audio.channelsCount?b.audio.channelsCount:0,"")}cg.prototype.create=function(b){var c=this,d=b.filter(function(b){return $f(c.a,b)});return d.length?new Zf(d[0],d):this.b.create(b)};function dg(b,c,d,e,f){this.f=b;this.c=c;this.a=d;this.b=void 0===e?"":e;this.g=void 0===f?"":f}
dg.prototype.create=function(b){var c=[];c=eg(b,this.f);var d=b.filter(function(b){return b.primary});c=c.length?c:d.length?d:b;this.c&&(b=fg(c,this.c,this.g),b.length?c=b:A.j("No exact match for variant role could be found."));this.a&&(b=ge(c,this.a),b.length?c=b:A.j("No exact match for the channel count could be found."));this.b&&(b=gg(c,this.b),b.length?c=b:A.j("No exact match for variant label could be found."));b=new Zf(c[0]);c=q(c);for(d=c.next();!d.done;d=c.next())d=d.value,$f(b.a,d)&&b.add(d);
return b};function eg(b,c){var d=O(c),e=ee(d,b.map(function(b){return de(b)}));return e?b.filter(function(b){return e==de(b)}):[]}function fg(b,c,d){return b.filter(function(b){if(d){var e=b[d];return e&&e.roles.includes(c)}e=b.audio;b=b.video;return e&&0<=e.roles.indexOf(c)||b&&0<=b.roles.indexOf(c)})}function gg(b,c){return b.filter(function(b){return b.audio?b.audio.label.toLowerCase()==c.toLowerCase():!1})};function hg(){this.a=ig;this.b=(new Map).set(ig,2).set(jg,1)}function kg(b,c,d){b.b.set(ig,d).set(jg,c)}var jg=0,ig=1;function pg(b,c){this.g=b;this.h=qg(b);this.a=b.a.currentTime;this.f=Date.now()/1E3;this.b=!1;this.i=c;this.c=function(){}}pg.prototype.release=function(){this.g=null;this.c=function(){}};function rg(b,c){b.c=c}function sg(b){this.a=b}function qg(b){if(b.a.paused||0==b.a.playbackRate||0==b.a.buffered.length)var c=!1;else a:{c=b.a.buffered;b=b.a.currentTime;for(var d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(!(b<e-.1||b>f-.5)){c=!0;break a}}c=!1}return c};function tg(b,c,d,e,f){var g=this;this.a=b;this.w=c;this.u=d;this.m=f;this.f=new K;this.i=!1;this.o=b.readyState;this.c=!1;this.b=e;this.h=!1;this.f.B(b,"waiting",function(){return ug(g)});this.g=(new B(function(){ug(g)})).Ca(.25)}tg.prototype.release=function(){this.f&&(this.f.release(),this.f=null);null!=this.g&&(this.g.stop(),this.g=null);this.b&&(this.b.release(),this.b=null);this.a=this.w=this.m=null};tg.prototype.Lc=function(){this.h=!0;ug(this)};
function ug(b){if(0!=b.a.readyState){if(b.a.seeking){if(!b.i)return}else b.i=!1;if(!b.a.paused){b.a.readyState!=b.o&&(b.c=!1,b.o=b.a.readyState);var c;if(!(c=!b.b)){c=b.b;var d=c.g,e=qg(d),f=d.a.currentTime,g=Date.now()/1E3;if(c.a!=f||c.h!=e)c.f=g,c.a=f,c.h=e,c.b=!1;f=g-c.f;if(e=f>=c.i&&e&&!c.b)c.c(c.a,f),c.b=!0,c.a=d.a.currentTime;c=!e}if(c){var h=b.u.smallGapLimit;c=b.a.currentTime;d=b.a.buffered;a:{if(d&&d.length&&!(1==d.length&&1E-6>d.end(0)-d.start(0)))for(e=ic()||kc("Trident/")||kc("Tizen")||
kc("CrKey")?.5:.1,f=0;f<d.length;f++)if(d.start(f)>c&&(0==f||d.end(f-1)-c<=e)){e=f;break a}e=null}if(!(null==e||0==e&&!b.h||(f=d.start(e),f>=b.w.za()))){g=f-c;h=g<=h;var k=!1;if(!(.001>g)){if(!h&&!b.c){b.c=!0;var m=new H("largegap",{currentTime:c,gapSize:g});m.cancelable=!0;b.m(m);b.u.jumpLargeGaps&&!m.defaultPrevented?k=!0:A.info("Ignoring large gap at",c,"size",g)}if(h||k)0==e?A.info("Jumping forward",g,"seconds because of gap before start time of",f):A.info("Jumping forward",g,"seconds because of gap starting at",
d.end(e-1),"and ending at",f),b.a.currentTime=f}}}}}};function vg(b){var c=this;this.c=b;this.a=new Set;this.b=(new B(function(){wg(c,!1)})).Ca(.25)}vg.prototype.release=function(){this.b.stop();for(var b=q(this.a),c=b.next();!c.done;c=b.next())c.value.release();this.a.clear()};function wg(b,c){for(var d=q(b.a),e=d.next();!e.done;e=d.next())e.value.g(b.c.currentTime,c)};function xg(b){var c=[];b=q(b);for(var d=b.next();!d.done;d=b.next()){d=q(d.value.variants);for(var e=d.next();!e.done;e=d.next())c.push(e.value)}return c}function yg(b,c){for(var d=null,e=q(b),f=e.next();!f.done;f=e.next())f=f.value,c>=f.startTime&&(d=f);return d};function zg(b){this.c=b;this.a=null;this.b=function(){}}zg.prototype.release=function(){this.a=this.c=null;this.b=function(){}};zg.prototype.g=function(b){var c=this.a,d=this.c.periods;b=yg(d,b)||d[0];c!=b&&this.b(b);this.a=b};function Ag(b,c){b.b=c};function Bg(b){var c=this;this.a=b;this.f=!1;this.c=this.a.Ub();this.b=new B(function(){c.a.pd(.25*c.c)})}Bg.prototype.release=function(){this.b&&(this.b.stop(),this.b=null);this.a=null};Bg.prototype.set=function(b){this.c=b;Cg(this)};function Cg(b){b.b.stop();var c=b.f?0:b.c;if(0<=c)try{b.a.Ub()!=c&&b.a.Wc(c);return}catch(d){}b.b.Ca(.25);0!=b.a.Ub()&&b.a.Wc(0)};/*

 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Dg(b,c,d,e){c==HTMLMediaElement.HAVE_NOTHING||b.readyState>=c?e():(c=Eg.get(c),d.oa(b,c,e))}var Eg=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Fg(b,c,d){var e=this;this.a=b;this.g=c;this.f=d;this.h=!1;this.b=new K;this.c=new Gg(b);Dg(this.a,HTMLMediaElement.HAVE_METADATA,this.b,function(){Hg(e,e.f)})}Fg.prototype.release=function(){this.b&&(this.b.release(),this.b=null);null!=this.c&&(this.c.release(),this.c=null);this.g=function(){};this.a=null};function Ig(b){return b.h?b.a.currentTime:b.f}function Jg(b,c){0<b.a.readyState?Kg(b.c,c):Dg(b.a,HTMLMediaElement.HAVE_METADATA,b.b,function(){Hg(b,b.f)})}
function Hg(b,c){.001>Math.abs(b.a.currentTime-c)?Lg(b):(b.b.oa(b.a,"seeking",function(){Lg(b)}),Kg(b.c,0==b.a.currentTime?c:b.a.currentTime))}function Lg(b){b.h=!0;b.b.B(b.a,"seeking",function(){return b.g()})}function Gg(b){var c=this;this.b=b;this.h=10;this.g=this.c=this.f=0;this.a=new B(function(){0>=c.f?(A.j(["Failed to move playhead from",c.c,"to",c.g].join(" ")),c.a.stop()):c.b.currentTime!=c.c?c.a.stop():(c.b.currentTime=c.g,c.f--)})}
Gg.prototype.release=function(){this.a&&(this.a.stop(),this.a=null);this.b=null};function Kg(b,c){b.c=b.b.currentTime;b.g=c;b.f=b.h;b.b.currentTime=c;b.a.Ca(.1)};function Mg(b){function c(){null==d.c?d.f=!0:(d.b.oa(d.a,"seeking",function(){d.f=!0}),d.a.currentTime=Math.max(0,d.a.currentTime+d.c))}var d=this;this.a=b;this.f=!1;this.c=null;this.b=new K;Dg(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,function(){c()})}Mg.prototype.release=function(){this.b&&(this.b.release(),this.b=null);this.a=null};Mg.prototype.o=function(b){this.c=this.f?this.c:b};Mg.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0};Mg.prototype.u=function(){};
function Ng(b,c,d,e,f,g){var h=this;this.c=b;this.a=c.presentationTimeline;this.C=c.minBufferTime||0;this.h=d;this.w=f;this.m=null;this.f=new tg(b,c.presentationTimeline,d,Og(b,d),g);this.b=new Fg(b,function(){a:{var b=h.f;b.i=!0;b.h=!1;b.c=!1;b=Ig(h.b);var c=Pg(h,b);if(.001<Math.abs(c-b)){var d=Date.now()/1E3;if(!h.m||h.m<d-1){h.m=d;Jg(h.b,c);b=void 0;break a}}A.A("Seek to "+b);h.w();b=void 0}return b},Qg(this,e));this.i=(new B(function(){if(0!=h.c.readyState&&!h.c.paused){var b=Ig(h.b),c=h.a.ob(),
d=h.a.za();3>d-c&&(c=d-3);b<c&&(c=Pg(h,b),A.info("Jumping forward "+(c-b)+" seconds to catch up with the seek range."),h.c.currentTime=c)}})).Ca(.25)}Ng.prototype.release=function(){this.b&&(this.b.release(),this.b=null);this.f&&(this.f.release(),this.f=null);this.i&&(this.i.stop(),this.i=null);this.c=this.b=this.a=this.h=null;this.w=function(){}};Ng.prototype.o=function(b){Jg(this.b,b)};Ng.prototype.g=function(){var b=Ig(this.b);return 0<this.c.readyState&&!this.c.paused?Rg(this,b):b};
function Qg(b,c){null==c?c=Infinity>b.a.ba()?b.a.ob():b.a.za():0>c&&(c=b.a.za()+c);return Sg(b,Rg(b,c))}Ng.prototype.u=function(){this.f.Lc()};function Sg(b,c){var d=b.a.ba();return c>=d?d-b.h.durationBackoff:c}
function Pg(b,c){var d=ed.bind(null,b.c.buffered),e=Math.max(b.C,b.h.rebufferingGoal),f=b.h.safeSeekOffset,g=b.a.ob(),h=b.a.za(),k=b.a.ba();3>h-g&&(g=h-3);var m=b.a.Cb(e),n=b.a.Cb(f);e=b.a.Cb(e+f);if(c>=k)return A.A("Playhead past duration."),Sg(b,c);if(c>h)return A.A("Playhead past end."),h;if(c<g){if(d(n))return A.A("Playhead before start & start is buffered"),n;A.A("Playhead before start & start is unbuffered");return e}if(c>=m||d(c))return A.A("Playhead in safe region or in buffered region."),
c;A.A("Playhead outside safe region & in unbuffered region.");return e}function Rg(b,c){var d=b.a.ob();if(c<d)return d;d=b.a.za();return c>d?d:c}function Og(b,c){if(!c.stallEnabled)return null;var d=c.stallSkip,e=new pg(new sg(b),c.stallThreshold);rg(e,function(c,e){A.debug("Stall detected at "+c+" for "+e+" seconds.");d?(A.debug("Seeking forward "+d+" seconds to break stall."),b.currentTime+=d):(A.debug("Pausing and unpausing to break stall."),b.pause(),b.play())});return e};function Tg(b){var c=this;this.b=function(){};this.a=new Set;this.f=b;this.c=(new B(function(){for(var b=c.f(),e=q(c.a),f=e.next();!f.done;f=e.next())f=f.value,f.endTime<b.start&&c.a["delete"](f)})).Ca(2)}Tg.prototype.release=function(){this.b=function(){};this.a.clear();this.c.stop()};function Ug(b,c){b.b=c};function Vg(b){var c=this;this.h=b;this.f=new Map;this.a=function(){};this.b=function(){};this.c=function(){};this.i=[{eb:null,cb:Wg,Ua:function(b,e){return c.a(b,e)}},{eb:Xg,cb:Wg,Ua:function(b,e){return c.a(b,e)}},{eb:Yg,cb:Wg,Ua:function(b,e){return c.a(b,e)}},{eb:Wg,cb:Xg,Ua:function(b,e){return c.b(b,e)}},{eb:Wg,cb:Yg,Ua:function(b,e){return c.b(b,e)}},{eb:Xg,cb:Yg,Ua:function(b,e){return c.c(b,e)}},{eb:Yg,cb:Xg,Ua:function(b,e){return c.c(b,e)}}]}
Vg.prototype.release=function(){this.h=null;this.f.clear();this.a=function(){};this.b=function(){};this.c=function(){}};Vg.prototype.g=function(b,c){for(var d=q(this.h.a),e=d.next();!e.done;e=d.next()){e=e.value;var f=this.f.get(e),g=b<e.startTime?Xg:b>e.endTime?Yg:Wg;this.f.set(e,g);for(var h=q(this.i),k=h.next();!k.done;k=h.next())k=k.value,k.eb==f&&k.cb==g&&k.Ua(e,c)}};function Zg(b,c,d,e){b.a=c;b.b=d;b.c=e}var Xg=1,Wg=2,Yg=3;function $g(b,c){this.a=c;this.c=b;this.g=null;this.m=1;this.w=Promise.resolve();this.h=[];this.i=new Map;this.b=new Map;this.u=!1;this.M=null;this.L=this.f=this.o=!1;this.C=0}$g.prototype.destroy=function(){var b=this;return u(function d(){var e,f;return y(d,function(d){switch(d.l){case 1:e=[];for(var g=q(b.b.values()),k=g.next();!k.done;k=g.next())f=k.value,ah(f),e.push(bh(f));return v(d,Promise.all(e),2);case 2:b.b.clear(),b.i.clear(),b.a=null,b.c=null,b.w=null,b.h=null,b.g=null,b.f=!0,w(d)}})})};
$g.prototype.configure=function(b){this.g=b;this.M=new jb({maxAttempts:Math.max(b.retryParameters.maxAttempts,2),baseDelay:b.retryParameters.baseDelay,backoffFactor:b.retryParameters.backoffFactor,fuzzFactor:b.retryParameters.fuzzFactor,timeout:0},!0)};
$g.prototype.start=function(){var b=this;return u(function d(){var e,f,g;return y(d,function(d){switch(d.l){case 1:return e=b.a.Sa(),f=ch(b,e),g=b.a.sd(b.c.periods[f]),g.variant||g.text?v(d,dh(b,g.variant?g.variant.audio:null,g.variant?g.variant.video:null,g.text,e),2):(A.error("init: no Streams chosen"),d["return"](new D(2,5,5005)));case 2:if(b.f)return d["return"]();A.debug("init: completed initial Stream setup");b.a&&b.a.ze&&(A.A("init: calling onInitialStreamsSetup()..."),b.a.ze());w(d)}})})};
function eh(b){return fh(b,"audio")}function gh(b){return fh(b,"video")}function fh(b,c){var d=b.b.get(c);return d?d.Ka||d.stream:null}
function hh(b,c){return u(function e(){var f,g,h,k,m,n,p,r,t,x;return y(e,function(e){switch(e.l){case 1:return f=jd,v(e,Xd(b.a.I,f.xa),2);case 2:return b.C++,b.L=!1,g=b.C,h=b.a.I,k=new Map,m=new Set,k.set(f.xa,c),m.add(c),v(e,h.init(k,!1),3);case 3:return b.f?e["return"]():v(e,ih(b,m),4);case 4:if(b.f)return e["return"]();p=(n=b.a.I.g.isTextVisible())||b.g.alwaysStreamText;b.C!=g||b.b.has(f.xa)||b.L||!p||(r=b.a.Sa(),t=ch(b,r),x=jh(c,t,0),b.b.set(f.xa,x),kh(b,x,0));w(e)}})})}
function lh(b){b.L=!0;var c=b.b.get("text");c&&(ah(c),bh(c)["catch"](function(){}),b.b["delete"]("text"))}function mh(b,c){var d=b.b.get("video");if(d){var e=d.stream;if(e)if(A.debug("setTrickPlay",c),c){var f=e.trickModeVideo;f&&!d.Ka&&(A.debug("Engaging trick mode stream",f),nh(b,f,!1,0,!1),d.Ka=e)}else if(e=d.Ka)A.debug("Restoring non-trick-mode stream",e),d.Ka=null,nh(b,e,!0,0,!1)}}
function oh(b,c,d,e){var f=!1;if(c.video){var g=nh(b,c.video,d,e,!1);f=f||g}c.audio&&(b=nh(b,c.audio,d,e,!1),f=f||b);return f}
function nh(b,c,d,e,f){var g=b.b.get(c.type);if(!g&&"text"==c.type&&b.g.ignoreTextStreamFailures)return hh(b,c),!0;if(!g)return!1;var h=ph(b,c),k=Array.from(b.b.values()).every(function(b){return b.ga==g.ga});if(d&&h!=g.ga&&k)return A.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),b.b.forEach(function(c){qh(b,c)}),!0;g.Ka&&(A.debug("switch during trick play mode",c),c.trickModeVideo?(g.Ka=c,c=c.trickModeVideo,A.debug("switch found trick play stream",c)):
(g.Ka=null,A.debug("switch found no special trick play stream")));k=b.h[h];if(!k||!k.yb)return!1;k=b.i.get(c.id);if(!k||!k.yb)return!1;if(g.stream==c&&!f)return A.debug("switch: Stream "+rh(g)+" already active"),!1;"text"==c.type&&Od(b.a.I,bc(c.mimeType,c.codecs));g.stream=c;g.Yb=!0;A.debug("switch: switching to Stream "+rh(g));sh(b,g,h)&&(A.info("Aborting current segment request to switch."),g.Ya.abort());d&&(g.Qa?g.ic=!0:g.Ja?(g.Oa=!0,g.Qb=e,g.ic=!0):(ah(g),th(b,g,!0,e)["catch"](function(c){if(b.a)b.a.onError(c)})));
return!0}function sh(b,c,d){if(!c.Ya)return!1;var e=b.a.Sa(),f=Sd(b.a.I,c.type),g=uh(b,c,e,f,d);d=g?g.a?g.a-g.b:null:null;g&&!d&&(d=(g.endTime-g.Bc())*c.stream.bandwidth/8);if(isNaN(d))return!1;(g=c.stream.initSegmentReference)&&(d+=(g.a?g.a-g.b:null)||0);g=b.a.getBandwidthEstimate();return 8*d/g<f-e-Math.max(b.c.minBufferTime||0,b.g.rebufferingGoal)||c.Ya.b.a>d?!0:!1}
function vh(b){function c(c){var f=b.a.I;"text"==c?(c=f.a,c=null==c.a||null==c.b?!1:d>=c.a&&d<c.b):(c=Rd(f,c),c=ed(c,d,e));return c}var d=b.a.Sa(),e=b.g.smallGapLimit,f=!1,g=ch(b,d);if(Zb(b.b.values(),function(b){return b.ga==g}))for(var h=q(b.b.keys()),k=h.next();!k.done;k=h.next())k=k.value,c(k)||(qh(b,b.b.get(k)),f=!0);else Zb(b.b.keys(),c)||(A.debug("(all): seeked: unbuffered seek: clearing all buffers"),b.b.forEach(function(c){qh(b,c)}),f=!0);f||A.debug("(all): seeked: buffered seek: presentationTime="+
d)}function qh(b,c){var d=rh(c);c.Qa?A.debug(d,"clear: already clearing the buffer"):c.Oa?A.debug(d,"clear: already waiting"):c.Ja?(A.debug(d,"clear: currently updating"),c.Oa=!0,c.Qb=0):null==Qd(b.a.I,c.type)?(A.debug(d,"clear: nothing buffered"),null==c.Da&&kh(b,c,0)):(A.debug(d,"clear: handling right now"),ah(c),th(b,c,!1,0)["catch"](function(c){if(b.a)b.a.onError(c)}))}
function dh(b,c,d,e,f){return u(function h(){var k,m,n,p,r,t,x;return y(h,function(h){switch(h.l){case 1:return k=b.a.Sa(),m=ch(b,k),n=jd,p=new Map,r=new Set,c&&(p.set(n.Ld,c),r.add(c)),d&&(p.set(n.cd,d),r.add(d)),e&&(p.set(n.xa,e),r.add(e)),t=b.a.I,x=b.g.forceTransmuxTS,v(h,t.init(p,x),2);case 2:if(b.f)return h["return"]();wh(b);return v(h,ih(b,r),3);case 3:if(b.f)return h["return"]();p.forEach(function(c,d){if(!b.b.has(d)){var e=jh(c,m,f);b.b.set(d,e);kh(b,e,0)}});w(h)}})})}
function jh(b,c,d){return{stream:b,type:b.type,Va:null,va:null,Ka:null,Yb:!0,ga:c,endOfStream:!1,Ja:!1,Da:null,Oa:!1,Qb:0,ic:!1,Qa:!1,Oc:!1,Db:!1,Rc:d||0,Ya:null}}
function xh(b,c){var d=b.h[c];if(d)return A.debug("(all) Period "+c+" is being or has been set up"),d.promise;A.debug("(all) setting up Period "+c);d={promise:new E,yb:!1};b.h[c]=d;for(var e=new Set,f=q(b.c.periods[c].variants),g=f.next();!g.done;g=f.next())g=g.value,g.video&&e.add(g.video),g.video&&g.video.trickModeVideo&&e.add(g.video.trickModeVideo),g.audio&&e.add(g.audio);f=q(b.c.periods[c].textStreams);for(g=f.next();!g.done;g=f.next())e.add(g.value);b.w=b.w.then(function(){if(!this.f)return ih(this,
e)}.bind(b)).then(function(){this.f||(this.h[c].promise.resolve(),this.h[c].yb=!0,A.A("(all) setup Period "+c))}.bind(b))["catch"](function(b){this.f||(this.h[c].promise["catch"](function(){}),this.h[c].promise.reject(),delete this.h[c],A.j("(all) failed to setup Period "+c),this.a.onError(b))}.bind(b));return d.promise}
function ih(b,c){return u(function e(){var f,g,h,k,m,n,p;return y(e,function(e){switch(e.l){case 1:f=[];for(var r=q(c),x=r.next();!x.done;x=r.next())g=x.value,(h=b.i.get(g.id))?(A.debug("(all) Stream "+g.id+" is being or has been set up"),f.push(h.promise)):(A.A("(all) setting up Stream "+g.id),b.i.set(g.id,{promise:new E,yb:!1}),f.push(g.createSegmentIndex()));e.U=2;return v(e,Promise.all(f),4);case 4:if(b.f)return e["return"]();Aa(e,3);break;case 2:k=Da(e);if(b.f)return e["return"]();e=q(c);for(x=
e.next();!x.done;x=e.next())m=x.value,b.i.get(m.id).promise["catch"](function(){}),b.i.get(m.id).promise.reject(),b.i["delete"](m.id);throw k;case 3:r=q(c);for(x=r.next();!x.done;x=r.next())n=x.value,p=b.i.get(n.id),p.yb||(p.promise.resolve(),p.yb=!0,A.A("(all) setup Stream "+n.id));w(e)}})})}function wh(b){var c=b.c.presentationTimeline.ba();Infinity>c?b.a.I.$a(c):b.a.I.$a(Math.pow(2,32))}
function yh(b,c){if(!b.f){var d=rh(c);if(!c.Ja&&null!=c.Da&&!c.Qa)if(c.Da=null,c.Oa)A.debug(d,"skipping update and clearing the buffer"),th(b,c,c.ic,c.Qb);else{try{var e=zh(b,c);null!=e&&(kh(b,c,e),c.Db=!1)}catch(f){Ah(b,f);return}e=Array.from(b.b.values());Bh(b,c);b.u&&e.every(function(b){return b.endOfStream})&&(A.A(d,"calling endOfStream()..."),b.a.I.endOfStream().then(function(){if(!this.f){var b=this.a.I.ba();0!=b&&b<this.c.presentationTimeline.ba()&&this.c.presentationTimeline.$a(b)}}.bind(b)))}}}
function zh(b,c){if(Ch(c))return Wd(b.a.I,c.stream.originalId||""),null;var d=rh(c),e=b.a.Sa(),f=Dh(b,c,e);A.H(d,"timeNeeded="+f);var g=ph(b,c.stream),h=ch(b,f),k=Td(b.a.I,c.type,e);A.H(d,"update_:","presentationTime="+e,"bufferedAhead="+k);var m=Math.max(b.c.minBufferTime||0,b.g.rebufferingGoal,b.g.bufferingGoal)*b.m;if(f>=b.c.presentationTimeline.ba())return A.debug(d,"buffered to end of presentation"),c.endOfStream=!0,"video"==c.type&&(f=b.b.get("text"))&&"application/cea-608"==f.stream.mimeType&&
(f.endOfStream=!0),null;c.endOfStream=!1;c.ga=h;if(h!=g)return A.debug(d,"need Period "+h,"presentationTime="+e,"timeNeeded="+f,"currentPeriodIndex="+g),null;if(k>=m)return A.H(d,"buffering goal met"),.5;d=Sd(b.a.I,c.type);d=uh(b,c,e,d,g);if(!d)return 1;var n=Infinity;Array.from(b.b.values()).forEach(function(c){Ch(c)||(c=Dh(b,c,e),n=Math.min(n,c))});if(f>=n+b.c.presentationTimeline.a)return 1;c.Rc=0;Eh(b,c,e,g,d);return null}
function Dh(b,c,d){if(!c.Va||!c.va)return Math.max(d,c.Rc);d=ph(b,c.Va);return b.c.periods[d].startTime+c.va.endTime}
function uh(b,c,d,e,f){var g=rh(c);if(c.va&&c.stream==c.Va)return e=c.va.position+1,A.H(g,"next position known:","position="+e),Fh(b,c,f,e);c.va?(A.A(g,"next position unknown: another Stream buffered"),g=ph(b,c.Va),g=Gh(b,c,b.c.periods[g].startTime+c.va.endTime,f)):(A.A(g,"next position unknown: nothing buffered"),g=Gh(b,c,e||d,f));if(null==g)return null;d=null;null==e&&(d=Fh(b,c,f,Math.max(0,g-1)));return d||Fh(b,c,f,g)}
function Gh(b,c,d,e){var f=rh(c);b=b.c.periods[e];A.debug(f,"looking up segment:","presentationTime="+d,"currentPeriod.startTime="+b.startTime);d=Math.max(0,d-b.startTime);c=c.stream.findSegmentPosition(d);null==c&&A.j(f,"cannot find segment:","currentPeriod.startTime="+b.startTime,"lookupTime="+d);return c}
function Fh(b,c,d,e){var f=rh(c);d=b.c.periods[d];c=c.stream.getSegmentReference(e);if(!c)return A.A(f,"segment does not exist:","currentPeriod.startTime="+d.startTime,"position="+e),null;e=b.c.presentationTimeline;b=e.Vb();e=e.pb();return d.startTime+c.endTime<b||d.startTime+c.startTime>e?(A.H(f,"segment is not available:","currentPeriod.startTime="+d.startTime,"reference.startTime="+c.startTime,"reference.endTime="+c.endTime,"availabilityStart="+b,"availabilityEnd="+e),null):c}
function Eh(b,c,d,e,f){u(function h(){var k,m,n,p,r,t,x,F,C,I,R,Z,ya,ra,ja,sa,ba,Qb,Rb,ka;return y(h,function(h){switch(h.l){case 1:return k=jd,m=rh(c),n=b.c.periods[e],A.A(m,"fetchAndAppend_:","presentationTime="+d,"currentPeriod.startTime="+n.startTime,"reference.position="+f.position,"reference.startTime="+f.startTime,"reference.endTime="+f.endTime),p=c.stream,r=b.c.presentationTimeline.ba(),t=b.c.periods[e+1],x=Math.max(0,n.startTime-.1),F=t?t.startTime+.01:r,C=Hh(b,c,e,x,F),c.Ja=!0,c.Yb=!1,A.H(m,
"fetching segment"),I=function(){return b.f||b.o},R=[],Z=!1,ra=ya=0,ja=new Uint8Array(0),sa=function(e,h){return u(function Lc(){var k,m;return y(Lc,function(r){switch(r.l){case 1:return k=ya,v(r,C,2);case 2:return v(r,Promise.all(R),3);case 3:if(I()||Z&&!h||k!==ya)return r["return"]();if(h){if(ra===e.byteLength)return r["return"]()}else ra+=e.byteLength;m=Ih(b,c,d,n,p,f,e);R.push(m);return r["return"](m)}})})},ba=function(b){ja=Jh(ja,b);var c=!1,d=0;(new S).J("mdat",function(b){d=b.size+b.start;
c=!0}).parse(ja,!1,!0);c&&(b=ja.subarray(0,d),ja=ja.subarray(d),sa(b,!1)["catch"](function(){}))},Qb=function(){ja=new Uint8Array(0);R=[];ya++;ra=0},h.U=2,v(h,Kh(b,c,p,f,ba,Qb),4);case 4:Rb=h.N;if(I())return h["return"]();Z=!0;return v(h,sa(Rb,!0),5);case 5:if(I())return h["return"]();c.Ja=!1;c.Oc=!1;c.Va=p;c.va=f;c.Oa||b.a.Lc();kh(b,c,0);Lh(b,c,p);A.A(m,"finished fetch and append");Aa(h,0);break;case 2:ka=Da(h);if(b.f||b.o)return h["return"]();c.Ja=!1;c.type==k.xa&&b.g.ignoreTextStreamFailures?(1001==
ka.code?A.j(m,"Text stream failed to download. Proceeding without it."):A.j(m,"Text stream failed to parse. Proceeding without it."),b.b["delete"](k.xa)):7001==ka.code?(c.Ja=!1,c.Da=null,kh(b,c,0)):3017==ka.code?Mh(b,c,ka):(A.error(m,"failed fetch and append: code="+ka.code),c.Db=!0,ka.severity=2,Ah(b,ka));w(h)}})})}function Jh(b,c){var d=new Uint8Array(b.length+c.length);d.set(b);d.set(c,b.length);return d}
function Mh(b,c,d){var e=rh(c);if(Array.from(b.b.values()).some(function(b){return b!=c&&b.Oc}))A.debug(e,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var f=Math.round(100*b.m);if(20<f)b.m-=.2;else if(4<f)b.m-=.04;else{A.error(e,"MediaSource threw QuotaExceededError too many times");c.Db=!0;b.o=!0;b.a.onError(d);return}A.j(e,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*b.m))+"%");c.Oc=!0}kh(b,c,4)}
function Hh(b,c,d,e,f){if(!c.Yb)return Promise.resolve();var g=rh(c);d=b.c.periods[d].startTime-c.stream.presentationTimeOffset;A.A(g,"setting timestamp offset to "+d);A.A(g,"setting append window start to "+e);A.A(g,"setting append window end to "+f);e=Yd(b.a.I,c.type,d,e,f);if(!c.stream.initSegmentReference)return e;A.A(g,"fetching init segment");b=Kh(b,c,c.stream,c.stream.initSegmentReference).then(function(b){if(!this.f)return A.A(g,"appending init segment"),Ud(this.a.I,c.type,b,null,null,c.stream.closedCaptions&&
0<c.stream.closedCaptions.size)}.bind(b))["catch"](function(b){c.Yb=!0;return Promise.reject(b)});return Promise.all([e,b])}
function Ih(b,c,d,e,f,g,h){var k=rh(c),m=f.closedCaptions&&0<f.closedCaptions.size;null!=f.emsgSchemeIdUris&&0<f.emsgSchemeIdUris.length&&(new S).sa("emsg",b.S.bind(b,e,g,f.emsgSchemeIdUris)).parse(h);return Nh(b,c,d).then(function(){if(!this.f)return A.A(k,"appending media segment"),Ud(this.a.I,c.type,h,g.startTime+e.startTime,g.endTime+e.startTime,m)}.bind(b)).then(function(){if(!this.f)return A.H(k,"appended media segment"),c.Va=f,c.va=g,Promise.resolve()}.bind(b))}
$g.prototype.S=function(b,c,d,e){var f=e.reader.Mc(),g=e.reader.Mc(),h=e.reader.G(),k=e.reader.G(),m=e.reader.G(),n=e.reader.G();e=e.reader.Za(e.reader.D.byteLength-e.reader.ca());b=b.startTime+c.startTime+k/h;if(d.includes(f))if("urn:mpeg:dash:event:2012"==f)this.a.Ae();else this.a.onEvent(new H("emsg",{detail:{startTime:b,endTime:b+m/h,schemeIdUri:f,value:g,timescale:h,presentationTimeDelta:k,eventDuration:m,id:n,messageData:e}}))};
function Nh(b,c,d){var e=rh(c);A.H(e,"checking buffer length");var f=Math.max(b.g.bufferBehind,b.c.presentationTimeline.a),g=Qd(b.a.I,c.type);if(null==g)return A.H(e,"buffer behind okay because nothing buffered:","presentationTime="+d,"bufferBehind="+f),Promise.resolve();var h=d-g,k=h-f;if(0>=k)return A.H(e,"buffer behind okay:","presentationTime="+d,"bufferedBehind="+h,"bufferBehind="+f,"underflow="+-k),Promise.resolve();A.A(e,"buffer behind too large:","presentationTime="+d,"bufferedBehind="+h,
"bufferBehind="+f,"overflow="+k);return b.a.I.remove(c.type,g,g+k).then(function(){this.f||A.A(e,"evicted "+k+" seconds")}.bind(b))}
function Lh(b,c,d){if(!b.u){var e=rh(c);c=Array.from(b.b.values());if(1!=c.length||"text"!=c[0].type)b.u=c.every(function(b){return"text"==b.type?!0:!b.Oa&&!b.Qa&&b.va});if(b.u){A.debug(e,"startup complete");d=ph(b,d);b.h[d]||xh(b,d).then(function(){this.f||(A.A(e,"calling onCanSwitch()..."),this.a.rd())}.bind(b))["catch"](hd.$b);for(d=0;d<b.c.periods.length;++d)xh(b,d)["catch"](hd.$b);b.a.Ge&&(A.A(e,"calling onStartupComplete()..."),b.a.Ge())}}}
function Bh(b,c){var d=rh(c),e=ph(b,c.stream);if(c.ga!=e){var f=c.ga,g=Array.from(b.b.values());g.every(function(b){return b.ga==f||Ch(b)})?g.every(Oh)?(A.debug(d,"all need Period "+f),xh(b,f).then(function(){if(!this.f)if(g.every(function(b){var c=Oh(b),d=ph(this,b.stream);return Ch(b)?!0:c&&b.ga==f&&d!=f}.bind(this))){var b=this.c.periods[f];A.A(d,"calling onChooseStreams()...");var c=this.a.sd(b),e=new Map;c.variant&&c.variant.video&&e.set("video",c.variant.video);c.variant&&c.variant.audio&&e.set("audio",
c.variant.audio);c.text&&e.set("text",c.text);c=q(this.b.keys());for(var n=c.next();!n.done;n=c.next())if(n=n.value,!e.has(n)&&"text"!=n){A.error(d,"invalid Streams chosen: missing "+n+" Stream");this.a.onError(new D(2,5,5005));return}c=q(Array.from(e.keys()));for(n=c.next();!n.done;n=c.next())if(n=n.value,!this.b.has(n))if("text"==n)dh(this,null,null,e.get("text"),b.startTime),e["delete"](n);else{A.error(d,"invalid Streams chosen: unusable "+n+" Stream");this.a.onError(new D(2,5,5005));return}c=
q(Array.from(this.b.keys()));for(n=c.next();!n.done;n=c.next()){n=n.value;var p=this.b.get(n),r=e.get(n);if(r){var t=Ch(p);t&&(p.ga=f,p.Rc=b.startTime);nh(this,r,!1,0,!1);t&&Ch(p)||kh(this,this.b.get(n),0)}else this.b["delete"](n)}A.A(d,"calling onCanSwitch()...");this.a.rd()}else A.debug(d,"ignoring transition to Period",f,"since another is happening")}.bind(b))["catch"](hd.$b)):A.debug(d,"all MediaStates need Period "+f+", but not all MediaStates are idle"):A.debug(d,"not all MediaStates need Period "+
f)}}function Ch(b){return b&&"text"==b.type&&"application/cea-608"==b.stream.mimeType}function Oh(b){return!b.Ja&&null==b.Da&&!b.Oa&&!b.Qa}function ch(b,c){var d=yg(b.c.periods,c+kd);return d?b.c.periods.indexOf(d):0}
function ph(b,c){for(var d=b.c.periods,e=0;e<d.length;e++){for(var f=d[e],g=new Set,h=q(f.variants),k=h.next();!k.done;k=h.next())k=k.value,k.audio&&g.add(k.audio),k.video&&g.add(k.video),k.video&&k.video.trickModeVideo&&g.add(k.video.trickModeVideo);f=q(f.textStreams);for(h=f.next();!h.done;h=f.next())g.add(h.value);if(g.has(c))return e}return-1}
function Kh(b,c,d,e,f,g){d=zf(e.c(),e.b,e.a,b.g.retryParameters,d,f,g);A.H("fetching: reference=",e);b=b.a.Zb.request(1,d);c.Ya=b;return b.promise.then(function(b){c.Ya=null;return b.data})}
function th(b,c,d,e){return u(function g(){var h,k,m,n;return y(g,function(g){switch(g.l){case 1:return h=rh(c),c.Oa=!1,c.ic=!1,c.Qb=0,c.Qa=!0,c.Va=null,c.va=null,A.debug(h,"clearing buffer"),e?(m=b.a.Sa(),n=b.a.I.ba(),k=b.a.I.remove(c.type,m+e,n)):k=Xd(b.a.I,c.type).then(function(){if(!this.f&&d)return this.a.I.flush(c.type)}.bind(b)),v(g,k,2);case 2:if(b.f)return g["return"]();A.debug(h,"cleared buffer");c.Qa=!1;c.endOfStream=!1;kh(b,c,0);w(g)}})})}
function kh(b,c,d){A.H(rh(c),"updating in "+d+" seconds");c.Da=(new ib(function(){return u(function f(){var d;return y(f,function(f){switch(f.l){case 1:return f.U=2,v(f,yh(b,c),4);case 4:Aa(f,0);break;case 2:d=Da(f);if(b.a)b.a.onError(d);w(f)}})})})).V(d)}function ah(b){null!=b.Da&&(b.Da.stop(),b.Da=null)}function bh(b){return u(function d(){return y(d,function(d){switch(d.l){case 1:if(b.Ya)return v(d,b.Ya.abort(),0);d.l=0}})})}
function Ah(b,c){lb(b.M).then(function(){this.f||(this.a.onError(c),c.handled||this.g.failureCallback(c))}.bind(b))}function rh(b){return"("+b.type+":"+b.stream.id+")"};function Ph(b,c,d,e,f,g){if(200<=d&&299>=d&&202!=d)return{uri:f||e,Af:e,data:c,headers:b,fromCache:!!b["x-shaka-from-cache"]};f=null;try{f=Wb(c)}catch(h){}A.debug("HTTP error text:",f);throw new D(401==d||403==d?2:1,1,1001,e,d,f,b,g);};function Qh(b,c,d,e){var f=new Qh.b;$b(c.headers).forEach(function(b,c){f.append(c,b)});var g=new Qh.a,h={pc:!1,$c:!1};b=Qh.h(b,d,{body:c.body||void 0,headers:f,method:c.method,signal:g.signal,credentials:c.allowCrossSiteCredentials?"include":void 0},h,e,c.streamDataCallback);b=new G(b,function(){h.pc=!0;g.abort();return Promise.resolve()});if(c=c.retryParameters.timeout){var k=new B(function(){h.$c=!0;g.abort()});k.V(c/1E3);b["finally"](function(){k.stop()})}return b}
z("shaka.net.HttpFetchPlugin",Qh);
Qh.h=function(b,c,d,e,f,g){return u(function k(){var m,n,p,r,t,x,F,C,I,R,Z,ya,ra,ja,sa,ba;return y(k,function(k){switch(k.l){case 1:return m=Qh.g,n=Qh.c,x=t=0,F=Date.now(),C=!1,I=function(){return!C&&!e.pc&&!e.$c},k.U=2,v(k,m(b,d),4);case 4:return p=k.N,R=p.clone().body.getReader(),ya=(Z=p.headers.get("Content-Length"))?parseInt(Z,10):0,ra=function(b){function c(){return u(function Kc(){var d,e,k;return y(Kc,function(m){switch(m.l){case 1:return m.U=2,v(m,R.read(),4);case 4:d=m.N;Aa(m,3);break;case 2:return e=
Da(m),A.A("error reading from stream",e.message),m["return"]();case 3:d.done||(t+=d.value.byteLength,g&&I()&&g(d.value));k=Date.now();if(100<k-F||d.done)f(k-F,t-x,ya-t),x=t,F=k;d.done?b.close():(b.enqueue(d.value),c());w(m)}})})}c()},new n({start:ra}),v(k,p.arrayBuffer(),5);case 5:r=k.N;Aa(k,3);break;case 2:ja=Da(k);C=!0;if(e.pc)throw new D(1,1,7001,b,c);if(e.$c)throw new D(1,1,1003,b,c);throw new D(1,1,1002,b,ja,c);case 3:return sa={},ba=p.headers,ba.forEach(function(b,c){sa[c.trim()]=b}),k["return"](Ph(sa,
r,p.status,b,p.url,c))}})})};Qh.isSupported=function(){if(window.ReadableStream)try{new ReadableStream({})}catch(b){return!1}else return!1;return!(!window.fetch||!window.AbortController)};Qh.isSupported=Qh.isSupported;Qh.g=window.fetch;Qh.a=window.AbortController;Qh.c=window.ReadableStream;Qh.b=window.Headers;Qh.isSupported()&&(Cb("http",Qh,2),Cb("https",Qh,2));function Rh(b,c,d,e){var f=new Rh.f,g=Date.now(),h=0,k=new Promise(function(k,n){f.open(c.method,b,!0);f.responseType="arraybuffer";f.timeout=c.retryParameters.timeout;f.withCredentials=c.allowCrossSiteCredentials;f.onabort=function(){n(new D(1,1,7001,b,d))};f.onload=function(c){c=c.target;var e=c.getAllResponseHeaders().trim().split("\r\n"),f={};e=q(e);for(var g=e.next();!g.done;g=e.next())g=g.value.split(": "),f[g[0].toLowerCase()]=g.slice(1).join(": ");try{var h=Ph(f,c.response,c.status,b,c.responseURL,
d);k(h)}catch(I){n(I)}};f.onerror=function(c){n(new D(1,1,1002,b,c,d))};f.ontimeout=function(){n(new D(1,1,1003,b,d))};f.onprogress=function(b){var c=Date.now();if(100<c-g||b.lengthComputable&&b.loaded==b.total)e(c-g,b.loaded-h,b.total-b.loaded),h=b.loaded,g=c};for(var m in c.headers)f.setRequestHeader(m.toLowerCase(),c.headers[m]);f.send(c.body)});return new G(k,function(){f.abort();return Promise.resolve()})}z("shaka.net.HttpXHRPlugin",Rh);Rh.f=window.XMLHttpRequest;Cb("http",Rh,1);
Cb("https",Rh,1);function Sh(b,c){var d=Th(),e=this;this.h=c;this.c=b;this.f=d;this.i=null;this.g=[];this.b=this.a=null;this.m=!0;this.o=Promise.resolve().then(function(){return Uh(e)})}Sh.prototype.destroy=function(){var b=this;return u(function d(){var e;return y(d,function(d){switch(d.l){case 1:return b.m=!1,b.b&&b.b.abort(),Vh(b),v(d,b.o,2);case 2:b.a&&b.a.wa.Xa();for(var f=q(b.g),h=f.next();!h.done;h=f.next())e=h.value,e.wa.Xa();b.a=null;b.g=[];b.h=null;w(d)}})})};
function Wh(b,c){var d={tb:function(){},bc:function(){},Xa:function(){},onError:function(){},cc:function(){},zf:function(){}};b.g.push({create:c,wa:d});b.b&&b.b.abort();Vh(b);return d}
function Uh(b){return u(function d(){return y(d,function(d){switch(d.l){case 1:if(b.m){if(0==b.g.length||b.a&&!b.a.Ta)var e=!1;else{b.a&&(b.a.wa.Xa(),b.a=null);e=b.g.shift();var g=e.create(b.f);g?(e.wa.tb(),b.a={node:g.node,payload:g.payload,Ta:g.Ta,wa:e.wa}):e.wa.cc();e=!0}e?e=Promise.resolve():b.a?e=Xh(b):(b.h.ye(b.c),b.i=new E,e=b.i);return v(d,e,1)}d.l=0}})})}
function Xh(b){return u(function d(){var e,f;return y(d,function(d){switch(d.l){case 1:return b.c=b.h.me(b.c,b.f,b.a.node,b.a.payload),d.U=2,b.b=b.h.Ud(b.c,b.f,b.a.payload),v(d,b.b.promise,4);case 4:b.b=null;b.c==b.a.node&&(b.a.wa.bc(),b.a=null);Aa(d,0);break;case 2:e=Da(d);if(7001==e.code)b.a.wa.Xa();else b.a.wa.onError(e);b.a=null;b.b=null;f=b;return v(d,b.h.handleError(b.f,e),5);case 5:f.c=d.N,w(d)}})})}function Vh(b){b.i&&(b.i.resolve(),b.i=null)};function Yh(b){this.a=null;for(var c=0;c<b.textTracks.length;++c){var d=b.textTracks[c];d.mode="disabled";"Shaka Player TextTrack"==d.label&&(this.a=d)}this.a||(this.a=b.addTextTrack("subtitles","Shaka Player TextTrack"));this.a.mode="hidden"}z("shaka.text.SimpleTextDisplayer",Yh);Yh.prototype.remove=function(b,c){if(!this.a)return!1;Zh(this.a,function(d){return d.startTime<c&&d.endTime>b});return!0};Yh.prototype.remove=Yh.prototype.remove;
Yh.prototype.append=function(b){var c=$h,d=b.map(function(b){if(b.nestedCues.length){var c=b.nestedCues.map(function(b){return b.spacer?"\n":b.payload+" "}).join("").replace(/ $/m,"");b=b.clone();b.nestedCues=[];b.payload=c}return b}),e=[];b=this.a.cues?Array.from(this.a.cues):[];var f={};d=q(d);for(var g=d.next();!g.done;f={rb:f.rb},g=d.next())f.rb=g.value,b.some(function(b){return function(c){return c.startTime==b.rb.startTime&&c.endTime==b.rb.endTime&&c.text==b.rb.payload?!0:!1}}(f))||(g=c(f.rb))&&
e.push(g);e.slice().sort(function(b,c){return b.startTime!=c.startTime?b.startTime-c.startTime:b.endTime!=c.endTime?b.endTime-c.startTime:"line"in VTTCue.prototype?e.indexOf(c)-e.indexOf(b):e.indexOf(b)-e.indexOf(c)}).forEach(function(b){this.a.addCue(b)}.bind(this))};Yh.prototype.append=Yh.prototype.append;Yh.prototype.destroy=function(){this.a&&Zh(this.a,function(){return!0});this.a=null;return Promise.resolve()};Yh.prototype.destroy=Yh.prototype.destroy;
Yh.prototype.isTextVisible=function(){return"showing"==this.a.mode};Yh.prototype.isTextVisible=Yh.prototype.isTextVisible;Yh.prototype.setTextVisibility=function(b){this.a.mode=b?"showing":"hidden"};Yh.prototype.setTextVisibility=Yh.prototype.setTextVisibility;
function $h(b){if(b.startTime>=b.endTime)return A.j("Invalid cue times: "+b.startTime+" - "+b.endTime),null;var c=new VTTCue(b.startTime,b.endTime,b.payload);c.lineAlign=b.lineAlign;c.positionAlign=b.positionAlign;b.size&&(c.size=b.size);try{c.align=b.textAlign}catch(d){}"center"==b.textAlign&&"center"!=c.align&&(c.align="middle");"vertical-lr"==b.writingMode?c.vertical="lr":"vertical-rl"==b.writingMode&&(c.vertical="rl");1==b.lineInterpretation&&(c.snapToLines=!1);null!=b.line&&(c.line=b.line);null!=
b.position&&(c.position=b.position);return c}function Zh(b,c){var d=b.mode;b.mode="showing"==d?"showing":"hidden";for(var e=b.cues,f=e.length-1;0<=f;f--){var g=e[f];g&&c(g)&&b.removeCue(g)}b.mode=d};function ai(b,c,d,e,f){var g=f in e,h=!0,k;for(k in c){var m=f+"."+k,n=g?e[f]:d[k];g||k in d?void 0===c[k]?void 0===n||g?delete b[k]:b[k]=wb(n):n.constructor==Object&&c[k]&&c[k].constructor==Object?(b[k]||(b[k]=wb(n)),m=ai(b[k],c[k],n,e,m),h=h&&m):typeof c[k]!=typeof n||null==c[k]||"function"!=typeof c[k]&&c[k].constructor!=n.constructor?(A.Ob("Invalid config, wrong type for "+m),h=!1):("function"==typeof d[k]&&d[k].length!=c[k].length&&A.qa("Unexpected number of arguments for "+m),b[k]=c[k]):(A.Ob("Invalid config, unrecognized key "+
m),h=!1)}return h}z("shaka.util.ConfigUtils.mergeConfigObjects",ai);function bi(b,c){for(var d={},e=d,f=0,g=0;;){f=b.indexOf(".",f);if(0>f)break;if(0==f||"\\"!=b[f-1])g=b.substring(g,f).replace(/\\\./g,"."),e[g]={},e=e[g],g=f+1;f+=1}e[b.substring(g).replace(/\\\./g,".")]=c;return d}z("shaka.util.ConfigUtils.convertToConfigObject",bi);function ci(){}z("shaka.util.PlayerConfiguration",ci);
function di(){var b=5E5,c=Infinity;navigator.connection&&(navigator.connection.downlink&&(b=1E6*navigator.connection.downlink),navigator.connection.saveData&&(c=360));var d={retryParameters:kb(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Rc,fairPlayTransform:!0,updateExpirationTime:1},e={retryParameters:kb(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(b){if(b)return null},clockSyncUri:"",ignoreDrmInfo:!1,
xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},f={retryParameters:kb(),failureCallback:function(b){A.error("Unhandled streaming error",b);return[b]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,
forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};if(kc("Web0S")||kc("Tizen")||kc("CrKey"))f.stallSkip=0;var g={trackSelectionCallback:function(b){return u(function n(){return y(n,function(c){switch(c.l){case 1:return c["return"](b)}})})},progressCallback:function(b,c){return[b,c]},usePersistentLicense:!0},h={drm:d,manifest:e,streaming:f,offline:g,abrFactory:P,abr:{enabled:!0,defaultBandwidthEstimate:b,switchInterval:8,bandwidthUpgradeTarget:.85,
bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:c,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},
playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null}};g.trackSelectionCallback=function(b){return u(function n(){return y(n,function(c){switch(c.l){case 1:return c["return"](ei(b,h.preferredAudioLanguage))}})})};return h}
function fi(b,c,d){var e={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return ai(b,c,d||di(),e,"")}ci.mergeConfigObjects=fi;
function ei(b,c){var d=b.filter(function(b){return"variant"==b.type}),e=[],f=ee(c,d.map(function(b){return b.language}));f&&(e=d.filter(function(b){return O(b.language)==f}));0==e.length&&(e=d.filter(function(b){return b.primary}));0==e.length&&(1<(new Set(d.map(function(b){return b.language}))).size&&A.j("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),e=d);var g=e.filter(function(b){return b.height&&480>=b.height});g.length&&
(g.sort(function(b,c){return c.height-b.height}),e=g.filter(function(b){return b.height==g[0].height}));d=[];if(e.length){var h=Math.floor(e.length/2);e.sort(function(b,c){return b.bandwidth-c.bandwidth});d.push(e[h])}e=q(b);for(h=e.next();!h.done;h=e.next())h=h.value,"text"==h.type&&d.push(h);return d};function gi(){this.a=null;this.b=[]}function hi(b,c){if(null==b.a)b.a={timestamp:Date.now()/1E3,state:c,duration:0};else{var d=Date.now()/1E3;b.a.duration=d-b.a.timestamp;b.a.state!=c&&(b.b.push(b.a),b.a={timestamp:d,state:c,duration:0})}}function ii(b,c){var d=0;b.a&&b.a.state==c&&(d+=b.a.duration);for(var e=q(b.b),f=e.next();!f.done;f=e.next())f=f.value,d+=f.state==c?f.duration:0;return d}
function ji(b){function c(b){return{timestamp:b.timestamp,state:b.state,duration:b.duration}}for(var d=[],e=q(b.b),f=e.next();!f.done;f=e.next())d.push(c(f.value));b.a&&d.push(c(b.a));return d};function ki(){this.b=this.c=null;this.a=[]};function li(){this.f=this.u=this.h=this.b=this.i=this.m=this.o=this.g=this.w=NaN;this.a=new gi;this.c=new ki};function Y(b,c){var d=this;vb.call(this);this.i=mi;this.a=null;this.ib=!1;this.g=new K;this.kc=this.m=this.fb=this.c=this.u=this.f=this.Nb=this.C=this.Kb=this.M=this.kb=this.o=this.L=this.h=this.Z=null;this.md=1E9;this.Lb=new Set;this.mb=!0;this.na=null;this.kd=!1;this.gd=0;this.ma=null;this.ka=new Vf;this.b=ni(this);this.Mb={width:Infinity,height:Infinity};this.w=null;this.zb=new dg(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount);this.la=this.b.preferredTextLanguage;
this.gb=this.b.preferredTextRole;this.lc=[];c&&c(this);this.Z=oi(this);this.g.B(window,"online",function(){d.Sc()});this.S={name:"detach"};this.$={name:"attach"};this.Ea={name:"unload"};this.rc={name:"manifest-parser"};this.oc={name:"manifest"};this.jb={name:"media-source"};this.jc={name:"drm-engine"};this.ea={name:"load"};this.sc={name:"src-equals-drm-engine"};this.lb={name:"src-equals"};var e=new Map;e.set(this.$,function(b,c){return rb(pi(d,b,c))});e.set(this.S,function(b){b.s&&(d.g.ja(b.s,"error"),
b.s=null);d.a=null;b=Promise.resolve();return rb(b)});e.set(this.Ea,function(b){return rb(qi(d,b))});e.set(this.jb,function(b){b=ri(d,b);return rb(b)});e.set(this.rc,function(b,c){var e=si(d,b,c);return rb(e)});e.set(this.oc,function(b){return ti(d,b)});e.set(this.jc,function(){var b=ui(d);return rb(b)});e.set(this.ea,function(b,c){return rb(vi(d,b,c))});e.set(this.sc,function(b){b=wi(d,b);return rb(b)});e.set(this.lb,function(b,c){return xi(d,b,c)});this.Pa=new Sh(this.S,{me:function(b,c,e,k){var f=
null;b==d.S&&(f=e==d.S?d.S:d.$);b==d.$&&(f=e==d.S||c.s!=k.s?d.S:e==d.$?d.$:e==d.jb||e==d.ea?d.jb:e==d.lb?d.sc:null);b==d.jb&&(f=e==d.ea&&c.s==k.s?d.rc:d.Ea);b==d.rc&&(f=yi(d.ea,d.oc,d.Ea,e,c,k));b==d.oc&&(f=yi(d.ea,d.jc,d.Ea,e,c,k));b==d.jc&&(f=yi(d.ea,d.ea,d.Ea,e,c,k));b==d.sc&&(f=e==d.lb&&c.s==k.s?d.lb:d.Ea);if(b==d.ea||b==d.lb)f=d.Ea;b==d.Ea&&(f=k.s&&c.s==k.s?d.$:d.S);return f},Ud:function(b,c,h){d.dispatchEvent(new H("onstatechange",{state:b.name}));return e.get(b)(c,h)},handleError:function(b,
c){return u(function k(){return y(k,function(e){switch(e.l){case 1:return A.j("The walker saw an error:"),c instanceof D?A.j("Error Code:",c.code):(A.j("Error Message:",c.message),A.j("Error Stack:",c.stack)),v(e,qi(d,b),2);case 2:return e["return"](b.s?d.$:d.S)}})})},ye:function(b){d.dispatchEvent(new H("onstateidle",{state:b.name}))}});b&&this.Ab(b,!0)}Oa(Y,vb);z("shaka.Player",Y);
Y.prototype.destroy=function(){var b=this;return u(function d(){var e;return y(d,function(d){switch(d.l){case 1:if(b.i==zi)return d["return"]();b.i=zi;e=Wh(b.Pa,function(){return{node:b.S,payload:Th(),Ta:!1}});return v(d,new Promise(function(d){e.tb=function(){A.info("Preparing to destroy walker...")};e.bc=function(){d();b.dispatchEvent(new H("loaded"))};e.Xa=function(){d()};e.onError=function(){d()};e.cc=function(){d()}}),2);case 2:return v(d,b.Pa.destroy(),3);case 3:b.g&&(b.g.release(),b.g=null);
b.kc=null;b.m=null;b.b=null;if(!b.Z){d.l=0;break}return v(d,b.Z.destroy(),5);case 5:b.Z=null,w(d)}})})};Y.prototype.destroy=Y.prototype.destroy;Y.version="2.5.17-yandex-patched-custom-build-issue-3056-5-g9ffc42d3-dirty";var Ai=["","5"];Sf=new function(b){this.a=b;this.c=Tf;this.b=Uf}(new Qf(Number(Ai[0]),Number(Ai[1])));var Bi=["output-restricted","internal-error"],Ci={};Y.registerSupportPlugin=function(b,c){Ci[b]=c};
Y.isBrowserSupported=function(){if(!(window.Promise&&window.Uint8Array&&Array.prototype.forEach))return!1;var b=lc();return b&&12>b||!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)?!1:fc()?!0:gc("application/x-mpegurl")};
Y.probeSupport=function(){return Xc().then(function(b){for(var c=W.Qe(),d={},e=q('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),f=
e.next();!f.done;f=e.next()){f=f.value;d[f]=fc()?Hd(f)?!0:MediaSource.isTypeSupported(f)||md(f):gc(f);var g=f.split(";")[0];d[g]=d[g]||d[f]}b={manifest:c,media:d,drm:b};for(var h in Ci)b[h]=Ci[h]();return b})};Y.prototype.Ab=function(b,c){c=void 0===c?!0:c;if(this.i==zi)return Promise.reject(Di());var d=Th();d.s=b;fc()||(c=!1);var e=c?this.jb:this.$,f=Wh(this.Pa,function(){return{node:e,payload:d,Ta:!1}});f.tb=function(){return A.info("Starting attach...")};return Ei(f)};Y.prototype.attach=Y.prototype.Ab;
Y.prototype.detach=function(){var b=this;if(this.i==zi)return Promise.reject(Di());var c=Wh(this.Pa,function(){return{node:b.S,payload:Th(),Ta:!1}});c.tb=function(){return A.info("Starting detach...")};return Ei(c)};Y.prototype.detach=Y.prototype.detach;
Y.prototype.lf=function(b){var c=this;b=void 0===b?!0:b;if(this.i==zi)return Promise.reject(Di());fc()||(b=!1);var d=Th(),e=Wh(this.Pa,function(e){var f=e.s&&b?c.jb:e.s?c.$:c.S;d.s=e.s;return{node:f,payload:d,Ta:!1}});e.tb=function(){return A.info("Starting unload...")};return Ei(e)};Y.prototype.unload=Y.prototype.lf;
Y.prototype.load=function(b,c,d){if(this.i==zi)return Promise.reject(Di());this.dispatchEvent(new H("loading"));var e=Th();e.uri=b;e.Yc=Date.now()/1E3;d&&"string"!=typeof d&&(Rf("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),e.ya=function(){return new d});d&&"string"==typeof d&&(e.mimeType=d);void 0!==c&&(e.startTime=c);var f=Fi(this,e)?this.lb:this.ea,g=Wh(this.Pa,function(b){if(null==b.s)return null;e.s=b.s;return{node:f,payload:e,Ta:!0}});g.tb=
function(){return A.info("Starting load of "+b+"...")};return new Promise(function(b,c){g.cc=function(){return c(new D(2,7,7002))};g.bc=function(){return b()};g.Xa=function(){return c(Di())};g.onError=function(b){return c(b)}})};Y.prototype.load=Y.prototype.load;
function Fi(b,c){if(c.ya)return!1;if(!fc())return!0;var d=c.mimeType,e=c.uri||"";d||(d={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[W.getExtension(e)]);return d?""==(c.s||hc()).canPlayType(d)?!1:W.isSupported(e,d)?jc()&&b.b.streaming.useNativeHlsOnSafari:!0:!1}
function pi(b,c,d){null==c.s&&(c.s=d.s,b.g.B(c.s,"error",function(){var c=Gi(b);c&&b.Ma(c)}));b.a=c.s;return Promise.resolve()}
function qi(b,c){return u(function e(){var f;return y(e,function(e){switch(e.l){case 1:return b.i!=zi&&(b.i=mi),f=b.lc.map(function(b){return b()}),b.lc=[],v(e,Promise.all(f),2);case 2:b.dispatchEvent(new H("unloading"));c.ya=null;c.mimeType=null;c.startTime=null;c.uri=null;c.s&&(b.g.ja(c.s,"loadedmetadata"),b.g.ja(c.s,"playing"),b.g.ja(c.s,"pause"),b.g.ja(c.s,"ended"),b.g.ja(c.s,"ratechange"));b.kb&&(b.kb.release(),b.kb=null);b.Kb&&(b.Kb.stop(),b.Kb=null);if(!b.u){e.l=3;break}return v(e,b.u.stop(),
4);case 4:b.u=null;case 3:if(!b.m){e.l=5;break}return v(e,b.m.stop(),5);case 5:if(!b.f){e.l=7;break}return v(e,b.f.destroy(),8);case 8:b.f=null;case 7:b.M&&(b.M.release(),b.M=null);b.o&&(b.o.release(),b.o=null);if(!b.L){e.l=9;break}return v(e,b.L.destroy(),10);case 10:b.L=null;case 9:if(!c.s||!c.s.src){e.l=11;break}return v(e,new Promise(function(b){return(new B(b)).V(.1)}),12);case 12:c.s.removeAttribute("src"),c.s.load();case 11:if(!b.h){e.l=13;break}return v(e,b.h.destroy(),14);case 14:b.h=null;
case 13:b.ka.a.clear(),b.fb=null,b.C=null,b.Lb.clear(),b.c=null,b.w=null,b.mc=null,b.mb=!0,Hi(b),w(e)}})})}function ri(b,c){return u(function e(){var f,g,h,k;return y(e,function(e){switch(e.l){case 1:return f=window.muxjs?new bd:new cd,g=b.b.textDisplayFactory,h=new g,b.mc=g,k=new Ld(c.s,f,h),v(e,k.u,2);case 2:b.L=k,w(e)}})})}
function si(b,c,d){return u(function f(){var g,h,k,m;return y(f,function(f){switch(f.l){case 1:c.ya=d.ya;c.mimeType=d.mimeType;c.uri=d.uri;g=c.uri;h=b.Z;b.fb=g;if(c.ya){b.u=c.ya();f.l=2;break}k=b;return v(f,W.create(g,h,b.b.manifest.retryParameters,c.mimeType),3);case 3:k.u=f.N;case 2:m=wb(b.b.manifest),d.s&&"AUDIO"===d.s.nodeName&&(m.disableVideo=!0),b.u.configure(m),w(f)}})})}
function ti(b,c){var d=c.uri,e=b.Z;b.Nb=new Tg(function(){return b.Ed()});Ug(b.Nb,function(c){Ii(b,"timelineregionadded",c)});var f={networkingEngine:e,filterNewPeriod:function(c){return b.uc(c)},filterAllPeriods:function(c){return Ji(b,c)},onTimelineRegionAdded:function(c){var d=b.Nb;a:{var e=q(d.a);for(var f=e.next();!f.done;f=e.next())if(f=f.value,f.schemeIdUri==c.schemeIdUri&&f.id==c.id&&f.startTime==c.startTime&&f.endTime==c.endTime){e=f;break a}e=null}null==e&&(d.a.add(c),d.b(c))},onEvent:function(c){return b.dispatchEvent(c)},
onError:function(c){return b.Ma(c)}};return new G(Promise.resolve().then(function(){return u(function h(){var c;return y(h,function(e){switch(e.l){case 1:return c=b,v(e,b.u.start(d,f),2);case 2:c.c=e.N;b.dispatchEvent(new H("manifestparsed"));if(0==b.c.periods.length)throw new D(2,4,4014);Ki(b.c.periods);w(e)}})})}),function(){A.info("Aborting parser step...");return b.u.stop()})}
function ui(b){return u(function d(){return y(d,function(d){switch(d.l){case 1:return b.h=Li(b,{Zb:b.Z,onError:function(d){b.Ma(d)},td:function(d){Mi(b,d)},onExpirationUpdated:function(d,e){Ni(b,d,e)},onEvent:function(d){b.dispatchEvent(d)}}),b.h.configure(b.b.drm),v(d,yc(b.h,xg(b.c.periods),b.c.offlineSessionIds),2);case 2:Ji(b,b.c.periods),w(d)}})})}
function vi(b,c,d){return u(function f(){var g,h,k,m,n,p,r,t,x,F;return y(f,function(f){switch(f.l){case 1:return c.startTime=d.startTime,g=c.s,h=c.uri,b.fb=h,b.M=new Bg({Ub:function(){return c.s.playbackRate},Wc:function(b){c.s.playbackRate=b},pd:function(b){c.s.currentTime+=b}}),b.w=new li,k=function(){return Oi(b)},m=function(){return Pi(b)},b.g.B(g,"playing",k),b.g.B(g,"pause",k),b.g.B(g,"ended",k),b.g.B(g,"ratechange",m),n=b.b.abrFactory,b.m&&b.kc==n||(b.kc=n,b.m=new n,b.m.configure(b.b.abr)),
Qi(b,b.c.periods),b.zb=new dg(b.b.preferredAudioLanguage,b.b.preferredVariantRole,b.b.preferredAudioChannelCount),b.la=b.b.preferredTextLanguage,Ri(b.c.presentationTimeline,b.b.playRangeStart,b.b.playRangeEnd),v(f,b.h.Ab(g),2);case 2:return b.m.init(function(c,d,f){d=void 0===d?!1:d;f=void 0===f?0:f;A.debug("switch_");a:{var g=q(b.c.periods);for(var h=g.next();!h.done;h=g.next())if(h=h.value,h.variants.includes(c)){g=h;break a}g=null}Si(b,g,c,!0);b.f&&oh(b.f,c,d,f)&&Ti(b)}),b.o=Ui(b,c.startTime),
b.kb=Vi(b),p=Math.max(b.c.minBufferTime,b.b.streaming.rebufferingGoal),Wi(b,p),b.f=Xi(b),b.f.configure(b.b.streaming),fe(b.c,b.b.preferredAudioChannelCount),b.i=Yi,b.dispatchEvent(new H("streaming")),v(f,b.f.start(),3);case 3:b.b.streaming.startAtSegmentBoundary&&(r=b.o.g(),t=Zi(b,r),b.o.o(t)),b.c.periods.forEach(b.uc.bind(b)),$i(b),Ti(b),x=aj(b)||b.c.periods[0],F=x.variants.some(function(b){return b.primary}),b.b.preferredAudioLanguage||F||A.j("No preferred audio language set.  We will choose an arbitrary language initially"),
bj(b,x.variants),b.g.oa(g,"loadedmetadata",function(){b.w.b=Date.now()/1E3-d.Yc}),w(f)}})})}
function wi(b,c){return u(function e(){var f,g;return y(e,function(e){switch(e.l){case 1:return f=jd,b.h=Li(b,{Zb:b.Z,onError:function(c){b.Ma(c)},td:function(c){Mi(b,c)},onExpirationUpdated:function(c,e){Ni(b,c,e)},onEvent:function(c){b.dispatchEvent(c)}}),b.h.configure(b.b.drm),g={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,
presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:f.cd,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},v(e,yc(b.h,[g],[]),2);case 2:return v(e,b.h.Ab(c.s),0)}})})}
function xi(b,c,d){function e(){return Oi(b)}c.uri=d.uri;c.startTime=d.startTime;b.fb=c.uri;b.w=new li;b.o=new Mg(c.s);null!=c.startTime&&b.o.o(c.startTime);b.M=new Bg({Ub:function(){return c.s.playbackRate},Wc:function(b){c.s.playbackRate=b},pd:function(b){c.s.currentTime+=b}});Wi(b,b.b.streaming.rebufferingGoal);b.g.B(c.s,"playing",e);b.g.B(c.s,"pause",e);b.g.B(c.s,"ended",e);b.g.B(c.s,"ratechange",function(){return Pi(b)});"none"!=b.a.preload&&b.g.oa(c.s,"loadedmetadata",function(){b.w.b=Date.now()/
1E3-d.Yc});b.a.audioTracks&&(b.g.B(b.a.audioTracks,"addtrack",function(){return $i(b)}),b.g.B(b.a.audioTracks,"removetrack",function(){return $i(b)}),b.g.B(b.a.audioTracks,"change",function(){return $i(b)}));if(b.a.textTracks){var f=b.a.textTracks;b.g.B(f,"addtrack",function(){return $i(b)});b.g.B(f,"removetrack",function(){return $i(b)});b.g.B(f,"change",function(){return $i(b)})}c.s.src=c.uri;(kc("Tizen")||kc("Web0S"))&&c.s.load();b.i=cj;b.dispatchEvent(new H("streaming"));var g=new E;Dg(b.a,HTMLMediaElement.HAVE_METADATA,
b.g,function(){g.resolve()});var h=!1;b.lc.push(function(){h=!0});Dg(b.a,HTMLMediaElement.HAVE_CURRENT_DATA,b.g,function(){return u(function m(){var c;return y(m,function(d){switch(d.l){case 1:if(h)return d["return"]();dj(b);c=ej(b);if(c.find(function(b){return"disabled"!=b.mode})){d.l=2;break}return v(d,new Promise(function(c){b.g.oa(b.a.textTracks,"change",c);(new B(c)).V(1)}),2);case 2:if(h)return d["return"]();fj(b);w(d)}})})});b.a.error?g.reject(Gi(b)):"none"==b.a.preload&&(A.qa('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),
g.resolve());b.g.oa(b.a,"error",function(){g.reject(Gi(b))});return new G(g,function(){g.reject(new D(2,7,7001));return Promise.resolve()})}function dj(b){var c=b.b.preferredAudioLanguage;if(""!=c){b.Tc(c);var d=b.b.preferredVariantRole;""!=d&&b.Tc(c,d)}}function fj(b){var c=b.b.preferredTextLanguage;if(""!=c){b.Uc(c);var d=b.b.preferredTextRole;""!=d&&b.Uc(c,d)}}
function Ki(b){function c(b){return b.video&&b.audio||b.video&&b.video.codecs.includes(",")}b.some(function(b){return b.variants.some(c)})&&(A.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),b.forEach(function(b){b.variants=b.variants.filter(c)}))}function Li(b,c){return new tc(c,b.b.drm.updateExpirationTime)}function oi(b){return new J(function(c,d){b.m&&b.m.segmentDownloaded(c,d)})}
function Ui(b,c){return new Ng(b.a,b.c,b.b.streaming,c,function(){b.kb&&wg(b.kb,!0);b.f&&vh(b.f);b.C&&gj(b)},function(c){return b.dispatchEvent(c)})}function Vi(b){var c=new zg(b.c);Ag(c,function(){$i(b)});var d=new Vg(b.Nb);Zg(d,function(c){Ii(b,"timelineregionenter",c)},function(c){Ii(b,"timelineregionexit",c)},function(c,d){d||(Ii(b,"timelineregionenter",c),Ii(b,"timelineregionexit",c))});var e=new vg(b.a);e.a.add(c);e.a.add(d);return e}
function Wi(b,c){b.C=new hg;b.C.a=jg;kg(b.C,c,Math.min(.5,c/2));Hi(b);b.Kb=(new B(function(){gj(b)})).Ca(.25)}function gj(b){switch(b.i){case cj:var c=b.a.ended?!0:dd(b.a.buffered)>=b.a.duration-1;break;case Yi:a:if(b.a.ended||Pd(b.L))c=!0;else{if(b.c.presentationTimeline.da()){var d=b.c.presentationTimeline.pb();if(dd(b.a.buffered)>=d){c=!0;break a}}c=!1}break;default:c=!1}var e=fd(b.a.buffered,b.a.currentTime);d=b.C;var f=c,g=d.b.get(d.a);c=d.a;e=f||e>=g?ig:jg;d.a=e;c!=e&&Hi(b)}
function Xi(b){return new $g(b.c,{Sa:function(){return b.o.g()},getBandwidthEstimate:function(){return b.m.getBandwidthEstimate()},I:b.L,Zb:b.Z,sd:b.xe.bind(b),rd:b.Pd.bind(b),onError:b.Ma.bind(b),onEvent:function(c){return b.dispatchEvent(c)},Ae:b.Be.bind(b),Lc:b.Fe.bind(b)})}Y.prototype.configure=function(b,c){2==arguments.length&&"string"==typeof b&&(b=bi(b,c));var d=fi(this.b,b,ni(this));hj(this);return d};Y.prototype.configure=Y.prototype.configure;
function hj(b){if(b.u){var c=wb(b.b.manifest);b.a&&"AUDIO"===b.a.nodeName&&(c.disableVideo=!0);b.u.configure(c)}b.h&&b.h.configure(b.b.drm);if(b.f){b.f.configure(b.b.streaming);try{b.c.periods.forEach(b.uc.bind(b))}catch(g){b.Ma(g)}var d=eh(b.f),e=gh(b.f);c=aj(b);d=ye(d,e,c.variants);b.m&&d&&d.allowedByApplication&&d.allowedByKeySystem?bj(b,c.variants):(A.debug("Choosing new streams after changing configuration"),ij(b,c))}if(b.L&&(c=b.b.textDisplayFactory,b.mc!=c)){d=new c;e=b.L;var f=e.g;e.g=d;f&&
(d.setTextVisibility(f.isTextVisible()),f.destroy());e.a&&(e.a.c=d);b.mc=c;b.f&&(c=b.f,(d=c.b.get("text"))&&nh(c,d.stream,!0,0,!0))}b.m&&(b.m.configure(b.b.abr),b.b.abr.enabled&&!b.mb?b.m.enable():b.m.disable(),jj(b));b.C&&(c=b.b.streaming.rebufferingGoal,b.c&&(c=Math.max(c,b.c.minBufferTime)),kg(b.C,c,Math.min(.5,c/2)))}Y.prototype.getConfiguration=function(){var b=ni(this);fi(b,this.b,ni(this));return b};Y.prototype.getConfiguration=Y.prototype.getConfiguration;
Y.prototype.We=function(){for(var b in this.b)delete this.b[b];fi(this.b,ni(this),ni(this));hj(this)};Y.prototype.resetConfiguration=Y.prototype.We;Y.prototype.ee=function(){return this.i};Y.prototype.getLoadMode=Y.prototype.ee;Y.prototype.je=function(){return this.a};Y.prototype.getMediaElement=Y.prototype.je;Y.prototype.le=function(){return this.Z};Y.prototype.getNetworkingEngine=Y.prototype.le;Y.prototype.Yd=function(){return this.fb};Y.prototype.getAssetUri=Y.prototype.Yd;
Y.prototype.he=function(){Rf("getManifestUri",'Please use "getAssetUri" instead.');return this.fb};Y.prototype.getManifestUri=Y.prototype.he;Y.prototype.da=function(){return this.c?this.c.presentationTimeline.da():this.a&&this.a.src?Infinity==this.a.duration:!1};Y.prototype.isLive=Y.prototype.da;Y.prototype.sb=function(){return this.c?this.c.presentationTimeline.sb():!1};Y.prototype.isInProgress=Y.prototype.sb;
Y.prototype.ue=function(){if(this.c){if(!this.c.periods.length)return!1;var b=this.c.periods[0].variants;return b.length?!b[0].video:!1}return this.a&&this.a.src?this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight:!1};Y.prototype.isAudioOnly=Y.prototype.ue;Y.prototype.Ed=function(){if(this.c){var b=this.c.presentationTimeline;return{start:b.ob(),end:b.za()}}return this.a&&this.a.src&&(b=this.a.seekable,b.length)?{start:b.start(0),end:b.end(b.length-1)}:{start:0,end:0}};
Y.prototype.seekRange=Y.prototype.Ed;Y.prototype.keySystem=function(){return Oc(this.drmInfo())};Y.prototype.keySystem=Y.prototype.keySystem;Y.prototype.drmInfo=function(){return this.h?this.h.a:null};Y.prototype.drmInfo=Y.prototype.drmInfo;Y.prototype.zc=function(){return this.h?this.h.zc():Infinity};Y.prototype.getExpiration=Y.prototype.zc;Y.prototype.od=function(){return this.C?this.C.a==jg:!1};Y.prototype.isBuffering=Y.prototype.od;
Y.prototype.ne=function(){if(this.M){var b=this.M;b=b.f?0:b.c}else b=0;return b};Y.prototype.getPlaybackRate=Y.prototype.ne;Y.prototype.kf=function(b){0==b?A.qa("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.M&&this.M.set(b),this.i==Yi&&mh(this.f,1<Math.abs(b)))};Y.prototype.trickPlay=Y.prototype.kf;Y.prototype.Qd=function(){this.i==cj&&this.M.set(1);this.i==Yi&&(this.M.set(1),mh(this.f,!1))};Y.prototype.cancelTrickPlay=Y.prototype.Qd;
Y.prototype.Cc=function(){if(this.c&&this.o){for(var b=kj(this),c=[],d=q(lj(this)),e=d.next();!e.done;e=d.next()){e=e.value;var f=pe(e);f.active=e==b;c.push(f)}return c}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(b){return te(b)}):[]};Y.prototype.getVariantTracks=Y.prototype.Cc;
Y.prototype.qb=function(){if(this.c&&this.o){for(var b=mj(this),c=[],d=q(nj(this)),e=d.next();!e.done;e=d.next()){e=e.value;var f=qe(e);f.active=e==b;c.push(f)}return c}return this.a&&this.a.src&&this.a.textTracks?ej(this).map(function(b){var c=ue(b);c.active="disabled"!=b.mode;c.type="text";c.originalTextId=b.id;"captions"==b.kind&&(c.mimeType="application/cea-608");b.kind&&(c.roles=[b.kind]);return c}):[]};Y.prototype.getTextTracks=Y.prototype.qb;
Y.prototype.Vc=function(b){if(this.c&&this.f){var c=aj(this),d=c.textStreams.find(function(c){return c.id==b.id});d?(oj(this,c,d,!1),pj(this,d),this.la=d.language):A.error("No stream with id",b.id)}else if(this.a&&this.a.src&&this.a.textTracks){c=ej(this);c=q(c);for(d=c.next();!d.done;d=c.next())d=d.value,re(d)==b.id?d.mode=this.ib?"showing":"hidden":d.mode="disabled";qj(this)}};Y.prototype.selectTextTrack=Y.prototype.Vc;
Y.prototype.Ze=function(){Rf("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var b=this.qb().filter(function(b){return"application/cea-608"==b.mimeType});0<b.length?this.Vc(b[0]):A.j("Unable to find the text track embedded in the video.")};Y.prototype.selectEmbeddedTextTrack=Y.prototype.Ze;
Y.prototype.rf=function(){Rf("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var b=this.qb().filter(function(b){return b.active})[0];return b?"application/cea-608"==b.mimeType:!1};Y.prototype.usingEmbeddedTextTrack=Y.prototype.rf;
Y.prototype.$e=function(b,c,d){d=void 0===d?0:d;if(this.c&&this.f){var e=aj(this);this.b.abr.enabled&&A.qa("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var f=e.variants.find(function(c){return c.id==b.id});f?ve(f)?(Si(this,e,f,!1),rj(this,f,c,d),this.zb=new cg(f),bj(this,e.variants)):A.error("Unable to switch to restricted track",b.id):A.error("No variant with id",b.id)}else if(this.a&&
this.a.audioTracks){c=Array.from(this.a.audioTracks);c=q(c);for(d=c.next();!d.done;d=c.next())d=d.value,re(d)==b.id&&(d.enabled=!0);sj(this)}};Y.prototype.selectVariantTrack=Y.prototype.$e;Y.prototype.$d=function(){return tj(this.Cc())};Y.prototype.getAudioLanguagesAndRoles=Y.prototype.$d;Y.prototype.se=function(){return tj(this.qb())};Y.prototype.getTextLanguagesAndRoles=Y.prototype.se;Y.prototype.Zd=function(){return Array.from(uj(this.Cc()))};Y.prototype.getAudioLanguages=Y.prototype.Zd;
Y.prototype.re=function(){return Array.from(uj(this.qb()))};Y.prototype.getTextLanguages=Y.prototype.re;Y.prototype.Tc=function(b,c){if(this.c&&this.o){var d=aj(this);this.zb=new dg(b,c||"",0,"","audio");vj(this,d)}else if(this.a&&this.a.audioTracks){var e=Array.from(this.a.audioTracks);d=O(b);e=q(e);for(var f=e.next();!f.done;f=e.next()){f=f.value;var g=te(f);O(g.language)!=d||c&&!g.roles.includes(c)||(f.enabled=!0)}sj(this)}};Y.prototype.selectAudioLanguage=Y.prototype.Tc;
Y.prototype.Uc=function(b,c){if(this.c&&this.o){var d=aj(this);this.la=b;this.gb=c||"";var e=we(d.textStreams,this.la,this.gb)[0]||null;e&&(oj(this,d,e,!1),(this.b.streaming.alwaysStreamText||this.Xb())&&pj(this,e))}else{var f=O(b);(d=this.qb().filter(function(b){return O(b.language)==f&&(!c||b.roles.includes(c))})[0])&&this.Vc(d)}};Y.prototype.selectTextLanguage=Y.prototype.Uc;
Y.prototype.af=function(b){if(this.c&&this.o){for(var c=aj(this),d=null,e=q(lj(this)),f=e.next();!f.done;f=e.next())if(f=f.value,f.audio.label==b){d=f;break}null==d?A.j("No variants were found with label: "+b+". Ignoring the request to switch."):(this.zb=new dg(d.language,"",0,b),vj(this,c))}};Y.prototype.selectVariantsByLabel=Y.prototype.af;
Y.prototype.Xb=function(){var b=this.ib;return this.L?this.L.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?ej(this).some(function(b){return"showing"==b.mode}):b};Y.prototype.isTextTrackVisible=Y.prototype.Xb;function ej(b){return Array.from(b.a.textTracks).filter(function(b){return"metadata"!=b.kind&&"Shaka Player TextTrack"!=b.label})}
Y.prototype.ef=function(b){var c=this;return u(function e(){var f,g,h,k,m,n;return y(e,function(e){switch(e.l){case 1:f=c.ib;g=!!b;if(f==g)return e["return"]();c.ib=g;if(c.i!=Yi){if(c.a&&c.a.src&&c.a.textTracks){h=ej(c);for(var p=q(h),t=p.next();!t.done;t=p.next())k=t.value,"disabled"!=k.mode&&(k.mode=g?"showing":"hidden")}e.l=2;break}c.L.g.setTextVisibility(g);if(c.b.streaming.alwaysStreamText){e.l=2;break}if(!g){lh(c.f);e.l=2;break}if(fh(c.f,"text")){e.l=2;break}m=aj(c);n=we(m.textStreams,c.la,
c.gb);if(!(0<n.length)){e.l=2;break}return v(e,hh(c.f,n[0]),2);case 2:wj(c),w(e)}})})};Y.prototype.setTextTrackVisibility=Y.prototype.ef;
Y.prototype.oe=function(){if(!this.da())return A.j("getPlayheadTimeAsDate is for live streams!"),null;var b=this.Pa.f,c=0;if(this.o)c=this.o.g();else if(b){if(null==b.startTime)return new Date;c=b.startTime}if(this.c)return new Date(1E3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate)return b=this.a.getStartDate(),isNaN(b.getTime())?(A.j("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(b.getTime()+1E3*c);A.j("No way to get playhead time as Date!");
return null};Y.prototype.getPlayheadTimeAsDate=Y.prototype.oe;Y.prototype.qe=function(){if(!this.da())return A.j("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1E3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var b=this.a.getStartDate();return isNaN(b.getTime())?(A.j("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):b}A.j("No way to get presentation start time as Date!");return null};
Y.prototype.getPresentationStartTimeAsDate=Y.prototype.qe;Y.prototype.xc=function(){var b={total:[],audio:[],video:[],text:[]};this.i==cj&&(b.total=gd(this.a.buffered));this.i==Yi&&this.L.xc(b);return b};Y.prototype.getBufferedInfo=Y.prototype.xc;
Y.prototype.getStats=function(){if(this.i!=Yi&&this.i!=cj)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};Oi(this);var b=this.a;if(b.getVideoPlaybackQuality){b=b.getVideoPlaybackQuality();var c=this.w,d=Number(b.totalVideoFrames);c.o=Number(b.droppedVideoFrames);c.m=d;this.w.i=Number(b.corruptedVideoFrames)}this.h?
(b=this.h,b=b.M?b.M:NaN):b=NaN;this.w.h=b;if(this.i==Yi){if(b=kj(this))this.w.u=b.bandwidth;b&&b.video&&(c=this.w,d=b.video.height||NaN,c.w=b.video.width||NaN,c.g=d);b=this.m.getBandwidthEstimate();this.w.f=b}var e=this.w;b=e.w;c=e.g;d=e.u;var f=e.m,g=e.o,h=e.i,k=e.f,m=e.b,n=ii(e.a,"playing"),p=ii(e.a,"paused"),r=ii(e.a,"buffering"),t=e.h,x=ji(e.a),F=[];e=q(e.c.a);for(var C=e.next();!C.done;C=e.next())C=C.value,F.push({timestamp:C.timestamp,id:C.id,type:C.type,fromAdaptation:C.fromAdaptation,bandwidth:C.bandwidth});
return{width:b,height:c,streamBandwidth:d,decodedFrames:f,droppedFrames:g,corruptedFrames:h,estimatedBandwidth:k,loadLatency:m,playTime:n,pauseTime:p,bufferingTime:r,licenseTime:t,stateHistory:x,switchHistory:F}};Y.prototype.getStats=Y.prototype.getStats;
Y.prototype.addTextTrack=function(b,c,d,e,f,g){var h=this;return u(function m(){var n,p,r,t,x,F,C,I,R;return y(m,function(m){switch(m.l){case 1:if(h.i==cj)throw A.error("Cannot add text when loaded with src="),Error("State error!");if(h.i!=Yi)throw A.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");n=aj(h);p=jd;r=h.c.periods.indexOf(n);t=r+1;x=t>=h.c.periods.length?h.c.presentationTimeline.ba():h.c.periods[t].startTime;F=x-n.startTime;if(Infinity==
F)throw new D(1,4,4033);C=new U(1,0,F,function(){return[b]},0,null);I={id:h.md++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(b){return 1==b?C:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:e,codecs:f||"",kind:d,encrypted:!1,keyId:null,language:c,label:g||null,type:p.xa,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,
audioSamplingRate:null,closedCaptions:null};h.Lb.add(I);n.textStreams.push(I);return v(m,hh(h.f,I),2);case 2:return(R=fh(h.f,"text"))&&Wf(h.ka,n,R),h.Lb["delete"](I),A.debug("Choosing new streams after adding a text stream"),ij(h,n),$i(h),m["return"](qe(I))}})})};Y.prototype.addTextTrack=Y.prototype.addTextTrack;Y.prototype.df=function(b,c){this.Mb.width=b;this.Mb.height=c};Y.prototype.setMaxHardwareResolution=Y.prototype.df;
Y.prototype.Sc=function(){if(this.i==Yi){var b=this.f;if(b.f)A.error("Unable to retry after StreamingEngine is destroyed!"),b=!1;else if(b.o)A.error("Unable to retry after StreamingEngine encountered a fatal error!"),b=!1;else{for(var c=q(b.b.values()),d=c.next();!d.done;d=c.next()){d=d.value;var e=rh(d);d.Db&&(A.info(e,"Retrying after failure..."),d.Db=!1,kh(b,d,.1))}b=!0}}else b=!1;return b};Y.prototype.retryStreaming=Y.prototype.Sc;Y.prototype.fe=function(){return this.c};
Y.prototype.getManifest=Y.prototype.fe;Y.prototype.ge=function(){return this.u?this.u.constructor:null};Y.prototype.getManifestParserFactory=Y.prototype.ge;function Si(b,c,d,e){Xf(b.ka,c).variant=d;b=b.w.c;b.c!=d&&(b.c=d,b.a.push({timestamp:Date.now()/1E3,id:d.id,type:"variant",fromAdaptation:e,bandwidth:d.bandwidth}))}function oj(b,c,d,e){Wf(b.ka,c,d);b=b.w.c;b.b!=d&&(b.b=d,b.a.push({timestamp:Date.now()/1E3,id:d.id,type:"text",fromAdaptation:e,bandwidth:null}))}
function ni(b){var c=di();c.streaming.failureCallback=function(c){var d=[1001,1002,1003];b.da()&&d.includes(c.code)&&(c.severity=1,A.j("Live streaming error.  Retrying automatically..."),b.Sc())};c.textDisplayFactory=function(){return new Yh(b.a)};return c}
function Qi(b,c){for(var d=0;d<c.length;d++){for(var e=c[d],f=new Map,g=q(e.variants),h=g.next();!h.done;h=g.next())if(h=h.value,h.video&&h.video.closedCaptions){h=h.video;for(var k=q(h.closedCaptions.keys()),m=k.next();!m.done;m=k.next())if(m=m.value,!f.has(m)){var n={id:b.md++,originalId:m,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",
codecs:"",kind:"caption",encrypted:!1,keyId:null,language:h.closedCaptions.get(m),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:h.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};f.set(m,n)}}f=q(f.values());for(g=f.next();!g.done;g=f.next())e.textStreams.push(g.value)}}
function Ji(b,c){var d=b.f?eh(b.f):null,e=b.f?gh(b.f):null;c.forEach(me.bind(null,b.h,d,e));d=yb(c,function(b){return b.variants.some(ve)});if(0==d)throw new D(2,4,4032);if(d<c.length)throw new D(2,4,4011);c.forEach(function(b){le(b.variants,this.b.restrictions,this.Mb)&&this.f&&aj(this)==b&&$i(this);xj(this,b.variants)}.bind(b))}l=Y.prototype;
l.uc=function(b){var c=this.f?eh(this.f):null,d=this.f?gh(this.f):null;me(this.h,c,d,b);c=b.variants;if(!c.some(ve))throw new D(2,4,4011);xj(this,b.variants);le(c,this.b.restrictions,this.Mb)&&this.f&&aj(this)==b&&$i(this);if(b=this.h?this.h.a:null)for(c=q(c),d=c.next();!d.done;d=c.next()){d=q(d.value.drmInfos);for(var e=d.next();!e.done;e=d.next())if(e=e.value,e.keySystem==b.keySystem){e=q(e.initData||[]);for(var f=e.next();!f.done;f=e.next())f=f.value,Ic(this.h,f.initDataType,f.initData)}}};
function rj(b,c,d,e){d=void 0===d?!1:d;e=void 0===e?0:e;if(b.mb)return b.na=c,b.kd=d,b.gd=e,!0;(c=oh(b.f,c,d,e))&&sj(b);return c}function pj(b,c){if(b.mb)return b.ma=c,!0;var d=nh(b.f,c,!0,0,!1);d&&qj(b);return d}function Zi(b,c){function d(b,c){if(!b)return null;var d=b.findSegmentPosition(c-g.startTime);return null==d?null:(d=b.getSegmentReference(d))?d.startTime+g.startTime:null}var e=eh(b.f),f=gh(b.f),g=aj(b);e=d(e,c);f=d(f,c);return null!=f&&null!=e?Math.max(f,e):null!=f?f:null!=e?e:c}
function Hi(b){var c=b.od();if(b.w&&b.C&&b.o){var d=b.M;d.f=c;Cg(d);Oi(b)}b.dispatchEvent(new H("buffering",{buffering:c}))}function Pi(b){var c=b.a.playbackRate;0!=c&&b.M.set(c)}function Oi(b){if(b.w&&b.C){var c=b.w.a;b.C.a==jg?hi(c,"buffering"):b.a.paused?hi(c,"paused"):b.a.ended?hi(c,"ended"):hi(c,"playing")}}function bj(b,c){try{xj(b,c)}catch(e){return b.Ma(e),null}var d=c.filter(function(b){return ve(b)});d=b.zb.create(d);b.m.setVariants(Array.from(d.values()));return b.m.chooseVariant()}
function ij(b,c){var d=vj(b,c,!1),e=we(c.textStreams,b.la,b.gb)[0]||null,f=!1;e&&(b.b.streaming.alwaysStreamText||b.Xb())&&(oj(b,c,e,!0),f=pj(b,e));(d||f)&&Ti(b)}function vj(b,c,d){d=void 0===d?!0:d;var e=bj(b,c.variants),f=!1;e&&(Si(b,c,e,!0),f=rj(b,e,!0));d&&f&&Ti(b);return f}
l.xe=function(b){A.debug("onChooseStreams_",b);try{A.H("onChooseStreams_, choosing variant from ",b.variants);A.H("onChooseStreams_, choosing text from ",b.textStreams);this.mb=!0;this.m.disable();jj(this);A.debug("Choosing new streams after period changed");var c=bj(this,b.variants),d=we(b.textStreams,this.la,this.gb)[0]||null;this.na&&(b.variants.includes(this.na)&&(c=this.na),this.na=null);this.ma&&(b.textStreams.includes(this.ma)&&(d=this.ma),this.ma=null);c&&Si(this,b,c,!0);d&&oj(this,b,d,!0);
var e=this.f,f=e.b.get("video");if(f)var g=e.c.periods[f.ga];else{var h=e.b.get("audio");g=h?e.c.periods[h.ga]:null}var k=c?c.audio:null;if(!g&&d){var m;if(m=k){b=d;var n=O(this.b.preferredTextLanguage),p=O(k.language),r=O(b.language);m=ae(r,n)&&!ae(p,r)}m&&(this.ib=!0);this.ib&&this.L.g.setTextVisibility(!0);wj(this)}var t=this.b.streaming.alwaysStreamText||this.Xb()?{variant:c,text:d}:{variant:c,text:null};A.H("onChooseStreams_, chose variant ",t.variant);A.H("onChooseStreams_, chose text ",t.text);
return t}catch(x){return this.Ma(x),{variant:null,text:null}}};l.Pd=function(){A.debug("canSwitch_");this.mb=!1;this.b.abr.enabled&&(this.m.enable(),jj(this));this.na&&(oh(this.f,this.na,this.kd,this.gd),sj(this),this.na=null);this.ma&&(nh(this.f,this.ma,!0,0,!1),qj(this),this.ma=null)};l.Be=function(){this.u&&this.u.update&&this.u.update()};l.Fe=function(){this.o&&this.o.u()};function Ti(b){yj(b,new H("adaptation"))}function $i(b){yj(b,new H("trackschanged"))}
function sj(b){yj(b,new H("variantchanged"))}function qj(b){yj(b,new H("textchanged"))}function wj(b){yj(b,new H("texttrackvisibility"))}function jj(b){yj(b,new H("abrstatuschanged",{yf:b.b.abr.enabled}))}l.Ma=function(b){if(this.i!=zi){var c=new H("error",{detail:b});this.dispatchEvent(c);c.defaultPrevented&&(b.handled=!0)}};function Ii(b,c,d){b.dispatchEvent(new H(c,{detail:{schemeIdUri:d.schemeIdUri,value:d.value,startTime:d.startTime,endTime:d.endTime,id:d.id,eventElement:d.eventElement}}))}
function Gi(b){if(!b.a.error)return null;var c=b.a.error.code;if(1==c)return null;var d=b.a.error.msExtendedCode;d&&(0>d&&(d+=Math.pow(2,32)),d=d.toString(16));return new D(2,3,3016,c,d,b.a.error.message)}
function Mi(b,c){if(b.f){var d=aj(b),e=!1,f=Object.keys(c);0==f.length&&A.j("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var g=1==f.length&&"00"==f[0];g&&A.j("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");f.length&&b.c.periods.forEach(function(b){b.variants.forEach(function(b){ze(b).forEach(function(d){var f=
b.allowedByKeySystem;d.keyId&&(d=c[g?"00":d.keyId],b.allowedByKeySystem=!!d&&!Bi.includes(d));f!=b.allowedByKeySystem&&(e=!0)})})});f=eh(b.f);var h=gh(b.f);(f=ye(f,h,d.variants))&&!f.allowedByKeySystem&&(A.debug("Choosing new variants after key status changed"),vj(b,d));e&&($i(b),bj(b,d.variants))}}function Ni(b,c,d){if(b.u&&b.u.onExpirationUpdated)b.u.onExpirationUpdated(c,d);b.dispatchEvent(new H("expirationupdated"))}
function Ri(b,c,d){0<c&&(b.da()?A.j("|playRangeStart| has been configured for live content. Ignoring the setting."):b.Id(c));d<b.ba()&&(b.da()?A.j("|playRangeEnd| has been configured for live content. Ignoring the setting."):b.$a(d))}
function xj(b,c){var d=b.h?ac(b.h.ea):{},e=Object.keys(d);e=e.length&&"00"==e[0];for(var f=!1,g=!1,h=[],k=[],m=q(c),n=m.next();!n.done;n=m.next()){n=n.value;var p=[];n.audio&&p.push(n.audio);n.video&&p.push(n.video);p=q(p);for(var r=p.next();!r.done;r=p.next())if(r=r.value,r.keyId){var t=d[e?"00":r.keyId];t?Bi.includes(t)&&(k.includes(t)||k.push(t)):h.includes(r.keyId)||h.push(r.keyId)}n.allowedByApplication?n.allowedByKeySystem&&(f=!0):g=!0}if(!f)throw new D(2,4,4012,{hasAppRestrictions:g,missingKeys:h,
restrictedKeyStatuses:k});}function yj(b,c){u(function e(){return y(e,function(e){switch(e.l){case 1:return v(e,Promise.resolve(),2);case 2:b.i!=zi&&b.dispatchEvent(c),w(e)}})})}function uj(b){var c=new Set;b=q(b);for(var d=b.next();!d.done;d=b.next())d=d.value,d.language?c.add(O(d.language)):c.add("und");return c}
function tj(b){var c=new Map;b=q(b);for(var d=b.next();!d.done;d=b.next()){var e=d.value;d="und";var f=[];e.language&&(d=O(e.language));"variant"==e.type?f=e.audioRoles:f=e.roles;f&&f.length||(f=[""]);c.has(d)||c.set(d,new Set);e=q(f);for(f=e.next();!f.done;f=e.next())f=f.value,c.get(d).add(f)}var g=[];c.forEach(function(b,c){for(var d=q(b),e=d.next();!e.done;e=d.next())g.push({language:c,role:e.value})});return g}
function lj(b){b=aj(b);return null==b?[]:b.variants.filter(function(b){return ve(b)})}function nj(b){var c=aj(b);return null==c?[]:c.textStreams.filter(function(c){return!b.Lb.has(c)})}function aj(b){var c=b.o.g(),d=null;b=q(b.c.periods);for(var e=b.next();!e.done;e=b.next())e=e.value,e.startTime<=c&&(d=e);return d}function kj(b){var c=aj(b);return Xf(b.ka,c).variant}
function mj(b){var c=aj(b);if(null==c)return null;if(!Xf(b.ka,c).text){var d=we(c.textStreams,b.la,b.gb);d.length&&Wf(b.ka,c,d[0])}return Xf(b.ka,c).text}function Di(){return new D(2,7,7E3)}function yi(b,c,d,e,f,g){return e==b&&f.s==g.s&&f.uri==g.uri&&f.mimeType==g.mimeType&&f.ya==g.ya?c:d}function Th(){return{ya:null,s:null,mimeType:null,startTime:null,Yc:null,uri:null}}
function Ei(b){return new Promise(function(c,d){b.Xa=function(){return d(Di())};b.bc=function(){return c()};b.onError=function(b){return d(b)};b.cc=function(){return d(Di())}})}var zi=0,mi=1,Yi=2,cj=3;Y.LoadMode={DESTROYED:zi,NOT_LOADED:mi,MEDIA_SOURCE:Yi,SRC_EQUALS:cj};z("shaka.polyfill.installAll",function(){for(var b=0;b<zj.length;++b)try{zj[b].Od()}catch(c){A.qa("Error installing polyfill!",c)}});var zj=[];function Aj(b,c){c=c||0;for(var d={priority:c,Od:b},e=0;e<zj.length;e++)if(zj[e].priority<c){zj.splice(e,0,d);return}zj.push(d)}z("shaka.polyfill.register",Aj);Aj(function(){Bj()},-1);function Cj(b,c,d){if("input"==b)switch(this.type){case "range":b="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,b,c,d)}Aj(function(){A.debug("InputEvent.install");kc("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(A.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Cj)});Aj(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})});Aj(function(){A.debug("mathRound.install")});function Dj(){var b=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(c){for(var d=[],e=0;e<arguments.length;++e)d[e]=arguments[e];d=b.apply(this,d);d.abort=function(){};return d}}function Gj(){var b=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(c,d){return b.call(this,c,d-.001)}}function Hj(){var b=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(c){return"mp2t"==c.split(/ *; */)[0].split("/")[1].toLowerCase()?!1:b(c)}}
function Ij(){var b=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(c){return"opus"!=ec(c)[0]&&b(c)}}function Jj(){var b=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(c){var d=c.split(/ *; */);d.shift();return d.some(function(b){return b.startsWith("codecs=")})?cast.__platform__.canDisplayType(c):b(c)}}
Aj(function(){A.debug("MediaSource.install");var b=lc();window.MediaSource?window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(A.info("Patching Chromecast MSE bugs."),Jj()):b?(Hj(),12>=b?(A.info("Patching Safari 11 & 12 MSE bugs."),Dj(),Gj()):(A.info("Patching Safari 13 MSE bugs."),Dj())):kc("Tizen 2")||kc("Tizen 3")||kc("Tizen 4")?Ij():A.info("Using native MSE as-is."):A.info("No MSE implementation available.")});function Kj(b,c){A.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var d=new Lj(b,c);return Promise.resolve(d)}catch(e){return Promise.reject(e)}}
function Lj(b,c){A.debug("PatchedMediaKeysMs.MediaKeySystemAccess");this.keySystem=b;for(var d=!1,e=0;e<c.length;++e){var f=c[e],g={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:f.initDataTypes,sessionTypes:["temporary"],label:f.label},h=!1;if(f.audioCapabilities)for(var k=0;k<f.audioCapabilities.length;++k){var m=f.audioCapabilities[k];if(m.contentType){h=!0;var n=m.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,
n)&&(g.audioCapabilities.push(m),d=!0)}}if(f.videoCapabilities)for(k=0;k<f.videoCapabilities.length;++k)m=f.videoCapabilities[k],m.contentType&&(h=!0,n=m.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,n)&&(g.videoCapabilities.push(m),d=!0));h||(d=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==f.persistentState&&(d=!1);if(d){this.a=g;return}}d=Error("Unsupported keySystem");d.name="NotSupportedError";d.code=DOMException.NOT_SUPPORTED_ERR;throw d;}
Lj.prototype.createMediaKeys=function(){A.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var b=new Mj(this.keySystem);return Promise.resolve(b)};Lj.prototype.getConfiguration=function(){A.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration");return this.a};function Nj(b){A.debug("PatchedMediaKeysMs.setMediaKeys");var c=this.mediaKeys;c&&c!=b&&Oj(c,null);delete this.mediaKeys;return(this.mediaKeys=b)?Oj(b,this):Promise.resolve()}
function Mj(b){A.debug("PatchedMediaKeysMs.MediaKeys");this.b=new MSMediaKeys(b);this.a=new K}Mj.prototype.createSession=function(b){A.debug("PatchedMediaKeysMs.MediaKeys.createSession");b=b||"temporary";if("temporary"!=b)throw new TypeError("Session type "+b+" is unsupported on this platform.");return new Pj(this.b,b)};Mj.prototype.setServerCertificate=function(){A.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate");return Promise.resolve(!1)};
function Oj(b,c){b.a.Hb();if(!c)return Promise.resolve();b.a.B(c,"msneedkey",Qj);try{return Dg(c,HTMLMediaElement.HAVE_METADATA,b.a,function(){c.msSetMediaKeys(b.b)}),Promise.resolve()}catch(d){return Promise.reject(d)}}function Pj(b){A.debug("PatchedMediaKeysMs.MediaKeySession");vb.call(this);this.c=null;this.g=b;this.b=this.a=null;this.f=new K;this.sessionId="";this.expiration=NaN;this.closed=new E;this.keyStatuses=new Rj}Oa(Pj,vb);l=Pj.prototype;
l.generateRequest=function(b,c){A.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest");this.a=new E;try{this.c=this.g.createSession("video/mp4",new Uint8Array(c),null),this.f.B(this.c,"mskeymessage",this.Ee.bind(this)),this.f.B(this.c,"mskeyadded",this.Ce.bind(this)),this.f.B(this.c,"mskeyerror",this.De.bind(this)),Sj(this,"status-pending")}catch(d){this.a.reject(d)}return this.a};l.load=function(){A.debug("PatchedMediaKeysMs.MediaKeySession.load");return Promise.reject(Error("MediaKeySession.load not yet supported"))};
l.update=function(b){A.debug("PatchedMediaKeysMs.MediaKeySession.update");this.b=new E;try{this.c.update(new Uint8Array(b))}catch(c){this.b.reject(c)}return this.b};l.close=function(){A.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.Hb()}catch(b){this.closed.reject(b)}return this.closed};l.remove=function(){A.debug("PatchedMediaKeysMs.MediaKeySession.remove");return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};
function Qj(b){A.debug("PatchedMediaKeysMs.onMsNeedKey_",b);if(b.initData){var c=document.createEvent("CustomEvent");c.initCustomEvent("encrypted",!1,!1,null);c.initDataType="cenc";c.initData=Je(b.initData).buffer;this.dispatchEvent(c)}}l.Ee=function(b){A.debug("PatchedMediaKeysMs.onMsKeyMessage_",b);this.a&&(this.a.resolve(),this.a=null);this.dispatchEvent(new H("message",{messageType:void 0==this.keyStatuses.a?"license-request":"license-renewal",message:b.message.buffer}))};
l.Ce=function(b){A.debug("PatchedMediaKeysMs.onMsKeyAdded_",b);this.a?(A.debug("Simulating completion for a PR persistent license."),Sj(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Sj(this,"usable"),this.b.resolve(),this.b=null)};
l.De=function(b){A.debug("PatchedMediaKeysMs.onMsKeyError_",b);b=Error("EME PatchedMediaKeysMs key error");b.errorCode=this.c.error;if(null!=this.a)this.a.reject(b),this.a=null;else if(null!=this.b)this.b.reject(b),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Sj(this,"output-not-allowed");break;default:Sj(this,"internal-error")}};
function Sj(b,c){var d=b.keyStatuses;d.size=void 0==c?0:1;d.a=c;b.dispatchEvent(new H("keystatuseschange"))}function Rj(){this.size=0;this.a=void 0}var Tj;l=Rj.prototype;l.forEach=function(b){this.a&&b(this.a,Tj)};l.get=function(b){if(this.has(b))return this.a};l.has=function(b){var c=Tj;return this.a&&L.Ga(new Uint8Array(b),new Uint8Array(c))?!0:!1};l.entries=function(){};l.keys=function(){};l.values=function(){};
Aj(function(){!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(A.info("Using ms-prefixed EME v20140218"),Tj=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Nj,window.MediaKeys=Mj,window.MediaKeySystemAccess=Lj,navigator.requestMediaKeySystemAccess=Kj)});function Uj(){A.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess");return Promise.reject(Error("The key system specified is not supported."))}function Vj(b){A.debug("PatchedMediaKeysNop.setMediaKeys");return null==b?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Wj(){throw new TypeError("Illegal constructor.");}Wj.prototype.createSession=function(){};Wj.prototype.setServerCertificate=function(){};function Xj(){throw new TypeError("Illegal constructor.");}
Xj.prototype.getConfiguration=function(){};Xj.prototype.createMediaKeys=function(){};Aj(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(A.info("EME not available."),navigator.requestMediaKeySystemAccess=Uj,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Vj,window.MediaKeys=Wj,window.MediaKeySystemAccess=Xj)},-10);var Yj="";function Zj(b){var c=Yj;return c?c+b.charAt(0).toUpperCase()+b.slice(1):b}function ak(b,c){A.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var d=new bk(b,c);return Promise.resolve(d)}catch(e){return Promise.reject(e)}}function ck(b){A.debug("PatchedMediaKeysWebkit.setMediaKeys");var c=this.mediaKeys;c&&c!=b&&dk(c,null);delete this.mediaKeys;(this.mediaKeys=b)&&dk(b,this);return Promise.resolve()}
function bk(b,c){A.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess");this.a=this.keySystem=b;var d=!1;"org.w3.clearkey"==b&&(this.a="webkit-org.w3.clearkey",d=!1);var e=!1;var f=document.getElementsByTagName("video");f=f.length?f[0]:document.createElement("video");for(var g=0;g<c.length;++g){var h=c[g],k={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:h.initDataTypes,sessionTypes:["temporary"],label:h.label},m=!1;if(h.audioCapabilities)for(var n=
0;n<h.audioCapabilities.length;++n){var p=h.audioCapabilities[n];if(p.contentType){m=!0;var r=p.contentType.split(";")[0];f.canPlayType(r,this.a)&&(k.audioCapabilities.push(p),e=!0)}}if(h.videoCapabilities)for(n=0;n<h.videoCapabilities.length;++n)p=h.videoCapabilities[n],p.contentType&&(m=!0,f.canPlayType(p.contentType,this.a)&&(k.videoCapabilities.push(p),e=!0));m||(e=f.canPlayType("video/mp4",this.a)||f.canPlayType("video/webm",this.a));"required"==h.persistentState&&(d?(k.persistentState="required",
k.sessionTypes=["persistent-license"]):e=!1);if(e){this.b=k;return}}d="Unsupported keySystem";if("org.w3.clearkey"==b||"com.widevine.alpha"==b)d="None of the requested configurations were supported.";d=Error(d);d.name="NotSupportedError";d.code=DOMException.NOT_SUPPORTED_ERR;throw d;}bk.prototype.createMediaKeys=function(){A.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var b=new ek(this.a);return Promise.resolve(b)};
bk.prototype.getConfiguration=function(){A.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration");return this.b};function ek(b){A.debug("PatchedMediaKeysWebkit.MediaKeys");this.g=b;this.b=null;this.a=new K;this.c=[];this.f={}}function dk(b,c){b.b=c;b.a.Hb();var d=Yj;c&&(b.a.B(c,d+"needkey",b.Ke.bind(b)),b.a.B(c,d+"keymessage",b.Je.bind(b)),b.a.B(c,d+"keyadded",b.He.bind(b)),b.a.B(c,d+"keyerror",b.Ie.bind(b)))}l=ek.prototype;
l.createSession=function(b){A.debug("PatchedMediaKeysWebkit.MediaKeys.createSession");b=b||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+b+" is unsupported on this platform.");var c=this.b||document.createElement("video");c.src||(c.src="about:blank");b=new fk(c,this.g,b);this.c.push(b);return b};l.setServerCertificate=function(){A.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate");return Promise.resolve(!1)};
l.Ke=function(b){A.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",b);var c=document.createEvent("CustomEvent");c.initCustomEvent("encrypted",!1,!1,null);c.initDataType="cenc";b.initData instanceof ArrayBuffer?c.initData=b.initData:c.initData=b.initData.buffer;this.b.dispatchEvent(c)};
l.Je=function(b){A.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",b);var c=gk(this,b.sessionId);c?(b=new H("message",{messageType:void 0==c.keyStatuses.a?"licenserequest":"licenserenewal",message:b.message}),A.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),c.b&&(c.b.resolve(),c.b=null),c.dispatchEvent(b)):A.error("Session not found",b.sessionId)};
l.He=function(b){A.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",b);if(b=gk(this,b.sessionId))A.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),hk(b,"usable"),b.a&&b.a.resolve(),b.a=null};l.Ie=function(b){A.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",b);var c=gk(this,b.sessionId);c&&c.handleError(b)};
function gk(b,c){var d=b.f[c];return d?(A.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",d),d):(d=b.c.shift())?(d.sessionId=c,b.f[c]=d,A.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",d),d):null}function fk(b,c,d){A.debug("PatchedMediaKeysWebkit.MediaKeySession");vb.call(this);this.f=b;this.h=!1;this.a=this.b=null;this.c=c;this.g=d;this.sessionId="";this.expiration=NaN;this.closed=new E;this.keyStatuses=new ik}Oa(fk,vb);l=fk.prototype;
l.handleError=function(b){A.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",b);var c=Error("EME v0.1b key error"),d=b.errorCode;d.systemCode=b.systemCode;c.errorCode=d;!b.sessionId&&this.b?(45==b.systemCode&&(c.message="Unsupported session type."),this.b.reject(c),this.b=null):b.sessionId&&this.a?(this.a.reject(c),this.a=null):(c=b.systemCode,b.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?hk(this,"output-restricted"):1==c?hk(this,"expired"):hk(this,"internal-error"))};
function jk(b,c,d){if(b.h)return Promise.reject(Error("The session is already initialized."));b.h=!0;try{if("persistent-license"==b.g)if(d)var e=new Uint8Array(rc("LOAD_SESSION|"+d));else{var f=rc("PERSISTENT|"),g=new Uint8Array(f.byteLength+c.byteLength);g.set(new Uint8Array(f),0);g.set(new Uint8Array(c),f.byteLength);e=g}else e=new Uint8Array(c)}catch(k){return Promise.reject(k)}b.b=new E;var h=Zj("generateKeyRequest");try{b.f[h](b.c,e)}catch(k){if("InvalidStateError"!=k.name)return b.b=null,Promise.reject(k);
(new B(function(){try{b.f[h](b.c,e)}catch(m){b.b.reject(m),b.b=null}})).V(.01)}return b.b}
l.Xc=function(b,c){if(this.a)this.a.then(this.Xc.bind(this,b,c))["catch"](this.Xc.bind(this,b,c));else{this.a=b;if("webkit-org.w3.clearkey"==this.c){var d=oc(c);var e=JSON.parse(d);"oct"!=e.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null);d=L.Ha(e.keys[0].k);e=L.Ha(e.keys[0].kid)}else d=new Uint8Array(c),e=null;var f=Zj("addKey");try{this.f[f](this.c,d,e,this.sessionId)}catch(g){this.a.reject(g),this.a=null}}};
function hk(b,c){var d=b.keyStatuses;d.size=void 0==c?0:1;d.a=c;b.dispatchEvent(new H("keystatuseschange"))}l.generateRequest=function(b,c){A.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest");return jk(this,c,null)};l.load=function(b){A.debug("PatchedMediaKeysWebkit.MediaKeySession.load");return"persistent-license"==this.g?jk(this,null,b):Promise.reject(Error("Not a persistent session."))};
l.update=function(b){A.debug("PatchedMediaKeysWebkit.MediaKeySession.update",b);var c=new E;this.Xc(c,b);return c};l.close=function(){A.debug("PatchedMediaKeysWebkit.MediaKeySession.close");if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var b=Zj("cancelKeyRequest");try{this.f[b](this.c,this.sessionId)}catch(c){}}this.closed.resolve();return this.closed};
l.remove=function(){A.debug("PatchedMediaKeysWebkit.MediaKeySession.remove");return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function ik(){this.size=0;this.a=void 0}var kk;l=ik.prototype;l.forEach=function(b){this.a&&b(this.a,kk)};l.get=function(b){if(this.has(b))return this.a};l.has=function(b){var c=kk;return this.a&&L.Ga(new Uint8Array(b),new Uint8Array(c))?!0:!1};l.entries=function(){};l.keys=function(){};l.values=function(){};
Aj(function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)A.info("Using webkit-prefixed EME v0.1b"),Yj="webkit";else if(HTMLMediaElement.prototype.generateKeyRequest)A.info("Using nonprefixed EME v0.1b");else return;kk=(new Uint8Array([0])).buffer;navigator.requestMediaKeySystemAccess=ak;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=
null;HTMLMediaElement.prototype.setMediaKeys=ck;window.MediaKeys=ek;window.MediaKeySystemAccess=bk}});Aj(function(){A.debug("VideoPlayPromise.install");if(window.HTMLMediaElement){var b=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var c=b.apply(this);c&&c["catch"](function(){});return c}}});function lk(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Aj(function(){if(window.HTMLVideoElement){var b=HTMLVideoElement.prototype;!b.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in b&&(b.getVideoPlaybackQuality=lk)}});function mk(b,c,d){return new window.TextTrackCue(b,c,d)}function nk(b,c,d){return new window.TextTrackCue(b+"-"+c+"-"+d,b,c,d)}
Aj(function(){if(window.VTTCue)A.info("Using native VTTCue.");else if(window.TextTrackCue){var b=TextTrackCue.length;if(3==b)A.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=mk;else if(6==b)A.info("Using VTTCue polyfill from 6 argument TextTrackCue."),window.VTTCue=nk;else{try{var c=!!mk(1,2,"")}catch(d){c=!1}c&&(A.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=mk)}}else A.error("VTTCue not available.")});function ok(){}z("shaka.text.TtmlTextParser",ok);ok.prototype.parseInit=function(){};ok.prototype.parseInit=ok.prototype.parseInit;
ok.prototype.parseMedia=function(b,c){var d=oc(b),e=[],f=new DOMParser,g=null;if(""==d)return e;try{g=f.parseFromString(d,"text/xml")}catch(ya){throw new D(2,2,2005,"Failed to parse TTML.");}if(g){if(d=g.getElementsByTagName("parsererror")[0])throw new D(2,2,2005,d.textContent);if(f=g.getElementsByTagName("tt")[0]){var h=T.getAttributeNS(f,"http://www.w3.org/ns/ttml#parameter","frameRate");var k=T.getAttributeNS(f,"http://www.w3.org/ns/ttml#parameter","subFrameRate");var m=T.getAttributeNS(f,"http://www.w3.org/ns/ttml#parameter",
"frameRateMultiplier");var n=T.getAttributeNS(f,"http://www.w3.org/ns/ttml#parameter","tickRate");g=f.getAttribute("xml:space")||"default";d=T.getAttributeNS(f,"http://www.w3.org/ns/ttml#styling","extent")}else throw new D(2,2,2005,"TTML does not contain <tt> tag.");if("default"!=g&&"preserve"!=g)throw new D(2,2,2005,"Invalid xml:space value: "+g);g="default"==g;h=new pk(h,k,m,n);k=qk(f.getElementsByTagName("metadata")[0]);m=qk(f.getElementsByTagName("styling")[0]);n=qk(f.getElementsByTagName("layout")[0]);
for(var p=[],r=0;r<n.length;r++){var t=n[r],x=m,F=d;var C=new qd;var I=t.getAttribute("xml:id");if(I){C.id=I;I=null;F&&(I=rk.exec(F)||sk.exec(F));F=I?Number(I[1]):null;I=I?Number(I[2]):null;var R,Z;if(R=tk(t,x,"extent"))R=(Z=rk.exec(R))||sk.exec(R),null!=R&&(C.width=null!=F?100*Number(R[1])/F:Number(R[1]),C.height=null!=I?100*Number(R[2])/I:Number(R[2]),C.widthUnits=Z||null!=F?Dd:0,C.heightUnits=Z||null!=I?Dd:0);if(t=tk(t,x,"origin"))R=(Z=rk.exec(t))||sk.exec(t),null!=R&&(C.viewportAnchorX=null!=
I?100*Number(R[1])/I:Number(R[1]),C.viewportAnchorY=null!=F?100*Number(R[2])/F:Number(R[2]),C.viewportAnchorUnits=Z||null!=F?Dd:0)}else A.j("TtmlTextParser parser encountered a region with no id. Region will be ignored."),C=null;C&&p.push(C)}d=uk(f.getElementsByTagName("body")[0]);d=q(d);for(f=d.next();!f.done;f=d.next())(f=vk(f.value,c.periodStart,h,k,m,n,p,g,!1))&&e.push(f)}return e};ok.prototype.parseMedia=ok.prototype.parseMedia;
var rk=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,wk=/^(\d+px|\d+em)$/,sk=/^(\d+)px (\d+)px$/,xk=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,yk=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,zk=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ak=/^(\d*(?:\.\d*)?)f$/,Bk=/^(\d*(?:\.\d*)?)t$/,Ck=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Dk={left:vd,center:"center",right:"end",start:vd,end:"end"},Ek={left:"line-left",center:"center",right:"line-right"};
function qk(b){var c=[];if(!b)return c;for(var d=q(b.childNodes),e=d.next();!e.done;e=d.next())e=e.value,e.nodeType==Node.ELEMENT_NODE&&"br"!==e.nodeName&&(e=qk(e),c=c.concat(e));c.length||c.push(b);return c}function uk(b){if(!b)return[];var c=[];b=q(b.childNodes);for(var d=b.next();!d.done;d=b.next())d=d.value,d instanceof Element&&(d.hasAttribute("begin")?c.push(d):c=c.concat(uk(d)));return c}
function Fk(b,c){for(var d="",e=q(b.childNodes),f=e.next();!f.done;f=e.next())f=f.value,"br"==f.nodeName&&b.childNodes[0]!==f?d+="\n":f.childNodes&&0<f.childNodes.length?d+=Fk(f,c):c?(f=f.textContent.trim(),f=f.replace(/\s+/g," "),d+=f):d+=f.textContent;return d}
function vk(b,c,d,e,f,g,h,k,m){if(m&&"br"==b.nodeName)return b=new N(0,0,""),b.spacer=!0,b;var n=/^[\s\n]*$/.test(b.textContent),p=b.nodeType==Node.ELEMENT_NODE&&!b.hasAttribute("begin")&&!b.hasAttribute("end");if(b.nodeType!=Node.ELEMENT_NODE||p&&n||p&&!m)return null;n=Gk(b.getAttribute("begin"),d);p=Gk(b.getAttribute("end"),d);var r=Gk(b.getAttribute("dur"),d);null==p&&null!=r&&(p=n+r);if(!m&&(null==n||null==p))throw new D(2,2,2001);n=m&&null==n?0:n+c;p=m&&null==p?0:p+c;r="";m=[];if(Array.from(b.childNodes).find(function(b){return b.nodeType===
Node.TEXT_NODE&&/\S+/.test(b.textContent)}))r=Fk(b,k);else for(var t=q(b.childNodes),x=t.next();!x.done;x=t.next())if(x=vk(x.value,c,d,e,f,g,h,k,!0))x.startTime=x.startTime||n,x.endTime=x.endTime||p,m.push(x);c=new N(n,p,r);c.nestedCues=m;if((g=Hk(b,"region",g,"")[0])&&g.getAttribute("xml:id")){var F=g.getAttribute("xml:id");c.region=h.filter(function(b){return b.id==F})[0]}e=Hk(b,"smpte:backgroundImage",e,"#")[0];Ik(c,b,g,e,f);return c}
function Ik(b,c,d,e,f){"rtl"==Jk(c,d,f,"direction")&&(b.direction="rtl");var g=Jk(c,d,f,"writingMode");"tb"==g||"tblr"==g?b.writingMode="vertical-lr":"tbrl"==g?b.writingMode="vertical-rl":"rltb"==g||"rl"==g?b.direction="rtl":g&&(b.direction=pd);(g=Jk(c,d,f,"textAlign"))?(b.positionAlign=Ek[g],b.lineAlign=Dk[g],b.textAlign=zd[g.toUpperCase()]):b.textAlign="start";if(g=Jk(c,d,f,"displayAlign"))b.displayAlign=Ad[g.toUpperCase()];if(g=Jk(c,d,f,"color"))b.color=g;if(g=Jk(c,d,f,"backgroundColor"))b.backgroundColor=
g;if(g=Jk(c,d,f,"fontFamily"))b.fontFamily=g;(g=Jk(c,d,f,"fontWeight"))&&"bold"==g&&(b.fontWeight=700);(g=Jk(c,d,f,"wrapOption"))&&"noWrap"==g&&(b.wrapLine=!1);(g=Jk(c,d,f,"lineHeight"))&&g.match(wk)&&(b.lineHeight=g);(g=Jk(c,d,f,"fontSize"))&&g.match(wk)&&(b.fontSize=g);if(g=Jk(c,d,f,"fontStyle"))b.fontStyle=Cd[g.toUpperCase()];if(e){g=e.getAttribute("imagetype");var h=e.getAttribute("encoding");e=e.textContent.trim();"PNG"==g&&"Base64"==h&&e&&(b.backgroundImage="data:image/png;base64,"+e)}(d=tk(d,
f,"textDecoration"))&&Kk(b,d);(c=Lk(c,f,"textDecoration"))&&Kk(b,c)}
function Kk(b,c){for(var d=c.split(" "),e=0;e<d.length;e++)switch(d[e]){case "underline":b.textDecoration.includes("underline")||b.textDecoration.push("underline");break;case "noUnderline":b.textDecoration.includes("underline")&&xb(b.textDecoration,"underline");break;case "lineThrough":b.textDecoration.includes("lineThrough")||b.textDecoration.push("lineThrough");break;case "noLineThrough":b.textDecoration.includes("lineThrough")&&xb(b.textDecoration,"lineThrough");break;case "overline":b.textDecoration.includes("overline")||
b.textDecoration.push("overline");break;case "noOverline":b.textDecoration.includes("overline")&&xb(b.textDecoration,"overline")}}function Jk(b,c,d,e){return(b=Lk(b,d,e))?b:tk(c,d,e)}function tk(b,c,d){if(!b)return null;for(var e=qk(b),f=0;f<e.length;f++){var g=T.getAttributeNS(e[f],"http://www.w3.org/ns/ttml#styling",d);if(g)return g}return Mk(b,c,d)}function Lk(b,c,d){var e=T.getAttributeNS(b,"http://www.w3.org/ns/ttml#styling",d);return e?e:Mk(b,c,d)}
function Mk(b,c,d){b=Hk(b,"style",c,"");for(var e=null,f=0;f<b.length;f++){var g=T.getAttributeNS(b[f],"http://www.w3.org/ns/ttml#styling",d);g||(g=Lk(b[f],c,d));g&&(e=g)}return e}
function Hk(b,c,d,e){var f=[];if(!b||1>d.length)return f;var g=b;for(b=null;g&&!(b=g.getAttribute(c))&&(g=g.parentNode,g instanceof Element););if(c=b)for(c=c.split(" "),c=q(c),b=c.next();!b.done;b=c.next()){b=b.value;g=q(d);for(var h=g.next();!h.done;h=g.next())if(h=h.value,e+h.getAttribute("xml:id")==b){f.push(h);break}}return f}
function Gk(b,c){var d=null;if(xk.test(b)){d=xk.exec(b);var e=Number(d[1]),f=Number(d[2]),g=Number(d[3]),h=Number(d[4]);h+=(Number(d[5])||0)/c.b;g+=h/c.frameRate;d=g+60*f+3600*e}else yk.test(b)?d=Nk(yk,b):zk.test(b)?d=Nk(zk,b):Ak.test(b)?(d=Ak.exec(b),d=Number(d[1])/c.frameRate):Bk.test(b)?(d=Bk.exec(b),d=Number(d[1])/c.a):Ck.test(b)&&(d=Nk(Ck,b));return d}
function Nk(b,c){var d=b.exec(c);return null==d||""==d[0]?null:(Number(d[4])||0)/1E3+(Number(d[3])||0)+60*(Number(d[2])||0)+3600*(Number(d[1])||0)}function pk(b,c,d,e){this.frameRate=Number(b)||30;this.b=Number(c)||1;this.a=Number(e);0==this.a&&(this.a=b?this.frameRate*this.b:1);d&&(b=/^(\d+) (\d+)$/g.exec(d))&&(this.frameRate*=Number(b[1])/Number(b[2]))}Gd["application/ttml+xml"]=ok;function Ok(){this.a=new ok}z("shaka.text.Mp4TtmlParser",Ok);Ok.prototype.parseInit=function(b){var c=!1;(new S).J("moov",Fe).J("trak",Fe).J("mdia",Fe).J("minf",Fe).J("stbl",Fe).sa("stsd",Ge).J("stpp",function(b){c=!0;b.parser.stop()}).parse(b);if(!c)throw new D(2,2,2007);};Ok.prototype.parseInit=Ok.prototype.parseInit;Ok.prototype.parseMedia=function(b,c){var d=!1,e=[];(new S).J("mdat",He(function(b){d=!0;e=e.concat(this.a.parseMedia(b,c))}.bind(this))).parse(b);if(!d)throw new D(2,2,2007);return e};
Ok.prototype.parseMedia=Ok.prototype.parseMedia;Gd['application/mp4; codecs="stpp"']=Ok;Gd['application/mp4; codecs="stpp.ttml.im1t"']=Ok;Gd['application/mp4; codecs="stpp.TTML.im1t"']=Ok;function Pk(b){this.b=b;this.a=0}function Qk(b){Rk(b,/[ \t]+/gm)}function Rk(b,c){c.lastIndex=b.a;var d=c.exec(b.b);d=null==d?null:{position:d.index,length:d[0].length,Xe:d};if(b.a==b.b.length||null==d||d.position!=b.a)return null;b.a+=d.length;return d.Xe}function Sk(b){return b.a==b.b.length?null:(b=Rk(b,/[^ \t\n]*/gm))?b[0]:null};function Tk(){}z("shaka.text.VttTextParser",Tk);Tk.prototype.parseInit=function(){};Tk.prototype.parseInit=Tk.prototype.parseInit;
Tk.prototype.parseMedia=function(b,c){var d=oc(b);d=d.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");d=d.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(d[0]))throw new D(2,2,2E3);var e=c.segmentStart;if(null==e&&(e=0,d[0].includes("X-TIMESTAMP-MAP"))){var f=d[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),g=d[0].match(/MPEGTS:(\d+)/m);if(f&&g){e=Uk(new Pk(f[1]));if(null==e)throw new D(2,2,2E3);e=c.periodStart+(Number(g[1])/9E4-e)}}g=[];var h=d[0].split("\n");for(f=1;f<h.length;f++)if(/^Region:/.test(h[f])){var k=
new Pk(h[f]),m=new qd;Sk(k);Qk(k);for(var n=Sk(k);n;){var p;a:{var r=m,t=n;if(p=/^id=(.*)$/.exec(t))r.id=p[1];else if(p=/^width=(\d{1,2}|100)%$/.exec(t))r.width=Number(p[1]);else if(p=/^lines=(\d+)$/.exec(t))r.height=Number(p[1]),r.heightUnits=2;else if(p=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))r.regionAnchorX=Number(p[1]),r.regionAnchorY=Number(p[2]);else if(p=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))r.viewportAnchorX=Number(p[1]),r.viewportAnchorY=Number(p[2]);else if(/^scroll=up$/.exec(t))r.scroll=
"up";else{p=!1;break a}p=!0}p||A.j("VTT parser encountered an invalid VTTRegion setting: ",n," The setting will be ignored.");Qk(k);n=Sk(k)}g.push(m)}f=[];for(k=1;k<d.length;k++){h=d[k].split("\n");p=h;r=e;h=g;if(1==p.length&&!p[0]||/^NOTE($|[ \t])/.test(p[0])||"STYLE"==p[0])h=null;else{m=null;p[0].includes("--\x3e")||(m=p[0],p.splice(0,1));n=new Pk(p[0]);t=Uk(n);var x=Rk(n,/[ \t]+--\x3e[ \t]+/g),F=Uk(n);if(null==t||null==x||null==F)throw new D(2,2,2001);p=new N(t+r,F+r,p.slice(1).join("\n").trim());
Qk(n);for(r=Sk(n);r;)Vk(p,r,h)||A.j("VTT parser encountered an invalid VTT setting: ",r," The setting will be ignored."),Qk(n),r=Sk(n);null!=m&&(p.id=m);h=p}h&&f.push(h)}return f};Tk.prototype.parseMedia=Tk.prototype.parseMedia;
function Vk(b,c,d){var e;if(e=/^align:(start|middle|center|end|left|right)$/.exec(c))c=e[1],"middle"==c?b.textAlign=sd:b.textAlign=zd[c.toUpperCase()];else if(e=/^vertical:(lr|rl)$/.exec(c))b.writingMode="lr"==e[1]?"vertical-lr":"vertical-rl";else if(e=/^size:([\d.]+)%$/.exec(c))b.size=Number(e[1]);else if(e=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(c))b.position=Number(e[1]),e[2]&&(c=e[2],b.positionAlign="line-left"==c||"start"==c?"line-left":"line-right"==c||"end"==
c?"line-right":"center");else if(e=/^region:(.*)$/.exec(c)){if(c=Wk(d,e[1]))b.region=c}else{a:{if(d=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(c))b.lineInterpretation=1,b.line=Number(d[1]),d[2]&&(b.lineAlign=Bd[d[2].toUpperCase()]);else if(d=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(c))b.lineInterpretation=ud,b.line=Number(d[1]),d[2]&&(b.lineAlign=Bd[d[2].toUpperCase()]);else{b=!1;break a}b=!0}return b}return!0}
function Wk(b,c){var d=b.filter(function(b){return b.id==c});return d.length?d[0]:(A.j("VTT parser could not find a region with id: ",c," The region will be ignored."),null)}function Uk(b){b=Rk(b,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==b)return null;var c=Number(b[2]),d=Number(b[3]);return 59<c||59<d?null:Number(b[4])/1E3+d+60*c+3600*(Number(b[1])||0)}Gd["text/vtt"]=Tk;Gd['text/vtt; codecs="vtt"']=Tk;Gd['text/vtt; codecs="wvtt"']=Tk;function Xk(){this.a=null}z("shaka.text.Mp4VttParser",Xk);Xk.prototype.parseInit=function(b){var c=!1;(new S).J("moov",Fe).J("trak",Fe).J("mdia",Fe).sa("mdhd",function(b){0==b.version?(b.reader.R(4),b.reader.R(4),this.a=b.reader.G(),b.reader.R(4)):(b.reader.R(8),b.reader.R(8),this.a=b.reader.G(),b.reader.R(8));b.reader.R(4)}.bind(this)).J("minf",Fe).J("stbl",Fe).sa("stsd",Ge).J("wvtt",function(){c=!0}).parse(b);if(!this.a)throw new D(2,2,2008);if(!c)throw new D(2,2,2008);};
Xk.prototype.parseInit=Xk.prototype.parseInit;
Xk.prototype.parseMedia=function(b,c){var d=this;if(!this.a)throw A.error("No init segment for MP4+VTT!"),new D(2,2,2008);var e=0,f=[],g,h=[],k=!1,m=!1,n=!1,p=null;(new S).J("moof",Fe).J("traf",Fe).sa("tfdt",function(b){k=!0;e=0==b.version?b.reader.G():b.reader.Gb()}).sa("tfhd",function(b){var c=b.flags;b=b.reader;b.R(4);c&1&&b.R(8);c&2&&b.R(4);p=c&8?b.G():null}).sa("trun",function(b){m=!0;var c=b.version,d=b.flags;b=b.reader;var e=b.G();d&1&&b.R(4);d&4&&b.R(4);for(var g=[],h=0;h<e;h++){var k={duration:null,
sampleSize:null,Zc:null};d&256&&(k.duration=b.G());d&512&&(k.sampleSize=b.G());d&1024&&b.R(4);d&2048&&(k.Zc=0==c?b.G():b.zd());g.push(k)}f=g}).J("mdat",He(function(b){n=!0;g=b})).parse(b);if(!n&&!k&&!m)throw new D(2,2,2008);var r=e,t=new DataView(g.buffer,g.byteOffset,g.byteLength),x=new Q(t,0);f.forEach(function(b){var f=b.duration||p,g=b.Zc?e+b.Zc:r;r=g+(f||0);var k=0;do{var m=x.G();k+=m;var n=x.G();n=Ee(n);var t=null;"vttc"==n?8<m&&(t=x.Za(m-8)):("vtte"!=n&&A.error("Unknown box "+n+"! Skipping!"),
x.R(m-8));f?t&&h.push(Yk(t,c.periodStart+g/d.a,c.periodStart+r/d.a)):A.error("WVTT sample duration unknown, and no default found!")}while(b.sampleSize&&k<b.sampleSize)});return h.filter(hd.Ia)};Xk.prototype.parseMedia=Xk.prototype.parseMedia;function Yk(b,c,d){var e,f,g;(new S).J("payl",He(function(b){e=oc(b)})).J("iden",He(function(b){f=oc(b)})).J("sttg",He(function(b){g=oc(b)})).parse(b);return e?Zk(e,f,g,c,d):null}
function Zk(b,c,d,e,f){b=new N(e,f,b);c&&(b.id=c);if(d)for(c=new Pk(d),d=Sk(c);d;)Vk(b,d,[])||A.j("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),Qk(c),d=Sk(c);return b}Gd['application/mp4; codecs="wvtt"']=Xk;z("shaka.util.Dom.createHTMLElement",function(b){return document.createElement(b)});z("shaka.util.Dom.createVideoElement",function(){var b=document.createElement("video");b.muted=!0;b.width=600;b.height=400;return b});z("shaka.util.Dom.asHTMLElement",function(b){return b});z("shaka.util.Dom.asHTMLMediaElement",function(b){return b});z("shaka.util.Dom.removeAllChildren",function(b){for(;b.firstChild;)b.removeChild(b.firstChild)});/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function $k(){}var al;z("EmeEncryptionSchemePolyfill",$k);function bl(){al?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(al=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=cl):console.debug("EmeEncryptionSchemePolyfill: EME not found")}$k.install=bl;
function cl(b,c){var d=this;return u(function f(){var g;return y(f,function(f){switch(f.l){case 1:return console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),v(f,al.call(d,b,c),2);case 2:g=f.N;if(dl(g))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=al,f["return"](g);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=
el;return f["return"](el.call(d,b,c))}})})}
function el(b,c){var d=this;return u(function f(){var g,h,k,m,n,p,r,t;return y(f,function(f){switch(f.l){case 1:console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess');g=fl(b);h=[];for(var x=q(c),C=x.next();!C.done;C=x.next())k=C.value,m=gl(k.videoCapabilities,g),n=gl(k.audioCapabilities,g),k.videoCapabilities&&k.videoCapabilities.length&&!m.length||k.audioCapabilities&&k.audioCapabilities.length&&!n.length||(p=Object.assign({},k),p.videoCapabilities=m,p.audioCapabilities=n,h.push(p));
if(!h.length)throw r=Error("Unsupported keySystem or supportedConfigurations."),r.name="NotSupportedError",r.code=DOMException.NOT_SUPPORTED_ERR,r;return v(f,al.call(d,b,h),2);case 2:return t=f.N,f["return"](new hl(t,g))}})})}function gl(b,c){return b?b.filter(function(b){return!b.encryptionScheme||b.encryptionScheme==c}):b}function il(){}var jl;z("McEncryptionSchemePolyfill",il);
function kl(){navigator.mediaCapabilities?(jl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ll):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}il.install=kl;
function ll(b){var c=this;return u(function e(){var f,g;return y(e,function(e){switch(e.l){case 1:return console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),v(e,jl.call(c,b),2);case 2:f=e.N;if(!b.keySystemConfiguration)return e["return"](f);g=f.keySystemAccess;if(dl(g))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=jl,e["return"](f);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
navigator.mediaCapabilities.decodingInfo=ml;return e["return"](ml.call(c,b))}})})}
function ml(b){var c=this;return u(function e(){var f,g,h,k,m,n,p;return y(e,function(e){switch(e.l){case 1:return console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),f=null,b.keySystemConfiguration&&(g=b.keySystemConfiguration,h=g.keySystem,k=g.audio&&g.audio.encryptionScheme,m=g.video&&g.video.encryptionScheme,f=fl(h),n={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:b},k&&k!=f||m&&m!=f)?e["return"](n):v(e,jl.call(c,b),2);case 2:return p=e.N,
p.keySystemAccess&&(p.keySystemAccess=new hl(p.keySystemAccess,f)),e["return"](p)}})})}function hl(b,c){this.b=b;this.a=c;this.keySystem=b.keySystem}hl.prototype.getConfiguration=function(){var b=this.b.getConfiguration();if(b.videoCapabilities)for(var c=q(b.videoCapabilities),d=c.next();!d.done;d=c.next())d.value.encryptionScheme=this.a;if(b.audioCapabilities)for(c=q(b.audioCapabilities),d=c.next();!d.done;d=c.next())d.value.encryptionScheme=this.a;return b};hl.prototype.createMediaKeys=function(){return this.b.createMediaKeys()};
function fl(b){if(b.startsWith("com.widevine")||b.startsWith("com.microsoft")||b.startsWith("com.adobe")||b.startsWith("org.w3"))return"cenc";if(b.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",b,"Please contribute!");return null}function dl(b){b=b.getConfiguration();var c=b.audioCapabilities&&b.audioCapabilities[0];return(b=b.videoCapabilities&&b.videoCapabilities[0]||c)&&void 0!==b.encryptionScheme?!0:!1}function nl(){}
z("EncryptionSchemePolyfills",nl);function Bj(){bl();kl()}nl.install=Bj;"undefined"!==typeof module&&module.Wd&&(module.Wd=nl);}).call(exportTo,innerGlobal,innerGlobal,undefined);if(typeof exports!="undefined")for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k];else if(typeof define=="function"&&define.amd)define(function(){return exportTo.shaka});else innerGlobal.shaka=exportTo.shaka})();

//# sourceMappingURL=shaka-player.compiled.map